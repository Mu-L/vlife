import{ad as Eu,r as H,aj as Iu,j as c,d as s,c as Uu,ag as pu,ak as cu,B as yu}from"./index-SxAtwMns.js";import{c as fu,S as eu}from"./index-Kh_0iifu.js";import{F as au}from"./index-DtzUPu3w.js";import{l as Cu}from"./SysApp-BMXU6j0c.js";import"./toInteger-uMFPjwcp.js";var iu=["阿","哎","安","肮","凹","八","挀","扳","邦","勹","陂","奔","伻","屄","边","灬","憋","汃","冫","癶","峬","嚓","偲","参","仓","撡","冊","嵾","曽","叉","芆","辿","伥","抄","车","抻","阷","吃","充","抽","出","欻","揣","巛","刅","吹","旾","逴","呲","匆","凑","粗","汆","崔","邨","搓","咑","呆","丹","当","刀","嘚","扥","灯","氐","甸","刁","爹","丁","丟","东","吺","厾","耑","垖","吨","多","妸","诶","奀","鞥","儿","发","帆","匚","飞","分","丰","覅","仏","紑","夫","旮","侅","甘","冈","皋","戈","给","根","刯","工","勾","估","瓜","乖","关","光","归","丨","呙","哈","咍","佄","夯","茠","诃","黒","拫","亨","噷","叿","齁","乎","花","怀","欢","巟","灰","昏","吙","丌","加","戋","江","艽","阶","巾","坕","冂","丩","凥","姢","噘","军","咔","开","刊","忼","尻","匼","肎","劥","空","抠","扝","夸","蒯","宽","匡","亏","坤","扩","垃","来","兰","啷","捞","肋","勒","崚","哩","俩","奁","良","撩","毟","拎","伶","溜","囖","龙","瞜","噜","驴","娈","掠","抡","罗","呣","妈","埋","嫚","牤","猫","么","呅","门","甿","咪","宀","喵","乜","民","名","谬","摸","哞","毪","嗯","拏","腉","囡","囔","孬","疒","娞","恁","能","妮","拈","娘","鸟","捏","囜","宁","妞","农","羺","奴","女","奻","疟","黁","挪","喔","讴","妑","拍","眅","乓","抛","呸","喷","匉","丕","囨","剽","氕","姘","乒","钋","剖","仆","七","掐","千","呛","悄","癿","亲","靑","卭","丘","区","峑","缺","夋","呥","穣","娆","惹","人","扔","日","茸","厹","邚","挼","堧","婑","瞤","捼","仨","毢","三","桒","掻","閪","森","僧","杀","筛","山","伤","弰","奢","申","升","尸","収","书","刷","衰","闩","双","脽","吮","说","厶","忪","捜","苏","狻","夊","孙","唆","他","囼","坍","汤","夲","忑","熥","剔","天","旫","帖","厅","囲","偷","凸","湍","推","吞","乇","穵","歪","弯","尣","危","昷","翁","挝","乌","夕","虲","仙","乡","灱","些","心","星","凶","休","吁","吅","削","坃","丫","恹","央","幺","倻","一","囙","应","哟","佣","优","扜","囦","曰","晕","帀","災","兂","匨","傮","则","贼","怎","増","扎","捚","沾","张","佋","蜇","贞","争","之","中","州","朱","抓","拽","专","妆","隹","宒","卓","乲","宗","邹","租","钻","厜","尊","昨","兙"],Ou=["A","AI","AN","ANG","AO","BA","BAI","BAN","BANG","BAO","BEI","BEN","BENG","BI","BIAN","BIAO","BIE","BIN","BING","BO","BU","CA","CAI","CAN","CANG","CAO","CE","CEN","CENG","CHA","CHAI","CHAN","CHANG","CHAO","CHE","CHEN","CHENG","CHI","CHONG","CHOU","CHU","CHUA","CHUAI","CHUAN","CHUANG","CHUI","CHUN","CHUO","CI","CONG","COU","CU","CUAN","CUI","CUN","CUO","DA","DAI","DAN","DANG","DAO","DE","DEN","DENG","DI","DIAN","DIAO","DIE","DING","DIU","DONG","DOU","DU","DUAN","DUI","DUN","DUO","E","EI","EN","ENG","ER","FA","FAN","FANG","FEI","FEN","FENG","FIAO","FO","FOU","FU","GA","GAI","GAN","GANG","GAO","GE","GEI","GEN","GENG","GONG","GOU","GU","GUA","GUAI","GUAN","GUANG","GUI","GUN","GUO","HA","HAI","HAN","HANG","HAO","HE","HEI","HEN","HENG","HM","HONG","HOU","HU","HUA","HUAI","HUAN","HUANG","HUI","HUN","HUO","JI","JIA","JIAN","JIANG","JIAO","JIE","JIN","JING","JIONG","JIU","JU","JUAN","JUE","JUN","KA","KAI","KAN","KANG","KAO","KE","KEN","KENG","KONG","KOU","KU","KUA","KUAI","KUAN","KUANG","KUI","KUN","KUO","LA","LAI","LAN","LANG","LAO","LE","LEI","LENG","LI","LIA","LIAN","LIANG","LIAO","LIE","LIN","LING","LIU","LO","LONG","LOU","LU","LV","LUAN","LVE","LUN","LUO","M","MA","MAI","MAN","MANG","MAO","ME","MEI","MEN","MENG","MI","MIAN","MIAO","MIE","MIN","MING","MIU","MO","MOU","MU","N","NA","NAI","NAN","NANG","NAO","NE","NEI","NEN","NENG","NI","NIAN","NIANG","NIAO","NIE","NIN","NING","NIU","NONG","NOU","NU","NV","NUAN","NVE","NUN","NUO","O","OU","PA","PAI","PAN","PANG","PAO","PEI","PEN","PENG","PI","PIAN","PIAO","PIE","PIN","PING","PO","POU","PU","QI","QIA","QIAN","QIANG","QIAO","QIE","QIN","QING","QIONG","QIU","QU","QUAN","QUE","QUN","RAN","RANG","RAO","RE","REN","RENG","RI","RONG","ROU","RU","RUA","RUAN","RUI","RUN","RUO","SA","SAI","SAN","SANG","SAO","SE","SEN","SENG","SHA","SHAI","SHAN","SHANG","SHAO","SHE","SHEN","SHENG","SHI","SHOU","SHU","SHUA","SHUAI","SHUAN","SHUANG","SHUI","SHUN","SHUO","SI","SONG","SOU","SU","SUAN","SUI","SUN","SUO","TA","TAI","TAN","TANG","TAO","TE","TENG","TI","TIAN","TIAO","TIE","TING","TONG","TOU","TU","TUAN","TUI","TUN","TUO","WA","WAI","WAN","WANG","WEI","WEN","WENG","WO","WU","XI","XIA","XIAN","XIANG","XIAO","XIE","XIN","XING","XIONG","XIU","XU","XUAN","XUE","XUN","YA","YAN","YANG","YAO","YE","YI","YIN","YING","YO","YONG","YOU","YU","YUAN","YUE","YUN","ZA","ZAI","ZAN","ZANG","ZAO","ZE","ZEI","ZEN","ZENG","ZHA","ZHAI","ZHAN","ZHANG","ZHAO","ZHE","ZHEN","ZHENG","ZHI","ZHONG","ZHOU","ZHU","ZHUA","ZHUAI","ZHUAN","ZHUANG","ZHUI","ZHUN","ZHUO","ZI","ZONG","ZOU","ZU","ZUAN","ZUI","ZUN","ZUO",""],Gu={曾:"ZENG",沈:"SHEN",嗲:"DIA",碡:"ZHOU",聒:"GUO",炔:"QUE",蚵:"KE",砉:"HUA",嬤:"MO",嬷:"MO",蹒:"PAN",蹊:"XI",丬:"PAN",霰:"XIAN",莘:"XIN",豉:"CHI",饧:"XING",筠:"JUN",长:"CHANG",帧:"ZHEN",峙:"SHI",郍:"NA",芎:"XIONG",谁:"SHUI"},Hu={PINYINS:Ou,UNIHANS:iu,EXCEPTIONS:Gu},Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},L=Hu,hu="阿",gu="鿿",du=1,d=2,T=3,g=null,Z=void 0;function ru(l){l&&(typeof l=="function"&&(l=[l]),l.forEach&&l.forEach(function(n){typeof n=="function"&&n(L)}))}function Au(l){return!l&&g!==null||((typeof Intl>"u"?"undefined":Bu(Intl))==="object"&&Intl.Collator?(Z=new Intl.Collator(["zh-Hans-CN","zh-CN"]),g=Intl.Collator.supportedLocalesOf(["zh-CN"]).length===1):g=!1),g}function su(l){var n=L.UNIHANS,u=L.PINYINS,t=L.EXCEPTIONS,A={source:l};if(l in t)return A.type=d,A.target=t[l],A;var U=-1,p=void 0;if(l.charCodeAt(0)<256)return A.type=du,A.target=l,A;if(p=Z.compare(l,hu),p<0)return A.type=T,A.target=l,A;if(p===0)A.type=d,U=0;else{if(p=Z.compare(l,gu),p>0)return A.type=T,A.target=l,A;p===0&&(A.type=d,U=n.length-1)}if(A.type=d,U<0)for(var B=0,I=n.length-1;B<=I;){U=~~((B+I)/2);var G=n[U];if(p=Z.compare(l,G),p===0)break;p>0?B=U+1:I=U-1}return p<0&&U--,A.target=u[U],A.target||(A.type=T,A.target=A.source),A}function Nu(l){if(typeof l!="string")throw new Error("argument should be string.");if(!Au())throw new Error("not support Intl or zh-CN language.");return l.split("").map(function(n){return su(n)})}var Su={isSupported:Au,parse:Nu,patchDict:ru,genToken:su,convertToPinyin:function(n,u,t){return Nu(n).map(function(A){return t&&A.type===d?A.target.toLowerCase():A.target}).join(u||"")}},X={exports:{}};(function(l,n){n=l.exports=function(t){t.EXCEPTIONS={嗲:"DIA",碡:"ZHOU",聒:"GUO",炔:"QUE",蚵:"KE",砉:"HUA",嬷:"MO",蹊:"XI",丬:"PAN",霰:"XIAN",豉:"CHI",饧:"XING",帧:"ZHEN",芎:"XIONG",谁:"SHUI",钶:"KE"},t.UNIHANS[91]="伕",t.UNIHANS[347]="仚",t.UNIHANS[393]="诌",t.UNIHANS[39]="婤",t.UNIHANS[50]="腠",t.UNIHANS[369]="攸",t.UNIHANS[123]="乯",t.UNIHANS[171]="刕",t.UNIHANS[102]="佝",t.UNIHANS[126]="犿",t.UNIHANS[176]="列",t.UNIHANS[178]="刢",t.UNIHANS[252]="娝",t.UNIHANS[330]="偸"},n.shouldPatch=function(t){return typeof t!="function"?!1:t("伕").target==="FOU"&&t("仚").target==="XIA"&&t("诌").target==="ZHONG"&&t("婤").target==="CHONG"&&t("腠").target==="CONG"&&t("攸").target==="YONG"&&t("乯").target==="HOU"&&t("刕").target==="LENG"&&t("佝").target==="GONG"&&t("犿").target==="HUAI"&&t("列").target==="LIAO"&&t("刢").target==="LIN"&&t("钶").target==="E"}})(X,X.exports);var Du=X.exports,P=Su,lu=Du;P.isSupported()&&lu.shouldPatch(P.genToken)&&P.patchDict(lu);var vu=P;const bu=Eu(vu),b=[{label:"字符串",value:"java.lang.String",length:[{label:"32",value:32},{label:"50",value:50},{label:"64",value:64},{label:"255",value:255},{label:"500",value:500}]},{label:"整型",value:"java.lang.Integer"},{label:"长整型",value:"java.lang.Long"},{label:"小数",value:"java.lang.Double"},{label:"Text文本",value:"text"},{label:"布尔",value:"java.lang.Boolean"},{label:"日期",value:"java.util.Date"}],tu=["id","status","createId","modifyId","createDeptcode","createDate","modifyDate"],Xu=({onDataChange:l,tables:n,editorForm:u})=>{var j;const[t,A]=H.useState([]),[U,p]=H.useState([]);H.useEffect(()=>{Iu({}).then(a=>{A(a.data||[])}),Cu({}).then(a=>{p(a.data||[])})},[]);const B=H.useMemo(()=>U==null?void 0:U.map(a=>({label:`${a.name}`,value:a.id,children:n==null?void 0:n.filter(N=>N.itemType==="entity"&&N.sysAppId===a.id&&N.id!==(u==null?void 0:u.id)&&N.state!=="creating").filter(N=>a.appKey==="sys"&&(N.type==="sysUser"||N.type==="sysDept")||a.appKey!=="sys").map(N=>({label:N.title,value:N.type}))})),[n,u,U]),I=H.useCallback((a,N,O)=>{l(y=>{var C;return{...y,fields:(C=y==null?void 0:y.fields)==null?void 0:C.map((f,r)=>(r===a&&(f[N]=O),f))}})},[]),G=H.useCallback(()=>{l(a=>{var y,C;const N=(y=a==null?void 0:a.fields)==null?void 0:y.map(f=>f.fieldName),O=(C=a==null?void 0:a.orders)==null?void 0:C.split(",").filter(f=>N==null?void 0:N.includes(f.split("_")[0])).join(",");return{...a,orders:O===""?void 0:O}})},[u]);return c("div",{className:" w-full h-full flex flex-col",children:[c("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-300",children:[s("thead",{className:"",children:c("tr",{className:" text-center text-sm",children:[s("th",{className:"px-2 py-2 w-16 font-mediu border  bg-blue-50 border-blue-300",children:"序号"}),s("th",{className:" py-2 w-48 border bg-blue-50 border-blue-300 ",children:"是否外键"}),s("th",{className:" py-2 w-48  font-bold   border bg-blue-50 border-blue-300 ",children:"字段标识"}),s("th",{className:" py-2 w-48    border bg-blue-50 border-blue-300 ",children:"中文名称"}),s("th",{className:" py-2 w-48   font-bold  border bg-blue-50 border-blue-300 ",children:"字段类型"}),s("th",{className:"py-2 w-48  font-bold  border bg-blue-50 border-blue-300 ",children:"字段精度"}),!1,!1,s("th",{className:"px-6 py-2   font-bold border bg-blue-50 border-blue-300 ",children:"操作"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:(j=u==null?void 0:u.fields)==null?void 0:j.sort((a,N)=>a.sort-N.sort).map((a,N)=>{var O,y,C,f,r,x,M,S,K,Y,D,R,Q,v,J,z,W,V,$,q,k,F,m,_;return c("tr",{className:Uu({" hidden":tu.includes(a.fieldName)}),children:[s("td",{className:"px-6 py-1 whitespace-nowrap border text-center border-gray-300",children:u.fields&&((O=u.fields)==null?void 0:O.filter(e=>!e.fieldName||!tu.includes(e.fieldName)).indexOf(a))+1}),s("td",{className:"px-6  whitespace-nowrap border border-gray-300",children:a.id||a.sysField||a.javaType!==void 0&&a.javaType!=="java.lang.String"?a.entityType&&a.entityType!==u.type?s("span",{className:" font-bold text-blue-500",children:((y=n.find(e=>e.type===a.entityType))==null?void 0:y.title)||a.entityType}):"-":s(fu,{size:"small",className:" w-full",treeData:B,showClear:!0,leafOnly:!0,displayRender:e=>typeof e=="string"?e:e==null?void 0:e[e.length-1],onChange:e=>{var E;I(N,"entityType",e.length!==0?e==null?void 0:e[1]:void 0),I(N,"fieldName",e.length!==0?(e==null?void 0:e[1])+"Id":void 0),I(N,"title",e.length!==0?(E=n==null?void 0:n.find(h=>h.type===(e==null?void 0:e[1])))==null?void 0:E.title:void 0),I(N,"dbLength",e.length!==0?32:void 0),I(N,"javaType",e.length!==0?"java.lang.String":void 0),G()},value:a.entityType&&a.entityType!==u.type&&u.sysAppId?[((C=n==null?void 0:n.find(e=>e.type===a.entityType))==null?void 0:C.sysAppId)||"",a.entityType]:[],placeholder:"外键表关联"})}),s("td",{className:"px-6  whitespace-nowrap border border-gray-300",children:(f=u==null?void 0:u.fields)!=null&&f[N].entityType&&((r=u==null?void 0:u.fields)==null?void 0:r[N].entityType)!==u.type||a.id||a.sysField?`${(M=(x=u==null?void 0:u.fields)==null?void 0:x[N])==null?void 0:M.fieldName}`:c("div",{className:" flex items-center justify-center space-x-1 text-red-500",children:[s(au,{size:"small",placeholder:"英文字段标识",onChange:e=>{I(N,"fieldName",e),G()},value:a.fieldName}),c("span",{className:"text-xs ",children:["*",u&&(u!=null&&u.fields)&&((Y=(K=(S=u==null?void 0:u.fields)==null?void 0:S.filter)==null?void 0:K.call(S,e=>e.fieldName===a.fieldName&&a.fieldName!==void 0))==null?void 0:Y.length)>1?"重复":a.fieldName&&!pu(a.fieldName)?"禁用":""]})]})}),s("td",{className:"px-6  whitespace-nowrap border border-gray-300",children:c("div",{className:" flex items-center justify-center space-x-1  ",children:[s(au,{size:"small",placeholder:"填写中文名",className:" w-full",validateStatus:u&&(u!=null&&u.fields)&&((Q=(R=(D=u==null?void 0:u.fields)==null?void 0:D.filter)==null?void 0:R.call(D,e=>e.title===a.title))==null?void 0:Q.length)>1?"error":"default",value:a.title,onBlur:e=>{var h;const E=e.target.value;if(E){const i=(h=u==null?void 0:u.fields)==null?void 0:h.find((uu,w)=>w===N),o=i==null?void 0:i.fieldName,nu=i==null?void 0:i.id;if((o==null||o==="")&&nu===void 0){const uu=bu.convertToPinyin(cu(E),"-",!0).split("-").map(w=>w[0]).join("");I(N,"fieldName",uu)}}},onChange:e=>{I(N,"title",e),G()}}),c("span",{className:" text-xs  text-red-500",children:["*",u&&(u!=null&&u.fields)&&((z=(J=(v=u==null?void 0:u.fields)==null?void 0:v.filter)==null?void 0:J.call(v,e=>e.title===a.title&&a.title!==void 0))==null?void 0:z.length)>1?"重复":""]})]})}),s("td",{className:"px-6  whitespace-nowrap border border-gray-300",children:(W=u==null?void 0:u.fields)!=null&&W[N].entityType&&((V=u==null?void 0:u.fields)==null?void 0:V[N].entityType)!==u.type||a.id||a.sysField?`${($=b.find(e=>{var E;return e.value===((E=u==null?void 0:u.fields)==null?void 0:E[N].javaType)}))==null?void 0:$.label}`:c("div",{className:" flex items-center justify-center space-x-1 font-bold text-red-500",children:[s(eu,{size:"small",placeholder:"字段类型",className:" w-full",value:a.javaType,optionList:b,onChange:e=>{I(N,"javaType",e),e!=="java.lang.String"&&I(N,"dictCode",void 0)}}),s("span",{children:"*"})]})}),s("td",{className:"px-6  whitespace-nowrap border border-gray-300",children:(q=u==null?void 0:u.fields)!=null&&q[N].entityType&&((k=u==null?void 0:u.fields)==null?void 0:k[N].entityType)!==u.type?a.dbLength:((F=b.find(e=>{var E;return e.value===((E=u==null?void 0:u.fields)==null?void 0:E[N].javaType)}))==null?void 0:F.length)&&s(eu,{size:"small",value:a.dbLength,optionList:(_=(m=b.find(e=>{var E;return e.value===((E=u==null?void 0:u.fields)==null?void 0:E[N].javaType)}))==null?void 0:m.length)==null?void 0:_.filter(e=>!a.id||!a.dbLength||e.value>=a.dbLength),placeholder:"字段长度",className:" w-full",onChange:e=>{I(N,"dbLength",e==null?void 0:e.toString())}})}),!1,!1,s("td",{className:"px-6  whitespace-nowrap border border-gray-300 text-center",children:!a.sysField&&s(yu,{onClick:()=>{l(e=>{var E;return{...e,fields:(E=e==null?void 0:e.fields)==null?void 0:E.filter((h,i)=>N!==i)}}),G()},size:"small",children:a.id?"删除":"取消"})})]},a.id||`temp_${N}`)})})]}),c("div",{className:" text-sm mt-2 flex justify-start",children:["使用 ",s("span",{className:"font-bold text-blue-500  ",children:"[alt+n]"}),"快速添加一个字段。"]}),c("div",{className:" text-center pt-4",children:[s("span",{className:" text-red-500 ",children:"*"}),s("span",{className:" text-sm",children:"仅需设计业务字段,系统会自动创建id(主键),createId,modifyId,createDate,modifyDate,status(数据状态)"})]})]})};export{Xu as default,tu as sysFields};
