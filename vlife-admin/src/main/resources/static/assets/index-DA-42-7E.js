import{w as R,r as y,B as J,a_ as g,a as ee,h as p,aN as B,aO as m,b9 as te,cE as ne,P as s,c as d,d as se,f,g as C,b4 as ae,cQ as oe}from"./index-zu87m18r.js";function ie(l){return y.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},l),y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm5.04-6.14a1.5 1.5 0 0 1-2.13.04l-2.87-2.78L9.26 17A1.5 1.5 0 0 1 7.1 14.9l2.78-2.87L7 9.26A1.5 1.5 0 1 1 9.1 7.1l2.87 2.78L14.74 7A1.5 1.5 0 0 1 16.9 9.1l-2.78 2.87L17 14.74c.6.58.61 1.53.04 2.12Z",fill:"currentColor"}))}const re=R(ie,"clear");function le(l){return y.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},l),y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7 3.7a1 1 0 0 0-1.4-1.4L17.3 5.26A11.59 11.59 0 0 0 12 4C5 4 1 10 1 12c0 1.18 1.38 3.73 3.94 5.64L2.3 20.3a1 1 0 1 0 1.42 1.42l18-18ZM7.84 14.77l1.46-1.47a3 3 0 0 1 4-4l1.47-1.46a5 5 0 0 0-6.93 6.93Z",fill:"currentColor"}),y.createElement("path",{d:"M12 20c-1.22 0-2.35-.18-3.38-.5l2.57-2.57a5 5 0 0 0 5.75-5.75l3.56-3.56C22.13 9.27 23 11.07 23 12c0 2-4 8-11 8Z",fill:"currentColor"}))}const de=R(le,"eye_closed_solid"),he={PREFIX:`${J}-input`},x={SIZE:["small","large","default"],DEFAULT_SIZE:"default",STATUS:["default","error","warning","success"],CLEARBTN_CLICKED_EVENT_FLAG:"__fromClearBtn",MODE:["password"]},Ee={};function ue(l){const{value:e,maxLength:t,getValueLength:n}=l;if(g(n)){let a=0,r=e.length;for(;a<r;){const h=a+Math.floor((r-a)/2),u=e.slice(0,h+1);n(u)>t?r=h:a=h+1}return e.slice(0,a)}else return e.slice(0,t)}class S extends ee{static get inputDefaultAdapter(){return{notifyChange:p,setValue:p}}constructor(e){super(Object.assign(Object.assign({},S.inputDefaultAdapter),e)),this.compositionEnter=!1,this.getNextValue=t=>{const{maxLength:n,minLength:a,getValueLength:r}=this._adapter.getProps();return g(r)?n?this.handleVisibleMaxLength(t):(a&&this.handleVisibleMinLength(t),t):t},this.changeInput=(t,n)=>{this._isControlledComponent()?this._adapter.notifyChange(t,n):(this._adapter.setValue(t),this._adapter.notifyChange(t,n))},this.handleCompositionStart=()=>{this.compositionEnter=!0},this.handleCompositionEnd=t=>{const n=t.target.value;this.compositionEnter=!1;const{getValueLength:a,maxLength:r,minLength:h}=this.getProps();if(g(a)){if(r){const u=this.handleVisibleMaxLength(n);u!==n&&this.changeInput(u,t)}h&&this.handleVisibleMinLength(n)}}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}setDisable(){}setValue(e){this._adapter.setValue(e)}handleChange(e,t){let n=e;this.compositionEnter||(n=this.getNextValue(n)),this.changeInput(n,t)}handleVisibleMinLength(e){const{minLength:t,getValueLength:n}=this._adapter.getProps(),{minLength:a}=this._adapter.getStates();if(B(t)&&t>=0&&g(n)&&m(e)){const r=n(e);if(r<t){const h=e.length+(t-r);h!==a&&this._adapter.setMinLength(h)}else a!==t&&this._adapter.setMinLength(t)}}handleVisibleMaxLength(e){const{maxLength:t,getValueLength:n}=this._adapter.getProps();return B(t)&&t>=0&&g(n)&&m(e)&&n(e)>t?(console.warn("[Semi Input] The input character is truncated because the input length exceeds the maximum length limit"),this.handleTruncateValue(e,t)):e}handleTruncateValue(e,t){const{getValueLength:n}=this._adapter.getProps();return ue({value:e,maxLength:t,getValueLength:n})}handleClear(e){let t=e;const n="";this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),(!t||typeof t!="object")&&(t={}),te(t,x.CLEARBTN_CLICKED_EVENT_FLAG,!0),this._adapter.notifyChange(n,t),this._adapter.notifyClear(t),t&&this.stopPropagation(t)}handleClick(e){const{disabled:t}=this._adapter.getProps(),{isFocus:n}=this._adapter.getStates();t||n||this._adapter.isEventTarget(e)&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handleModeChange(e){e==="password"?this._adapter.setEyeClosed(!0):this._adapter.setEyeClosed(!1)}handleClickEye(e){const t=this._adapter.getState("eyeClosed");this._adapter.focusInput(),this._adapter.toggleFocusing(!0),this._adapter.setEyeClosed(!t)}handleInputType(e){const t=this._adapter.getProp("mode"),n=this._adapter.getState("eyeClosed");return t==="password"?n?"password":"text":e}handleMouseDown(e){e.preventDefault()}handleMouseUp(e){e.preventDefault()}handleBlur(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(t,e)}handleFocus(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(t,e)}handleInput(e){this._adapter.notifyInput(e)}handleKeyDown(e){this._adapter.notifyKeyDown(e)}handleKeyUp(e){this._adapter.notifyKeyUp(e)}handleKeyPress(e){this._adapter.notifyKeyPress(e),e.key===ne&&this._adapter.notifyEnterPress(e)}isAllowClear(){const{value:e,isFocus:t,isHovering:n}=this._adapter.getStates(),{showClear:a,disabled:r,showClearIgnoreDisabled:h}=this._adapter.getProps();return e&&a&&(!r||h)&&(t||n)}handleClickPrefixOrSuffix(e){const{disabled:t}=this._adapter.getProps(),{isFocus:n}=this._adapter.getStates();!t&&!n&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handlePreventMouseDown(e){e&&g(e.preventDefault)&&e.preventDefault()}handleModeEnterPress(e){["Enter"," "].includes(e==null?void 0:e.key)&&(this.handlePreventMouseDown(e),this.handleClickEye(e))}}var pe=function(l,e){var t={};for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&e.indexOf(n)<0&&(t[n]=l[n]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(l);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(l,n[a])&&(t[n[a]]=l[n[a]]);return t};const o=he.PREFIX,ce=x.SIZE,fe=x.STATUS,ge=x.MODE;class L extends se{constructor(e){super(e),this.handleClear=n=>{this.foundation.handleClear(n)},this.handleClick=n=>{this.foundation.handleClick(n)},this.handleMouseOver=n=>{this.setState({isHovering:!0})},this.handleMouseLeave=n=>{this.setState({isHovering:!1})},this.handleModeChange=n=>{this.foundation.handleModeChange(n)},this.handleClickEye=n=>{this.foundation.handleClickEye(n)},this.handleMouseDown=n=>{this.foundation.handleMouseDown(n)},this.handleMouseUp=n=>{this.foundation.handleMouseUp(n)},this.handleModeEnterPress=n=>{this.foundation.handleModeEnterPress(n)},this.handleClickPrefixOrSuffix=n=>{this.foundation.handleClickPrefixOrSuffix(n)},this.handlePreventMouseDown=n=>{this.foundation.handlePreventMouseDown(n)};const t="value"in e?e.value:e.defaultValue;this.state={value:t,cachedValue:e.value,disabled:!1,props:{},isFocus:!1,isHovering:!1,eyeClosed:e.mode==="password",minLength:e.minLength},this.inputRef=d.createRef(),this.prefixRef=d.createRef(),this.suffixRef=d.createRef(),this.foundation=new S(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e}),setEyeClosed:e=>this.setState({eyeClosed:e}),toggleFocusing:e=>{this.setState({isFocus:e})},focusInput:()=>{const{preventScroll:e}=this.props,t=this.inputRef&&this.inputRef.current;t&&t.focus({preventScroll:e})},toggleHovering:e=>this.setState({isHovering:e}),getIfFocusing:()=>this.state.isFocus,notifyChange:(e,t)=>this.props.onChange(e,t),notifyBlur:(e,t)=>this.props.onBlur(t),notifyFocus:(e,t)=>this.props.onFocus(t),notifyInput:e=>this.props.onInput(e),notifyKeyPress:e=>this.props.onKeyPress(e),notifyKeyDown:e=>this.props.onKeyDown(e),notifyKeyUp:e=>this.props.onKeyUp(e),notifyEnterPress:e=>this.props.onEnterPress(e),notifyClear:e=>this.props.onClear(e),setMinLength:e=>this.setState({minLength:e}),isEventTarget:e=>e&&e.target===e.currentTarget})}static getDerivedStateFromProps(e,t){const n={};return e.value!==t.cachedValue&&(n.value=e.value,n.cachedValue=e.value),n}componentDidUpdate(e){const{mode:t}=this.props;e.mode!==t&&this.handleModeChange(t)}componentDidMount(){const{disabled:e,autoFocus:t,preventScroll:n}=this.props;!e&&(t||this.props.autofocus)&&this.inputRef.current.focus({preventScroll:n})}renderPrepend(){const{addonBefore:e}=this.props;if(e){const t=f({[`${o}-prepend`]:!0,[`${o}-prepend-text`]:e&&m(e),[`${o}-prepend-icon`]:C(e)});return d.createElement("div",{className:t,"x-semi-prop":"addonBefore"},e)}return null}renderAppend(){const{addonAfter:e}=this.props;if(e){const t=f({[`${o}-append`]:!0,[`${o}-append-text`]:e&&m(e),[`${o}-append-icon`]:C(e)});return d.createElement("div",{className:t,"x-semi-prop":"addonAfter"},e)}return null}renderClearBtn(){const e=f(`${o}-clearbtn`),{clearIcon:t}=this.props;return this.foundation.isAllowClear()?d.createElement("div",{className:e,onMouseDown:this.handleClear},t||d.createElement(re,null)):null}renderModeBtn(){const{eyeClosed:e}=this.state,{mode:t,disabled:n}=this.props,a=f(`${o}-modebtn`),r=e?d.createElement(de,null):d.createElement(oe,null),h=t==="password"&&!n,u=e?"Show password":"Hidden password";return h?d.createElement("div",{role:"button",tabIndex:0,"aria-label":u,className:a,onClick:this.handleClickEye,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyPress:this.handleModeEnterPress},r):null}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:n}=this.props,a=e||t;if(!a)return null;const r=f({[`${o}-prefix`]:!0,[`${o}-inset-label`]:t,[`${o}-prefix-text`]:a&&m(a),[`${o}-prefix-icon`]:C(a)});return d.createElement("div",{className:r,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:n,"x-semi-prop":"prefix,insetLabel"},a)}renderSuffix(e){const{suffix:t,hideSuffix:n}=this.props;if(!t)return null;const a=f({[`${o}-suffix`]:!0,[`${o}-suffix-text`]:t&&m(t),[`${o}-suffix-icon`]:C(t),[`${o}-suffix-hidden`]:e&&!!n});return d.createElement("div",{className:a,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},t)}getInputRef(){const{forwardRef:e}=this.props;if(!ae(e)){if(typeof e=="function")return t=>{e(t),this.inputRef={current:t}};if(Object.prototype.toString.call(e)==="[object Object]")return this.inputRef=e,e}return this.inputRef}render(){const e=this.props,{addonAfter:t,addonBefore:n,autoFocus:a,clearIcon:r,className:h,disabled:u,defaultValue:me,placeholder:A,prefix:K,mode:P,insetLabel:j,insetLabelId:Ce,validateStatus:v,type:M,readonly:I,size:w,suffix:$,style:V,showClear:N,onEnterPress:ye,onClear:we,hideSuffix:T,inputStyle:k,forwardRef:be,maxLength:U,getValueLength:Z,preventScroll:_e,borderless:H,showClearIgnoreDisabled:xe,onlyBorder:b}=e,z=pe(e,["addonAfter","addonBefore","autoFocus","clearIcon","className","disabled","defaultValue","placeholder","prefix","mode","insetLabel","insetLabelId","validateStatus","type","readonly","size","suffix","style","showClear","onEnterPress","onClear","hideSuffix","inputStyle","forwardRef","maxLength","getValueLength","preventScroll","borderless","showClearIgnoreDisabled","onlyBorder"]),{value:E,isFocus:W,minLength:D}=this.state,F=this.foundation.isAllowClear(),X=C($),G=this.getInputRef(),c=`${o}-wrapper`,q=f(c,h,{[`${o}-wrapper__with-prefix`]:K||j,[`${o}-wrapper__with-suffix`]:$,[`${o}-wrapper__with-suffix-hidden`]:F&&!!T,[`${o}-wrapper__with-suffix-icon`]:X,[`${o}-wrapper__with-append`]:n,[`${o}-wrapper__with-prepend`]:t,[`${o}-wrapper__with-append-only`]:n&&!t,[`${o}-wrapper__with-prepend-only`]:!n&&t,[`${c}-readonly`]:I,[`${c}-disabled`]:u,[`${c}-warning`]:v==="warning",[`${c}-error`]:v==="error",[`${c}-focus`]:W,[`${c}-clearable`]:N,[`${c}-modebtn`]:P==="password",[`${c}-hidden`]:M==="hidden",[`${c}-${w}`]:w,[`${o}-borderless`]:H,[`${o}-only_border`]:b!=null}),Q=f(o,{[`${o}-${w}`]:w,[`${o}-disabled`]:u,[`${o}-sibling-clearbtn`]:this.foundation.isAllowClear(),[`${o}-sibling-modebtn`]:P==="password"}),Y=E??"",_=Object.assign(Object.assign({},z),{style:k,className:Q,disabled:u,readOnly:I,type:this.foundation.handleInputType(M),placeholder:A,onInput:i=>this.foundation.handleInput(i),onChange:i=>this.foundation.handleChange(i.target.value,i),onFocus:i=>this.foundation.handleFocus(i),onBlur:i=>this.foundation.handleBlur(i),onKeyUp:i=>this.foundation.handleKeyUp(i),onKeyDown:i=>this.foundation.handleKeyDown(i),onKeyPress:i=>this.foundation.handleKeyPress(i),onCompositionStart:this.foundation.handleCompositionStart,onCompositionEnd:this.foundation.handleCompositionEnd,value:Y});g(Z)||(_.maxLength=U),D&&(_.minLength=D),v==="error"&&(_["aria-invalid"]="true");let O=Object.assign({},V);return b!==void 0&&(O=Object.assign({borderWidth:b},V)),d.createElement("div",{className:q,style:O,onMouseEnter:i=>this.handleMouseOver(i),onMouseLeave:i=>this.handleMouseLeave(i),onClick:i=>this.handleClick(i)},this.renderPrepend(),this.renderPrefix(),d.createElement("input",Object.assign({},_,{ref:G})),this.renderClearBtn(),this.renderSuffix(F),this.renderModeBtn(),this.renderAppend())}}L.propTypes={"aria-label":s.string,"aria-labelledby":s.string,"aria-invalid":s.bool,"aria-errormessage":s.string,"aria-describedby":s.string,"aria-required":s.bool,addonBefore:s.node,addonAfter:s.node,clearIcon:s.node,prefix:s.node,suffix:s.node,mode:s.oneOf(ge),value:s.any,defaultValue:s.any,disabled:s.bool,readonly:s.bool,autoFocus:s.bool,type:s.string,showClear:s.bool,hideSuffix:s.bool,placeholder:s.any,size:s.oneOf(ce),className:s.string,style:s.object,validateStatus:s.oneOf(fe),onClear:s.func,onChange:s.func,onBlur:s.func,onFocus:s.func,onInput:s.func,onKeyDown:s.func,onKeyUp:s.func,onKeyPress:s.func,onEnterPress:s.func,insetLabel:s.node,insetLabelId:s.string,inputStyle:s.object,getValueLength:s.func,preventScroll:s.bool,borderless:s.bool};L.defaultProps={addonBefore:"",addonAfter:"",prefix:"",suffix:"",readonly:!1,type:"text",showClear:!1,hideSuffix:!1,placeholder:"",size:"default",className:"",onClear:p,onChange:p,onBlur:p,onFocus:p,onInput:p,onKeyDown:p,onKeyUp:p,onKeyPress:p,onEnterPress:p,validateStatus:"default",borderless:!1};const Se=d.forwardRef((l,e)=>d.createElement(L,Object.assign({},l,{forwardRef:e})));export{Se as F,re as I,de as a,he as c,Ee as n,x as s,ue as t};
