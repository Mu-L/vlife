import{B as Ge,a as de,_ as te,i as Z,b as De,c as m,d as pe,T as he,e as Ue,f as M,g as Ve,P as o,h as F,C as Be,I as fe,j as W,r as v,k as l,l as x,F as ue,m as ge,L as ze,n as Ze,u as we,o as _e,p as me,E as Xe,q as We,s as Ye,t as qe,v as ye,S as Je,O as Qe}from"./index-zu87m18r.js";import{L as se,F as et,C as tt}from"./confirmModal-C_kkW56o.js";import{l as st}from"./logo2-DYc4F8xQ.js";import{_ as Le,I as Ce,C as nt,a as it,V as ae,b as ot,c as at,A as be,S as lt,d as Ie,e as rt}from"./index-D84rZFL3.js";import{D as H}from"./index-D_2oZ5Sg.js";import{B as Me}from"./BtnToolBar-eoxdJY99.js";import{L as ct}from"./LinkMe-D6FGTkzx.js";import{a as dt,t as pt,A as Oe}from"./index-9RHR0oTx.js";import{V as G}from"./VF-CFm92MRs.js";import{l as ht,e as ut,r as mt,c as ft}from"./SysApp-DRxQSclV.js";import{V as gt}from"./VfUserGuide-BKR-0q3f.js";import{s as re,a as ve,r as yt}from"./SysMenu-D-Y-5kwU.js";import{G as Ct}from"./GroupButton-DUTfCbto.js";import{u as bt,s as It}from"./GroupLabel-CFJ4I-sR.js";import{v as Ot}from"./vlifeModal-CNFwsqlW.js";import"./formPage-D0LEgB12.js";import"./index-DA-42-7E.js";import"./isBrowser-DDdYk2YE.js";const Ke="horizontal",Se="vertical",k={PREFIX:`${Ge}-navigation`},I={MODE:[Se,Ke],MODE_VERTICAL:Se,MODE_HORIZONTAL:Ke,ICON_POS_LEFT:"left",ICON_POS_RIGHT:"right",DEFAULT_LOGO_ICON_SIZE:"extra-large",TOGGLE_ICON_LEFT:"left",TOGGLE_ICON_RIGHT:"right"},Y={DEFAULT_SUBNAV_MAX_HEIGHT:999,DEFAULT_TOOLTIP_SHOW_DELAY:0,DEFAULT_TOOLTIP_HIDE_DELAY:100,DEFAULT_SUBNAV_OPEN_DELAY:0,DEFAULT_SUBNAV_CLOSE_DELAY:100},Ee={open:"chevron_up",closed:"chevron_down"};let vt=class ce{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(e==null||typeof e!="object")&&(e={text:e,itemKey:e,maxHeight:Y.DEFAULT_SUBNAV_MAX_HEIGHT,link:null,items:null,icon:"",indent:!1});for(const t of Object.keys(e))this[t]=e[t];e.items&&Array.isArray(e.items)&&e.items.length?(this.items=e.items.map(t=>new ce(t)),"toggleIcon"in e?this.toggleIcon=ce.isValidToggleIcon(e.toggleIcon)?Object.assign({},e.toggleIcon):Object.assign({},Ee):this.toggleIcon=Object.assign({},Ee)):this.items=null}static isValidToggleIcon(e){return!!(e&&typeof e=="object"&&typeof e.open=="string"&&e.open.length&&typeof e.closed=="string"&&e.closed.length)}};class q extends de{constructor(e){super(Object.assign({},e))}static getZeroParentKeys(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=[];for(var s=arguments.length,n=new Array(s>1?s-1:0),a=1;a<s;a++)n[a-1]=arguments[a];if(n.length){for(const i of n)if(Array.isArray(e[i])&&e[i].length){const c=e[i][0];Z(c)||t.push(c)}}return t}static buildItemKeysMap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"itemKey";var a;if(Array.isArray(e)&&e.length)for(const i of e)if(Array.isArray(i))q.buildItemKeysMap(i,t,[...s],n);else{let c;if(i&&typeof i=="object"&&(c=i[n]||i.props&&i.props[n]),c){t[c]=[...s];const h=(a=i.props)===null||a===void 0?void 0:a.children;if(Array.isArray(i.items)&&i.items.length)q.buildItemKeysMap(i.items,t,[...s,c],n);else if(h){const g=Array.isArray(h)?h:[h];q.buildItemKeysMap(g,t,[...s,c],n)}}}return t}init(e){const{defaultSelectedKeys:t,selectedKeys:s}=this.getProps();let n=s||t||[];const{itemKeysMap:a,willOpenKeys:i,formattedItems:c}=this.getCalcState(),h=this.selectLevelZeroParentKeys(a,n);if(n=n.concat(h),e==="constructor")return{selectedKeys:n,itemKeysMap:a,openKeys:i,items:c};this._adapter.updateSelectedKeys(n,!1),this._adapter.setItemKeysMap(a),this._adapter.updateOpenKeys(i),this._adapter.updateItems(c),this._adapter.setItemsChanged(!0)}getCalcState(){const{itemKeysMap:e,formattedItems:t}=this.getFormattedItems(),s=this.getWillOpenKeys(e);return{itemKeysMap:e,willOpenKeys:s,formattedItems:t}}getFormattedItems(){const{items:e,children:t}=this.getProps(),s=this.formatItems(e),n=Array.isArray(e)&&e.length?s:t;return{itemKeysMap:q.buildItemKeysMap(n),formattedItems:s}}getWillOpenKeys(e){const{defaultOpenKeys:t,openKeys:s,defaultSelectedKeys:n,selectedKeys:a,mode:i}=this.getProps(),{openKeys:c=[]}=this.getStates();let h=s||t||[];if(!(Array.isArray(t)||Array.isArray(s))&&i===I.MODE_VERTICAL&&(Array.isArray(n)||Array.isArray(a))){const g=Array.isArray(a)?a:n;h=c.concat(this.getShouldOpenKeys(e,g)),h=Array.from(new Set(h))}return[...h]}getShouldOpenKeys(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const s=new Set;return Array.isArray(t)&&t.length&&t.forEach(n=>{if(n){const a=te(e,n);Array.isArray(a)&&a.forEach(i=>s.add(i))}}),[...s]}destroy(){}selectLevelZeroParentKeys(e,t){const s=Z(e)?this.getState("itemKeysMap"):e,n=[];if(t.length){for(const a of t)if(Array.isArray(s[a])&&s[a].length){const i=s[a][0];Z(i)||n.push(i)}}return n.length?n:[]}formatItems(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];for(const s of e)t.push(new vt(s));return t}handleSelect(e){this._adapter.notifySelect(e)}judgeIfOpen(e,t){let s=!1;const n=Array.isArray(e)?e:e&&[e];if(n&&Array.isArray(t)&&t.length){for(const a of t)if(s=n.includes(a.itemKey)||this.judgeIfOpen(n,a.items),s)break}return s}handleCollapseChange(){const e=!this.getState("isCollapsed");this._isControlledComponent("isCollapsed")||this._adapter.setIsCollapsed(e),this._adapter.notifyCollapseChange(e)}handleItemsChange(e){this._adapter.setItemsChanged(e)}}const Te=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=new Set(e);for(var s=arguments.length,n=new Array(s>1?s-1:0),a=1;a<s;a++)n[a-1]=arguments[a];return n.forEach(i=>i&&t.add(i)),Array.from(t)},xe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=new Set(e);for(var s=arguments.length,n=new Array(s>1?s-1:0),a=1;a<s;a++)n[a-1]=arguments[a];return n.forEach(i=>i&&t.delete(i)),Array.from(t)};class Kt extends de{constructor(e){super(Object.assign({},e))}init(){this._timer=null}destroy(){this.clearDelayTimer()}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}isValidKey(e){return e!=null&&(typeof e=="number"||typeof e=="string")}handleDropdownVisibleChange(e){const t=this.getProp("itemKey"),s=this._adapter.getOpenKeysIsControlled(),n=this._adapter.getCanUpdateOpenKeys(),a=this._adapter.getOpenKeys(),i=e?Te(a,t):xe(a,t);this.clearDelayTimer(),s||n&&this._adapter.updateOpen(e),this._adapter.notifyGlobalOpenChange({itemKey:t,openKeys:i,isOpen:e})}handleClick(e,t){const{itemKey:s,disabled:n}=this.getProps();if(n)return;const a=t&&t.contains(e.target);let i=!!this._adapter.getIsOpen();a?i=!i:i=!1;const c=i?Te(this._adapter.getOpenKeys(),s):xe(this._adapter.getOpenKeys(),s),h={itemKey:s,openKeys:c,isOpen:i,domEvent:e},g=this._adapter.getOpenKeysIsControlled(),y=this._adapter.getCanUpdateOpenKeys();!g&&y&&this._adapter.updateOpen(i),this._adapter.notifyGlobalOpenChange(h),this._adapter.notifyGlobalOnClick(h)}handleKeyPress(e,t){De(e)&&this.handleClick(e,t)}}class St extends de{constructor(e){super(Object.assign({},e))}init(){this._timer=null,this._mounted=!0}destroy(){this._mounted=!1}isValidKey(e){return e!=null&&(typeof e=="string"||typeof e=="number")}handleClick(e){const{isSubNav:t,itemKey:s,text:n,disabled:a}=this.getProps();if(a)return;!t&&this.isValidKey(s)&&!this._adapter.getSelectedKeysIsControlled()&&!this._adapter.getSelected()&&this._adapter.updateSelected(!0);const i=[s];if(!t){if(!this._adapter.getSelected()){const c=[this._adapter.cloneDeep(this.getProps())];this._adapter.notifyGlobalOnSelect({itemKey:s,selectedKeys:i,selectedItems:c,domEvent:e})}this._adapter.notifyGlobalOnClick({itemKey:s,text:n,domEvent:e})}this._adapter.notifyClick({itemKey:s,text:n,domEvent:e})}handleKeyPress(e){if(De(e)){const{link:t,linkOptions:s}=this.getProps(),n=te(s,"target","_self");this.handleClick(e),typeof t=="string"&&(n==="_blank"?window.open(t):window.location.href=t)}}}const J=m.createContext({isCollapsed:!1,selectedKeys:[],openKeys:[]}),w=`${k.PREFIX}-item`;class Q extends pe{constructor(e){super(e),this.setItemRef=t=>{this.props.forwardRef&&this.props.forwardRef(t)},this.wrapTooltip=t=>{const{text:s,tooltipHideDelay:n,tooltipShowDelay:a}=this.props,i=n??this.context.tooltipHideDelay,c=a??this.context.tooltipShowDelay;return m.createElement(he,{content:s,wrapWhenSpecial:!1,position:"right",trigger:"hover",mouseEnterDelay:c,mouseLeaveDelay:i},t)},this.handleClick=t=>this.foundation.handleClick(t),this.handleKeyPress=t=>this.foundation.handleKeyPress(t),this.state={tooltipShow:!1},this.foundation=new St(this.adapter)}_invokeContextFunc(e){if(e&&this.context&&typeof this.context[e]=="function"){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];return this.context[e](...s)}return null}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{cloneDeep:Ue,updateTooltipShow:t=>this.setState({tooltipShow:t}),updateSelected:t=>this._invokeContextFunc("updateSelectedKeys",[this.props.itemKey]),updateGlobalSelectedKeys:t=>this._invokeContextFunc("updateSelectedKeys",[...t]),getSelectedKeys:()=>this.context&&this.context.selectedKeys,getSelectedKeysIsControlled:()=>this.context&&this.context.selectedKeysIsControlled,notifyGlobalOnSelect:function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return e._invokeContextFunc("onSelect",...s)},notifyGlobalOnClick:function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return e._invokeContextFunc("onClick",...s)},notifyClick:function(){return e.props.onClick(...arguments)},notifyMouseEnter:function(){return e.props.onMouseEnter(...arguments)},notifyMouseLeave:function(){return e.props.onMouseLeave(...arguments)},getIsCollapsed:()=>this.props.isCollapsed||!!(this.context&&this.context.isCollapsed)||!1,getSelected:()=>!!(this.context&&this.context.selectedKeys&&this.context.selectedKeys.includes(this.props.itemKey)),getIsOpen:()=>!!(this.context&&this.context.openKeys&&this.context.openKeys.includes(this.props.itemKey))})}renderIcon(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(this.props.isSubNav||!e&&this.context.mode===I.MODE_HORIZONTAL)return null;let a="large";t===I.ICON_POS_RIGHT&&(a="default");const i=M(`${w}-icon`,{[`${w}-icon-toggle-${this.context.toggleIconPosition}`]:s,[`${w}-icon-info`]:!s});return m.createElement("i",{className:i,key:n},Ve(e)?m.cloneElement(e,{size:e.props.size||a}):e)}render(){var e;const{text:t,icon:s,toggleIcon:n,className:a,isSubNav:i,style:c,indent:h,onMouseEnter:g,onMouseLeave:y,link:u,linkOptions:A,disabled:N,level:E=0,tabIndex:O}=this.props,{mode:C,isInSubNav:f,prefixCls:b,limitIndent:P}=this.context,_=this.adapter.getIsCollapsed(),D=this.adapter.getSelected();let L=null;const B=(e=this.props)===null||e===void 0?void 0:e.children;if(!Z(B))L=B;else{let p=null;if(C===I.MODE_VERTICAL&&!P&&!_){const K=s&&!h?E:E-1;p=Le(K,T=>this.renderIcon(null,I.ICON_POS_RIGHT,!1,T))}L=m.createElement(m.Fragment,null,p,this.context.toggleIconPosition===I.TOGGLE_ICON_LEFT&&this.renderIcon(n,I.ICON_POS_RIGHT,!0,"key-toggle-pos-right"),s||h||f?this.renderIcon(s,I.ICON_POS_LEFT,!1,"key-position-left"):null,Z(t)?"":m.createElement("span",{className:`${k.PREFIX}-item-text`},t),this.context.toggleIconPosition===I.TOGGLE_ICON_RIGHT&&this.renderIcon(n,I.ICON_POS_RIGHT,!0,"key-toggle-pos-right"))}typeof u=="string"&&(L=m.createElement("a",Object.assign({className:`${b}-item-link`,href:u,tabIndex:-1},A),L));let $="";if(f&&(_||C===I.MODE_HORIZONTAL)){const p=M({[w]:!0,[`${w}-sub`]:i,[`${w}-selected`]:D,[`${w}-collapsed`]:_,[`${w}-disabled`]:N});$=m.createElement(H.Item,{selected:D,active:D,forwardRef:this.setItemRef,className:p,onClick:this.handleClick,onMouseEnter:g,onMouseLeave:y,disabled:N,onKeyDown:this.handleKeyPress},L)}else{const p=M(`${a||`${w}-normal`}`,{[w]:!0,[`${w}-sub`]:i,[`${w}-selected`]:D&&!i,[`${w}-collapsed`]:_,[`${w}-disabled`]:N,[`${w}-has-link`]:typeof u=="string"}),K={"aria-disabled":N};if(i){const T=this.adapter.getIsOpen();K["aria-expanded"]=T}$=m.createElement("li",Object.assign({role:i?null:"menuitem",tabIndex:i?-1:O},K,{style:c,ref:this.setItemRef,className:p,onClick:this.handleClick,onMouseEnter:g,onMouseLeave:y,onKeyPress:this.handleKeyPress},this.getDataAttr(this.props)),L)}return(_&&!f&&!i||_&&i&&N)&&($=this.wrapTooltip($)),typeof this.context.renderWrapper=="function"?this.context.renderWrapper({itemElement:$,isSubNav:i,isInSubNav:f,props:this.props}):$}}Q.contextType=J;Q.propTypes={text:o.oneOfType([o.string,o.node]),itemKey:o.oneOfType([o.string,o.number]),onClick:o.func,onMouseEnter:o.func,onMouseLeave:o.func,icon:o.oneOfType([o.node]),className:o.string,toggleIcon:o.string,style:o.object,forwardRef:o.func,indent:o.oneOfType([o.bool,o.number]),isCollapsed:o.bool,isSubNav:o.bool,link:o.string,linkOptions:o.object,disabled:o.bool,tabIndex:o.number};Q.defaultProps={isSubNav:!1,indent:!1,forwardRef:F,isCollapsed:!1,onClick:F,onMouseEnter:F,onMouseLeave:F,disabled:!1,tabIndex:0};class ne extends pe{constructor(e){super(e),this.setItemRef=t=>{t&&t.current?this.itemRef=t:this.itemRef={current:t}},this.setTitleRef=t=>{t&&t.current?this.titleRef=t:this.titleRef={current:t}},this.handleClick=t=>{this.foundation.handleClick(t&&t.nativeEvent,this.titleRef&&this.titleRef.current)},this.handleKeyPress=t=>{this.foundation.handleKeyPress(t&&t.nativeEvent,this.titleRef&&this.titleRef.current)},this.handleDropdownVisible=t=>this.foundation.handleDropdownVisibleChange(t),this.state={isHovered:!1},this.adapter.setCache("firstMounted",!0),this.titleRef=m.createRef(),this.itemRef=m.createRef(),this.foundation=new Kt(this.adapter)}_invokeContextFunc(e){if(e&&this.context&&typeof this.context[e]=="function"){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];return this.context[e](...s)}return null}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{updateIsHovered:t=>this.setState({isHovered:t}),getOpenKeys:()=>this.context&&this.context.openKeys,getOpenKeysIsControlled:()=>this.context&&this.context.openKeysIsControlled,getCanUpdateOpenKeys:()=>this.context&&this.context.canUpdateOpenKeys,updateOpen:t=>this._invokeContextFunc(t?"addOpenKeys":"removeOpenKeys",this.props.itemKey),notifyGlobalOpenChange:function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return e._invokeContextFunc("onOpenChange",...s)},notifyGlobalOnSelect:function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return e._invokeContextFunc("onSelect",...s)},notifyGlobalOnClick:function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return e._invokeContextFunc("onClick",...s)},getIsSelected:t=>!!(!Z(t)&&te(this.context,"selectedKeys",[]).includes(String(t))),getIsOpen:()=>(this.props,!!(this.context&&this.context.openKeys&&this.context.openKeys.includes(this.props.itemKey)))})}renderIcon(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;const{prefixCls:i}=this.context;let c="large";t===I.ICON_POS_RIGHT&&(c="default");const h=M(`${i}-item-icon`,{[`${i}-item-icon-toggle-${this.context.toggleIconPosition}`]:n,[`${i}-item-icon-info`]:!n}),g=this.adapter.getIsOpen(),y=m.isValidElement(e)?s?m.createElement(Be,{animationState:g?"enter":"leave",startClassName:`${k.PREFIX}-icon-rotate-${g?"180":"0"}`},u=>{let{animationClassName:A}=u;return m.cloneElement(e,{size:c,className:A})}):m.cloneElement(e,{size:c}):null;return m.createElement("i",{key:a,className:h},y)}renderTitleDiv(){const{text:e,icon:t,itemKey:s,indent:n,disabled:a,level:i,expandIcon:c}=this.props,{mode:h,isInSubNav:g,isCollapsed:y,prefixCls:u,subNavMotion:A,limitIndent:N}=this.context,E=this.adapter.getIsOpen(),O=M(`${u}-sub-title`,{[`${u}-sub-title-selected`]:this.adapter.getIsSelected(s),[`${u}-sub-title-disabled`]:a});let C=!1,f="";y?g?f=m.createElement(fe,null):f=null:h===I.MODE_HORIZONTAL?g?f=m.createElement(fe,{"aria-hidden":!0}):f=c||m.createElement(Ce,{"aria-hidden":!0}):(A&&(C=!0),f=c||m.createElement(Ce,{"aria-hidden":!0}));let b=null;if(h===I.MODE_VERTICAL&&!N&&!y){const D=t&&!n?i:i-1;b=Le(D,L=>this.renderIcon(null,I.ICON_POS_RIGHT,!1,!1,L))}const P=!y&&g&&h===I.MODE_HORIZONTAL||y&&g;return m.createElement("div",{role:"menuitem",tabIndex:P?-1:0,ref:this.setTitleRef,className:O,onClick:this.handleClick,onKeyPress:this.handleKeyPress,"aria-expanded":E?"true":"false"},m.createElement("div",{className:`${u}-item-inner`},b,this.context.toggleIconPosition===I.TOGGLE_ICON_LEFT&&this.renderIcon(f,I.ICON_POS_RIGHT,C,!0,"key-toggle-position-left"),t||n||g&&h!==I.MODE_HORIZONTAL?this.renderIcon(t,I.ICON_POS_LEFT,!1,!1,"key-inSubNav-position-left"):null,m.createElement("span",{className:`${u}-item-text`},e),this.context.toggleIconPosition===I.TOGGLE_ICON_RIGHT&&this.renderIcon(f,I.ICON_POS_RIGHT,C,!0,"key-toggle-position-right")))}renderSubUl(){const{children:e,maxHeight:t}=this.props,{isCollapsed:s,mode:n,subNavMotion:a,prefixCls:i}=this.context,c=this.adapter.getIsOpen(),h=n===I.MODE_HORIZONTAL,g=M(`${i}-sub`,{[`${i}-sub-open`]:c,[`${i}-sub-popover`]:s||h});return h?null:a?m.createElement(nt,{motion:a,isOpen:c,keepDOM:!1,fade:!0},s?null:m.createElement("ul",{className:g},e)):c&&!s?m.createElement("ul",{className:g},e):null}wrapDropdown(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{children:s,dropdownStyle:n,disabled:a,subDropdownProps:i,dropdownProps:c}=this.props,{mode:h,isInSubNav:g,isCollapsed:y,subNavCloseDelay:u,subNavOpenDelay:A,prefixCls:N,getPopupContainer:E}=this.context,O=this.adapter.getIsOpen(),C=this.adapter.getOpenKeysIsControlled(),f=M({[`${N}-popover`]:y}),b={trigger:"hover",style:n};return C&&(b.trigger="custom",b.visible=O),E&&(b.getPopupContainer=E),(y||h===I.MODE_HORIZONTAL)&&(t=a?t:m.createElement(H,Object.assign({className:f,render:m.createElement(H.Menu,null,s),position:h===I.MODE_HORIZONTAL&&!g?"bottomLeft":"rightTop",mouseEnterDelay:A,mouseLeaveDelay:u,onVisibleChange:this.handleDropdownVisible},c||i,b),t)),t}render(){const{itemKey:e,style:t,onMouseEnter:s,onMouseLeave:n,disabled:a,text:i}=this.props,{mode:c,isCollapsed:h,prefixCls:g}=this.context;let y=this.renderTitleDiv();const u=this.renderSubUl();return(h||c===I.MODE_HORIZONTAL)&&(y=this.wrapDropdown(y)),m.createElement(Q,{style:t,isSubNav:!0,itemKey:e,forwardRef:this.setItemRef,isCollapsed:h,className:`${g}-sub-wrap`,onMouseEnter:s,onMouseLeave:n,disabled:a,text:i},m.createElement(J.Provider,{value:Object.assign(Object.assign({},this.context),{isInSubNav:!0})},y,u))}}ne.contextType=J;ne.propTypes={itemKey:o.oneOfType([o.string,o.number]),text:o.oneOfType([o.string,o.node]),isOpen:o.bool,isCollapsed:o.bool,indent:o.oneOfType([o.bool,o.number]),children:o.node,style:o.object,icon:o.node,maxHeight:o.number,onMouseEnter:o.func,onMouseLeave:o.func,disabled:o.bool,level:o.number};ne.defaultProps={level:0,indent:!1,isCollapsed:!1,isOpen:!1,maxHeight:Y.DEFAULT_SUBNAV_MAX_HEIGHT,disabled:!1};function Et(r){let{prefixCls:e,locale:t,collapseText:s,isCollapsed:n,onClick:a=F}=r;const i=()=>{typeof a=="function"&&a(!n)},c={icon:m.createElement(it,null),type:"tertiary",theme:"borderless",onClick:i};let h=n?t==null?void 0:t.expandText:t==null?void 0:t.collapseText;return typeof s=="function"&&(h=s(n)),m.createElement("div",{className:`${e}-collapse-btn`},n?m.createElement(he,{content:h,position:"right"},m.createElement(W,Object.assign({},c))):m.createElement(W,Object.assign({},c),h))}class U extends v.PureComponent{constructor(){super(...arguments),this.renderCollapseButton=()=>{const{collapseButton:e,collapseText:t}=this.props;if(m.isValidElement(e))return e;const{onCollapseChange:s,prefixCls:n,locale:a,isCollapsed:i}=this.context;return l(Et,{prefixCls:n,isCollapsed:i,locale:a,onClick:s,collapseText:t})}}render(){const{style:e,className:t,collapseButton:s,onClick:n}=this.props;let{children:a}=this.props;const{isCollapsed:i,mode:c}=this.context;!m.isValidElement(a)&&s&&c!==I.MODE_HORIZONTAL&&(a=this.renderCollapseButton());const h=M(t,`${k.PREFIX}-footer`,{[`${k.PREFIX}-footer-collapsed`]:i});return l("div",{className:h,style:e,onClick:n,children:a})}}U.contextType=J;U.propTypes={children:o.node,style:o.object,className:o.string,collapseButton:o.oneOfType([o.node,o.bool]),collapseText:o.func,onClick:o.func};U.defaultProps={collapseButton:!1,onClick:F};U.elementType="NavFooter";class V extends v.PureComponent{renderLogo(e){return m.isValidElement(e)?e:null}render(){const{children:e,style:t,className:s,logo:n,text:a,link:i,linkOptions:c,prefixCls:h}=this.props,{isCollapsed:g}=this.context,y=M(s,`${k.PREFIX}-header`,{[`${k.PREFIX}-header-collapsed`]:g});let u=x(ue,{children:[n?l("i",{className:`${k.PREFIX}-header-logo`,children:this.renderLogo(n)}):null,!Z(a)&&!g?l("span",{className:`${k.PREFIX}-header-text`,children:a}):null,e]});return typeof i=="string"&&(u=l("a",{...Object.assign({className:`${h}-header-link`,href:i},c),children:u})),l("div",{className:y,style:t,children:u})}}V.contextType=J;V.propTypes={prefixCls:o.string,logo:o.oneOfType([o.string,o.object,o.node]),text:o.oneOfType([o.string,o.node]),children:o.node,style:o.object,className:o.string,link:o.string,linkOptions:o.object};V.defaultProps={prefixCls:k.PREFIX};V.elementType="NavHeader";var Tt=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};function Ne(r,e){return function(){const s=new Set(r.state[e]);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];a.forEach(c=>c&&s.add(c)),r.setState({[e]:Array.from(s)})}}function Ae(r,e){return function(){const s=new Set(r.state[e]);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];a.forEach(c=>c&&s.delete(c)),r.setState({[e]:Array.from(s)})}}const{hasOwnProperty:xt}=Object.prototype;class R extends pe{constructor(e){super(e),this.onCollapseChange=()=>{this.foundation.handleCollapseChange()},this.foundation=new q(this.adapter),this.itemsChanged=!0;const{isCollapsed:t,defaultIsCollapsed:s,items:n,children:a}=e,i={isCollapsed:!!(this.isControlled("isCollapsed")?t:s),openKeys:[],items:[],itemKeysMap:{},selectedKeys:[]};if(this.state=Object.assign({},i),n&&n.length||a){const c=this.foundation.init("constructor");this.state=Object.assign(Object.assign({},i),c)}}static getDerivedStateFromProps(e,t){const s={};return xt.call(e,"isCollapsed")&&e.isCollapsed!==t.isCollapsed&&(s.isCollapsed=e.isCollapsed),s}componentDidMount(){}componentDidUpdate(e){if(e.items!==this.props.items||e.children!==this.props.children)this.foundation.init();else{if(this.foundation.handleItemsChange(!1),this.props.selectedKeys&&!ge(e.selectedKeys,this.props.selectedKeys)){this.adapter.updateSelectedKeys(this.props.selectedKeys);const t=this.foundation.getWillOpenKeys(this.state.itemKeysMap);this.adapter.updateOpenKeys(t)}this.props.openKeys&&!ge(e.openKeys,this.props.openKeys)&&this.adapter.updateOpenKeys(this.props.openKeys)}}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{notifySelect:function(){return e.props.onSelect(...arguments)},notifyOpenChange:function(){return e.props.onOpenChange(...arguments)},setIsCollapsed:t=>this.setState({isCollapsed:t}),notifyCollapseChange:function(){return e.props.onCollapseChange(...arguments)},updateItems:t=>this.setState({items:[...t]}),setItemKeysMap:t=>this.setState({itemKeysMap:Object.assign({},t)}),addSelectedKeys:Ne(this,"selectedKeys"),removeSelectedKeys:Ae(this,"selectedKeys"),updateSelectedKeys:function(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=t;if(s){const a=e.foundation.selectLevelZeroParentKeys(null,t);n=Array.from(new Set(t.concat(a)))}e.setState({selectedKeys:n})},updateOpenKeys:t=>this.setState({openKeys:[...t]}),addOpenKeys:Ne(this,"openKeys"),removeOpenKeys:Ae(this,"openKeys"),setItemsChanged:t=>{this.itemsChanged=t}})}renderItems(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const{expandIcon:s,subDropdownProps:n}=this.props;return l(ue,{children:e.map((i,c)=>Array.isArray(i.items)&&i.items.length?l(ne,{...Object.assign({key:i.itemKey||String(t)+c},i,{level:t,expandIcon:s,subDropdownProps:n}),children:this.renderItems(i.items,t+1)}):l(Q,{...Object.assign({key:i.itemKey||String(t)+c},i,{level:t})}))})}render(){const e=this.props,{children:t,mode:s,onOpenChange:n,onSelect:a,onClick:i,style:c,className:h,subNavCloseDelay:g,subNavOpenDelay:y,subNavMotion:u,tooltipShowDelay:A,tooltipHideDelay:N,prefixCls:E,bodyStyle:O,footer:C,header:f,toggleIconPosition:b,limitIndent:P,renderWrapper:_,getPopupContainer:D}=e,L=Tt(e,["children","mode","onOpenChange","onSelect","onClick","style","className","subNavCloseDelay","subNavOpenDelay","subNavMotion","tooltipShowDelay","tooltipHideDelay","prefixCls","bodyStyle","footer","header","toggleIconPosition","limitIndent","renderWrapper","getPopupContainer"]),{selectedKeys:B,openKeys:$,items:p,isCollapsed:K}=this.state,{updateOpenKeys:T,addOpenKeys:d,removeOpenKeys:S,updateSelectedKeys:le,addSelectedKeys:ke,removeSelectedKeys:Re}=this.adapter,Fe=Object.assign({},c);let j=v.Children.toArray(t);const ie=[],oe=[];if(m.isValidElement(C)?ie.push(l(U,{children:C},0)):C&&typeof C=="object"&&ie.push(l(U,{...Object.assign({key:0},C)})),m.isValidElement(f)?oe.push(l(V,{children:f},0)):f&&typeof f=="object"&&oe.push(l(V,{...Object.assign({key:0},f)})),Array.isArray(j)&&j.length){j=[...j];let ee=j.length;for(let z=0;z<ee;z++){const X=j[z];X.type===U||te(X,"type.elementType")==="NavFooter"?(ie.push(X),j.splice(z,1),z--,ee--):(X.type===V||te(X,"type.elementType")==="NavHeader")&&(oe.push(X),j.splice(z,1),z--,ee--)}}const je=M(E,h,{[`${E}-collapsed`]:K,[`${E}-horizontal`]:s==="horizontal",[`${E}-vertical`]:s==="vertical"}),He=M(`${E}-header-list-outer`,{[`${E}-header-list-outer-collapsed`]:K});return this.itemsChanged&&this.adapter.setCache("itemElems",this.renderItems(p)),l(ze,{componentName:"Navigation",children:ee=>l(J.Provider,{value:{subNavCloseDelay:g,subNavOpenDelay:y,subNavMotion:u,tooltipShowDelay:A,tooltipHideDelay:N,openKeys:$,openKeysIsControlled:this.isControlled("openKeys")&&s==="vertical"&&!K,canUpdateOpenKeys:!0,selectedKeys:B,selectedKeysIsControlled:this.isControlled("selectedKeys"),isCollapsed:K,onCollapseChange:this.onCollapseChange,mode:s,onSelect:a,onOpenChange:n,updateOpenKeys:T,addOpenKeys:d,removeOpenKeys:S,updateSelectedKeys:le,addSelectedKeys:ke,removeSelectedKeys:Re,onClick:i,locale:ee,prefixCls:E,toggleIconPosition:b,limitIndent:P,renderWrapper:_,getPopupContainer:D},children:l("div",{...Object.assign({className:je,style:Fe},this.getDataAttr(L)),children:x("div",{className:`${E}-inner`,children:[x("div",{className:He,children:[oe,l("div",{style:O,className:`${E}-list-wrapper`,children:x("ul",{role:"menu","aria-orientation":s,className:`${E}-list`,children:[this.adapter.getCache("itemElems"),j]})})]}),ie]})})})})}}R.Sub=ne;R.Item=Q;R.Header=V;R.Footer=U;R.propTypes={collapseIcon:o.node,defaultOpenKeys:o.arrayOf(o.oneOfType([o.string,o.number])),openKeys:o.arrayOf(o.oneOfType([o.string,o.number])),defaultSelectedKeys:o.arrayOf(o.oneOfType([o.string,o.number])),expandIcon:o.node,selectedKeys:o.arrayOf(o.oneOfType([o.string,o.number])),mode:o.oneOf([...I.MODE]),onSelect:o.func,onClick:o.func,onOpenChange:o.func,items:o.array,isCollapsed:o.bool,defaultIsCollapsed:o.bool,onCollapseChange:o.func,multiple:o.bool,onDeselect:o.func,subNavMotion:o.oneOfType([o.bool,o.object,o.func]),subNavCloseDelay:o.number,subNavOpenDelay:o.number,tooltipShowDelay:o.number,tooltipHideDelay:o.number,children:o.node,style:o.object,bodyStyle:o.object,className:o.string,toggleIconPosition:o.string,prefixCls:o.string,header:o.oneOfType([o.node,o.object]),footer:o.oneOfType([o.node,o.object]),limitIndent:o.bool,getPopupContainer:o.func};R.__SemiComponentName__="Navigation";R.defaultProps=Ze(R.__SemiComponentName__,{subNavCloseDelay:Y.DEFAULT_SUBNAV_CLOSE_DELAY,subNavOpenDelay:Y.DEFAULT_SUBNAV_OPEN_DELAY,tooltipHideDelay:Y.DEFAULT_TOOLTIP_HIDE_DELAY,tooltipShowDelay:Y.DEFAULT_TOOLTIP_SHOW_DELAY,onCollapseChange:F,onSelect:F,onClick:F,onOpenChange:F,toggleIconPosition:"right",limitIndent:!0,prefixCls:k.PREFIX,subNavMotion:!0,mode:I.MODE_VERTICAL});const Nt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API_URL:"",VITE_APP_MODE:"pro",VITE_APP_PAGESIZE:"15",VITE_APP_SAVE_REMOVE:"true",VITE_APP_TITLE:"vlife快速研发平台",VITE_APP_VERSION:"free"},At="",{Header:Pt}=se,{VITE_APP_API_URL:Dt}=Nt,Pe="free";function $e(r){return r?typeof r=="string"?l("div",{className:"h-full flex items-center",children:l(lt,{readPretty:!0,value:r})}):r.render():null}const wt=()=>{const{loginOut:r,user:e,setApp:t,app:s,menu:n,setMenu:a,datasInit:i,sysVar:c}=we(),h=_e(),g=me(),{pathname:y}=g,[u,A]=v.useState(),N=v.useCallback(()=>{ht().then(O=>{var b;const C=[...new Set(e==null?void 0:e.menus.map(P=>P.sysAppId))],f=(b=O.data)==null?void 0:b.filter(P=>(e==null?void 0:e.superUser)||C.includes(P.id)).sort((P,_)=>P.sort-_.sort);A(f)})},[e==null?void 0:e.menus.map(O=>O.sysAppId).join("")]);v.useEffect(()=>{N()},[e==null?void 0:e.menus.map(O=>O.sysAppId).join("")]),v.useEffect(()=>{var O,C;if(!n&&!s&&u&&u.length>0){if(y==="/"||y==="")t(u[0]);else if(y){let f=(C=(O=e==null?void 0:e.menus)==null?void 0:O.filter(b=>b.url===y||y.endsWith(b.id)))==null?void 0:C[0];f!==void 0?(t(u==null?void 0:u.find(b=>b.id===(f==null?void 0:f.sysAppId))),a(f)):t(u[0])}}},[y,u]);const E=v.useMemo(()=>(u==null?void 0:u.map(C=>({itemKey:C.id,icon:$e(C.icon),onClick:()=>{C.id!==(s==null?void 0:s.id)&&(a(void 0),t(C))},text:x("div",{className:`${M({" text-blue-500 ":(s==null?void 0:s.id)===C.id})} z-10 flex !items-center relative  hover:text-blue-500 `,children:[l("span",{children:C.name}),(e==null?void 0:e.superUser)&&l("div",{className:"!z-20",onClick:f=>{f.cancelable=!0,f.stopPropagation()},children:l(Me,{dropdown:!0,onDataChange:()=>{i("menu")},btns:[{title:"编辑应用",saveApi:ut,model:"sysApp",actionType:"edit",reaction:dt,submitClose:!0,datas:C,onSubmitFinish:()=>{N()}},{title:"删除应用",saveApi:mt,actionType:"api",multiple:!0,datas:C,usableMatch:f=>(e==null?void 0:e.menus.filter(b=>{var P;return b.sysAppId===((P=f==null?void 0:f[0])==null?void 0:P.id)}).length)>0?"应用下有模块不能删除":!0,onSubmitFinish:()=>{N()}}]},`app_${C.id}`)})]},`app_${C.id}`)})))||[],[u,y,s]);return v.useEffect(()=>{console.log("-------------------------------"),console.log(`------vlife2.0.1(${Pe})------`),console.log("-------------------------------")},[Pe]),v.useState(!0),l(Pt,{className:"layout-header shadow",children:l(R,{mode:"horizontal",header:l("div",{className:" flex !items-center cursor-pointer ",onClick:()=>{},style:{width:160,height:30,top:10},children:c!=null&&c.icon?l("img",{src:At+"/sysFile/image/"+c.icon,style:{width:160,height:40,top:10}}):l(Xe,{className:" relative top-3  mr-4",image:l("img",{src:st,style:{width:160,height:40,top:10}})})}),selectedKeys:[(s==null?void 0:s.id)||""],items:E,footer:x(ue,{children:[(e==null?void 0:e.superUser)&&x("div",{className:"flex",children:[l(gt,{id:"homePage"}),l(ae,{theme:"solid",id:"step1",className:" h-full items-center   ",title:"创建应用",tooltip:"新增一个平台应用",icon:l("i",{className:"  icon-task_add-02"}),actionType:"create",model:"sysApp",allowEmpty:!0,submitClose:!0,saveApi:ft,reaction:[G.then("appKey").description(O=>O.appKey&&`服务端代码将创建在cn.vlife.${O.appKey}包下`),G.then("sort").value(((u==null?void 0:u.length)||0)+1)],onSubmitFinish:(...O)=>{t(O[0]),A(C=>[...C||[],O[0]]),i("menu"),v.startTransition(()=>{h(`/modelDesign/detail?appId=${O[0].id}`,{state:{from:g.pathname}})})}},`createApp_${y}`),l(W,{theme:"borderless",color:"primary",id:"step2",onClick:()=>{v.startTransition(()=>{h(`/modelDesign/detail?appId=${s==null?void 0:s.id}`,{state:{from:g.pathname}})})},icon:l("i",{className:"icon-settings text-xl text-indigo-500"}),children:"模型管理"}),l(W,{theme:"borderless",className:"2xl:!block !hidden",style:{color:"var(--semi-color-text-2)"},onClick:()=>{h("/vlife/common/iconContainer")},icon:l("i",{className:"icon-descending-order2 text-xl"}),children:"图标库"}),l(ct,{}),l(W,{theme:"borderless",className:"2xl:!block !hidden",icon:l(ot,{size:"large"}),style:{color:"var(--semi-color-text-2)",marginRight:"12px"},onClick:()=>{window.open("http://vlife.cc")},children:"官网"}),l(W,{theme:"borderless",className:"2xl:!block !hidden",icon:l(at,{size:"large"}),style:{color:"var(--semi-color-text-2)",marginRight:"12px"},onClick:()=>{window.open("https://gitee.com/wwwlike/vlife")},children:"GITEE"})]}),l("div",{className:" m-2 !text-sm !text-blue-300 font-medium cursor-pointer",onClick:()=>{window.open("http://vlife.cc")},children:"vlife基础版"}),l(H,{position:"bottomLeft",render:x(H.Menu,{children:[x(H.Item,{onClick:r,children:[l("i",{className:"  icon-exit_to_app mr-2"}),l("span",{children:"退出登录"})]}),x(H.Item,{children:[l("i",{className:"  icon-limit-othermember mr-2"}),l(ae,{btnType:"link",loadApi:We,model:"sysUserDto",actionType:"edit",reaction:[G.then("name","username","sysDeptId","sysUserGroup_sysGroupId").readPretty(),G.then("superUser","state").hide()],datas:{id:e==null?void 0:e.id},allowEmpty:!0,saveApi:Ye,title:"基本信息"})]}),x(H.Item,{children:[l("i",{className:"  icon-password mr-2"}),l(ae,{btnType:"link",datas:{id:e==null?void 0:e.id},model:"userPasswordModifyDto",actionType:"edit",submitClose:!0,saveApi:qe,onSubmitFinish:O=>{r()},title:"密码修改"})]})]}),children:e!=null&&e.avatar?l(be,{alt:"beautiful cat",size:"small",src:`${Dt}/sysFile/image/${e==null?void 0:e.avatar}`,style:{margin:4}}):l(be,{color:"orange",size:"small",children:e==null?void 0:e.name[0]})})]})})})},{Sider:_t}=se,Lt=()=>{var L,B,$;const{user:r,app:e,setMenu:t,menu:s,datasInit:n,allModels:a}=we(),i=_e(),{getModel:c}=bt({sysAppId:e==null?void 0:e.id}),{pathname:h}=me(),[g,y]=v.useState([]),[u,A]=v.useState([]),[N,E]=v.useState(window.innerHeight),[O,C]=v.useState({}),f=20,b=v.useMemo(()=>{var K,T;const p=((K=r==null?void 0:r.menus.filter(d=>!!d.url))==null?void 0:K.slice(0,f).map(d=>d.id))||[];return r!=null&&r.menus&&e?(T=r.menus)==null?void 0:T.filter(d=>(d==null?void 0:d.sysAppId)===e.id).filter(d=>!d.url||d.sys===!0||p.includes(d.id)):[]},[r==null?void 0:r.menus,e]);v.useEffect(()=>{b.filter(p=>p.pageType==="crudPage").forEach(p=>{c({id:p.formId}).then(K=>{C(T=>({...T,[p.formId]:K==null?void 0:K.state}))})})},[b]),v.useEffect(()=>{if((!s||!b.find(p=>p.id===s.id))&&b&&e){const p=pt(b,e.id);p?(t(p),i(p==null?void 0:p.url)):i("/appStart")}},[s,b]);const P=v.useCallback(p=>{var K;if(p.selectedItems&&((K=p.selectedItems[0])!=null&&K.path)){const T=p.selectedItems[0].id,d=r==null?void 0:r.menus.find(S=>S.id===T);t(d),A([T]),p.selectedItems[0].path.indexOf("design")&&v.startTransition(()=>{i(p.selectedItems[0].path,{state:{from:location.pathname}})})}},[r==null?void 0:r.menus]),_=p=>{y([...p.openKeys])};v.useEffect(()=>{s&&(!u||u.length===0||!u.includes(s.id))&&A([s==null?void 0:s.id]),y(b.filter(p=>!p.url).map(p=>p.id))},[s,u,r==null?void 0:r.menus,b,e==null?void 0:e.id]);const D=v.useMemo(()=>{const p=(K,T)=>b.sort((d,S)=>d.sort-S.sort).filter(d=>d.pcode===(T?null:K==null?void 0:K.code)).map(d=>({id:d.id,itemKey:d.id,isLocked:!!d.pageType,text:r!=null&&r.superUser?x("div",{className:" group z-10 flex items-center relative w-28",children:[x("div",{className:"z-10 flex  w-full  items-center ",children:[l("div",{className:"flex items-center ",children:d.name}),d.pageType==="crudPage"&&O[d.formId]!=="published"&&l(he,{content:"可以访问，正常使用需重启服务",children:l("i",{className:" icon-replay flex items-center absolute right-6  text-red-500"})})]}),x("div",{className:"flex absolute items-center right-0 !z-20 ",onClick:S=>{S.cancelable=!0,S.stopPropagation()},children:[l(Me,{dropdown:!0,datas:[d],className:M({"hidden group-hover:block":!u.includes(d.id)}),btns:[{title:(d==null?void 0:d.pageType)==="crudPage"?"编辑菜单":"访问授权",icon:l(Ie,{size:"small",className:"z-20"}),actionType:"edit",disabledHide:!0,reaction:[G.field("pageType").eq("chartPage").then("formId").hide(),G.field("pageType").ne("chartPage").then("groupIds").hide()],disabled:d.pageType!=="crudPage"&&d.pageType!=="chartPage",model:"menuCrudDto",saveApi:re,onSubmitFinish:(...S)=>{n("menu")}},{title:"看板设计",icon:l("i",{className:"  icon-shareLink"}),actionType:"click",disabledHide:!0,disabled:d.pageType!=="chartPage",onClick:()=>{v.startTransition(()=>{i(`/chartDesign?pageLayoutId=${d.pageLayoutId}`,{state:{from:location.pathname}})})}},{title:"模型设计",icon:l("i",{className:"  icon-shareLink"}),actionType:"click",disabledHide:!0,disabled:d.pageType!=="crudPage",onClick:()=>{v.startTransition(()=>{i(`/modelDesign/detail?appId=${e==null?void 0:e.id}&modelId=${d.formId}&tabActiveKey=dto`,{state:{from:location.pathname}})})}},{title:"表单设计",icon:l("i",{className:"  icon-construction"}),actionType:"click",disabledHide:!0,disabled:d.pageType!=="crudPage",onClick:()=>{i(`/full/formDesign/${d.formId}`)}},{title:"编辑分组",icon:l(Ie,{size:"small",className:"z-20"}),actionType:"edit",disabledHide:!0,disabled:!(!d.pcode&&!d.url&&d.pageType!=="crudPage"&&d.pageType!=="chartPage"),model:"menuGroupDto",saveApi:ve,onSubmitFinish:(...S)=>{n("menu")}},{title:d.url?"删除菜单":"删除分组",actionType:"api",icon:l(rt,{size:"small",className:"z-20"}),saveApi:(...S)=>yt([d.id]),submitConfirm:!0,onSubmitFinish:(...S)=>{n("menu").then(()=>{t(void 0)})},usableMatch:()=>{var S;return d.sys===!0?"系统级菜单不允许删除":((S=r.menus)==null?void 0:S.filter(le=>le.pcode===d.code).length)>0?"分组下有菜单不能删除":!0}}]},d.id+JSON.stringify(u)),!d.pcode&&!d.url&&l(ae,{title:"添加子菜单",btnType:"icon",icon:l("i",{className:"  icon-task_add-02"}),actionType:"modal",modal:l(Oe,{pcode:d.code,appId:T==null?void 0:T.id}),saveApi:re,submitClose:!0,onSubmitFinish:S=>{n("btn"),n("menu").then(()=>{A([S.data.id]),t(S.data),S.data.pageType==="crudPage"?i(`/table/${S.data.id}`):S.data.pageType==="chartPage"?i(`/chart/${S.data.id}`):i(`${S.data.url}`)})}},d.id+h)]})]},d.id):l("div",{onClick:()=>{t(d)},children:d.name},d.id),code:d.code,icon:d.icon?$e(d.icon):null,path:d.url&&d.url.endsWith("*")?d.url.substring(0,d.url.length-1)+d.id:d.url,items:p(d,null)}));return e&&b?p(null,e):[]},[b,e,u,r==null?void 0:r.menus,h,O]);return v.useEffect(()=>{const p=()=>{E(window.innerHeight)};return window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}},[]),l(_t,{children:l(R,{toggleIconPosition:r!=null&&r.superUser?"left":"right",bodyStyle:{height:`${N-110}px`},className:"!overflow-y-auto relative  !z-10  ",items:D&&D.length>0?D:[],openKeys:g&&g.length>0?g:[(L=D==null?void 0:D[0])==null?void 0:L.id],selectedKeys:u,onSelect:P,onOpenChange:_,style:{maxWidth:220,height:"100%"},onCollapseChange:p=>{},children:l(R.Footer,{collapseButton:!0,className:" !absolute !bottom-0   items-center justify-between  flex  w-full",children:(e==null?void 0:e.id)&&(r==null?void 0:r.superUser)&&x("div",{className:" flex group flex-col items-center  w-full  h-full  justify-center",children:[l(Ct,{className:`
                   grid-cols-2 grid gap-y-2
                  `,btns:[{icon:l("i",{className:"icon-add_circle"}),title:"建模",theme:"solid",actionType:"create",model:"form",submitClose:!0,reaction:[G.then("sysAppId").value(e==null?void 0:e.id).readPretty(),G.then("itemType").value("entity")],onSaveBefore:p=>(p.type=ye(p.type),p.entityType=ye(p.type),p),disabledHide:!0,saveApi:It,onSubmitFinish:p=>{v.startTransition(()=>{i(`/modelDesign/entity?appId=${e==null?void 0:e.id}&modelId=${p.id}`,{state:{from:location.pathname}})})}},{title:"菜单",icon:l("i",{className:"  icon-task_add-02"}),actionType:"modal",id:"step3",modal:l(Oe,{appId:e.id}),disabled:((B=r==null?void 0:r.menus)==null?void 0:B.filter(p=>!!p.url).length)>f,disabledTooltip:"已到达菜单数量上限,升级到标准版以上无限制",saveApi:re,submitClose:!0,onSubmitFinish:p=>{n("btn").then(()=>{n("menu").then(()=>{t(p.data),p.data.pageType==="crudPage"?i(`/table/${p.data.id}`):p.data.pageType==="chartPage"?i(`/chart/${p.data.id}`):i(`${p.data.url}`)})})}},{icon:l("i",{className:"icon-add_circle"}),title:"分组",model:"menuGroupDto",saveApi:ve,actionType:"create",disabledTooltip:"请先创建菜单项",initData:{sysAppId:e.id},submitClose:!0,onSubmitFinish:()=>{n("menu")}},{title:"排序",disabled:b.length<=1,allowEmpty:!0,icon:l("i",{className:" text-blue-500 icon-task-folder-slide-sort text-sm"}),actionType:"click",onClick:()=>{i("/vlife/sysMenu")}}]}),x("div",{className:" absolute -top-4 text-xs group-hover:block hidden text-red-400",children:["还可创",f-(($=r==null?void 0:r.menus)==null?void 0:$.filter(p=>!!p.url).length),"个菜单，升级后无限制"]})]},e==null?void 0:e.id)})})})},{Content:Mt}=se,es=()=>{const{pathname:r}=me(),e=r.includes("/full/");return x(se,{className:"layout-page",children:[!e&&l(wt,{}),x(se,{children:[!e&&l(Lt,{}),l(Mt,{className:"layout-content bg-gray-50",children:l(v.Suspense,{fallback:l(Je,{message:"正在加载中"}),children:l(Qe,{})})})]}),l(et,{}),l(tt,{}),l(Ot,{})]})};export{es as default};
