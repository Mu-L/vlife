import{u as c,s as a}from"./GroupLabel-CFJ4I-sR.js";import{d as f}from"./SysApp-DRxQSclV.js";import{o as p,k as s,aq as v,v as r}from"./index-zu87m18r.js";import{V as I}from"./index-D84rZFL3.js";import{V as n}from"./VF-CFm92MRs.js";const C=({app:t,reactions:m,id:l,btnType:i="icon"})=>{const{refeshModel:d}=c(),u=p();return s(I,{id:l,tooltip:"新建实体(数据库表)模型",actionType:"create",model:"form",title:"新建模型",btnColor:"danger",btnType:i,icon:i==="icon"?s("i",{className:"   icon-add-member2 text-gray-500 text-3xl cursor-pointer hover:text-blue-500"}):s("i",{className:"   icon-add-member2"}),submitClose:!0,reaction:[n.result(e=>e&&e.sysAppId?f({id:e.sysAppId}).then(y=>{var o;return((o=y.data)==null?void 0:o.appKey)==="sys"}):Promise.resolve(!1)).then("sysAppId").feedback("平台管理不支持创建模型表，请选择其他应用"),n.then("sysAppId").default(t==null?void 0:t.id),...m||[]],onSaveBefore:e=>(e.itemType=v.entity,e.type=r(e.type),e.entityType=r(e.entityType||e.type),e),saveApi:a,onSubmitFinish:e=>{e&&(d(e.id),u(`/modelDesign/entity?appId=${t==null?void 0:t.id}&modelId=${e.id}`))}})};export{C};
