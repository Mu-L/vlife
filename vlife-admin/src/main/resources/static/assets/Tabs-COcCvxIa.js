import{r as o,l as T,k as i,f as se,T as he,j as Ie,a1 as C,y as Se,u as ce,Y as me,F as $e,aG as _e,aD as re,aH as Ce,aI as Te,aJ as Pe,ae as je,aK as Ee,aL as We,aM as ke}from"./index-zu87m18r.js";import{n as Oe,P as Re,I as Ve,d as ae,V as Fe,T as ze}from"./formPage-D0LEgB12.js";import{b as xe,d as Ae}from"./BtnToolBar-eoxdJY99.js";import{c as Be,u as Ke,g as ge}from"./useEffectWithTarget-Dhumc1Cp.js";import{b as He}from"./isBrowser-DDdYk2YE.js";import{z as ye,D as Ne,R as Ge,l as oe,p as Le,S as de,B as Ue,E as Je,i as Ye,T as ve}from"./index-D84rZFL3.js";import{G as be}from"./GroupButton-DUTfCbto.js";import{V as Qe}from"./VF-CFm92MRs.js";import{u as Xe}from"./GroupLabel-CFJ4I-sR.js";import{F as Ze}from"./index-DA-42-7E.js";function De(r){var e=o.useRef(0),p=xe(o.useState(r),2),c=p[0],l=p[1],d=o.useCallback(function(N){cancelAnimationFrame(e.current),e.current=requestAnimationFrame(function(){l(N)})},[]);return Ae(function(){cancelAnimationFrame(e.current)}),[c,d]}var qe=Be(o.useLayoutEffect),Me=He?qe:Ke;function we(r){var e=xe(De(function(){var l=ge(r);return l?{width:l.clientWidth,height:l.clientHeight}:void 0}),2),p=e[0],c=e[1];return Me(function(){var l=ge(r);if(l){var d=new Oe(function(N){N.forEach(function(s){var g=s.target,h=g.clientWidth,u=g.clientHeight;c({width:h,height:u})})});return d.observe(l),function(){d.disconnect()}}},[],r),p}const et=({className:r,pageSize:e,currentPage:p,total:c,max:l,onPageSizeChange:d,onPageChange:N})=>{const s=[15,30,50],g=o.useMemo(()=>l===void 0||l===-1||l>(c||0)?c||0:l,[c,l]);return T("div",{className:`${r} flex  items-center`,children:[T("div",{className:" text-gray-500 pl-4 ",children:["共",c||0,"条"]}),i(Re,{pageSize:e,total:g,currentPage:p,onPageChange:N,onPageSizeChange:N}),i("div",{className:"flex-1 text-red-500 !text-sm font-light text-center ",children:!!l&&l!==-1&&l<c&&`数据量达到显示上限(${l}条)，升级版本后无限制`}),T("div",{className:"text-gray-500 space-x-2 items-center pr-4 flex ",children:[s.map(h=>i("span",{onClick:()=>{d(h)},className:` ml-1 border  rounded hover:bg-slate-200 hover:cursor-pointer p-1 ${se({" bg-slate-100 text-blue-500 font-bold":h===e," font-normal":h!==e})}`,children:h},h)),"条记录"]})]})},le=({onDataChange:r,className:e,tooltip:p,value:c,onChange:l,fieldType:d="string",hideBtn:N=!1,placeholder:s="按Enter键搜索"})=>{const[g,h]=o.useState(!1),[u,n]=o.useState(c),m=o.useRef(null),x=o.useCallback(()=>{h(!0),setTimeout(()=>{m.current&&m.current.focus()},0)},[m]),y=()=>{u===""&&h(!1)},b=A=>{A.key==="Enter"&&r(u)},z=o.useCallback(A=>{n(A),l&&l(A)},[l]),F=o.useMemo(()=>i(d==="string"?Ze:Ve,{className:se({hidden:!g}),ref:m,prefix:d==="string"?i(ye,{}):void 0,value:u,onChange:z,onBlur:y,onKeyPress:b,placeholder:s}),[m,u,z,y,l,b]);return i("div",{className:`${e} cursor-pointer`,id:"tooltip-container",children:g||N?p?i(he,{content:p,visible:g,children:F}):F:i(Ie,{theme:"borderless",className:se({hidden:!g}),onClick:x,icon:i(ye,{}),block:!0,children:"搜索"})})},tt=({field:r,where:e=[],className:p,entityName:c,onChange:l,option:d})=>{var m,x,y,b,z,F,A,E,w,L,Z,ee,G,Y,U,$,D;const[N,s]=o.useState(),[g,h]=o.useState(),u=(f,P,O)=>{var q,Q;return[...(O==null?void 0:O.filter(X=>X.opt!==P))||[],{fieldId:r.id,fieldName:r.x_component==="RelationInput"||r.x_component==="TreeSelect"?(Q=(q=r.pageComponentPropDtos)==null?void 0:q.find(X=>X.propName==="labelField"))==null?void 0:Q.propVal:r.x_component==="UserSelect"?"name":r.fieldName,entityName:r.entityType!==c?r.entityType:void 0,opt:P,fieldType:r.fieldType,value:f instanceof Array?f:[f]}]},n=o.useCallback((f,P)=>{if(f){let O=u(f,P,e);P===C.goe&&g&&(O=u(g,C.loe,O)),P===C.loe&&N&&(O=u(N,C.goe,O)),l(O)}else l([...(e==null?void 0:e.filter(O=>O.opt!==P))||[]])},[r,e,c,g,N]);return T("div",{className:`${p} flex-grow px-4 pt-6`,children:[r.fieldType==="string"&&r.x_component!=="DictSelect"&&r.x_component!=="DictRadio"&&r.x_component!=="DictCheckbox"&&r.x_component!=="VfImage"&&i(le,{className:"border-b pb-2 border-dashed border-gray-300 mb-2",hideBtn:!0,value:(y=(x=(m=e==null?void 0:e.filter(f=>f.opt==="like"))==null?void 0:m[0])==null?void 0:x.value)==null?void 0:y[0],onDataChange:f=>{n(f,C.like)}}),r.fieldType==="number"&&T("div",{className:"flex items-center space-x-1 justify-center border-b pb-2 border-dashed border-gray-300 mb-2",children:[i(le,{fieldType:r.fieldType,placeholder:"最小值",value:(F=(z=(b=e==null?void 0:e.filter(f=>f.opt==="goe"))==null?void 0:b[0])==null?void 0:z.value)==null?void 0:F[0],hideBtn:!0,onChange:s,onDataChange:f=>{n(f,C.goe)}}),i("span",{children:"~"}),i(le,{fieldType:r.fieldType,placeholder:"最大值",onChange:h,value:(w=(E=(A=e==null?void 0:e.filter(f=>f.opt==="loe"))==null?void 0:A[1])==null?void 0:E.value)==null?void 0:w[0],hideBtn:!0,onDataChange:f=>{n(f,C.loe)}})]}),r.fieldType==="date"&&T("div",{className:"flex items-center space-x-1 justify-center border-b pb-2 border-dashed border-gray-300 mb-2",children:[i(Ne,{format:"yyyy/MM/dd",placeholder:"最小日期",value:(Z=(L=e==null?void 0:e.filter(f=>f.opt==="goe"))==null?void 0:L[0])==null?void 0:Z.value,onChange:(f,P)=>{n(P,C.goe)}}),i("span",{children:"~"}),i(Ne,{format:"yyyy/MM/dd",value:(G=(ee=e==null?void 0:e.filter(f=>f.opt==="loe"))==null?void 0:ee[0])==null?void 0:G.value,placeholder:"最大日期",onChange:(f,P)=>{n(P,C.loe)}})]}),T(Ge,{className:" border-b pb-2 border-dashed border-gray-300 mb-2",direction:"vertical",value:(U=(Y=e==null?void 0:e.filter(f=>f.opt==="isNull"||f.opt==="isNotNull"))==null?void 0:Y[0])==null?void 0:U.opt,onChange:f=>{f.target.value&&f.target.value.length>0?l([...(e==null?void 0:e.filter(P=>P.opt!=="isNull"&&P.opt!=="isNotNull"))||[],{fieldId:r.id,fieldName:r.fieldName,fieldType:r.fieldType,opt:f.target.value}]):l([...(e==null?void 0:e.filter(P=>P.opt!=="isNull"&&P.opt!=="isNotNull"))||[]])},children:[i(oe,{children:"全部"}),i(oe,{value:"isNotNull",children:"已填写"}),i(oe,{value:"isNull",children:"未填写"})]}),d&&i(Le,{options:d,value:(D=($=e==null?void 0:e.filter(f=>f.opt==="in"))==null?void 0:$[0])==null?void 0:D.value,onChange:f=>{n(f,C.in)}})]})},nt=({field:r,onSort:e,where:p,onFilter:c,option:l,entityName:d})=>{var u,n,m;const[N,s]=o.useState(!1),[g,h]=o.useState("desc");return T("div",{className:"flex w-full  items-center  ",children:[T("div",{onMouseOver:()=>{s(!0)},onMouseOut:()=>{s(!1)},onClick:()=>{e&&(e({fieldName:r.fieldName,sort:g}),h(g==="desc"?"asc":"desc"))},className:"flex justify-center items-center w-full hover:bg-gray-200 hover:cursor-pointer p-1  rounded-sm ",children:[N===!1&&((u=ae[r.x_component])==null?void 0:u.icon)&&i(de,{size:"small",readPretty:!0,value:(n=ae[r.x_component])==null?void 0:n.icon}),N===!0&&((m=ae[r.x_component])==null?void 0:m.icon)&&i(Ue,{}),i("div",{className:" pl-1 text-black font-bold rounded",children:r.title})]}),i("div",{className:"w-4",children:i(Se,{position:"bottom",spacing:20,trigger:"click",content:i(tt,{entityName:d,option:l,className:" p-2 w-72 rounded-md shadow-md bg-white",field:r,where:p,onChange:x=>{c&&c(x)}}),children:i(Je,{className:"hover:cursor-pointer",size:"small"})})})]})},rt=({where:r,order:e,formVo:p,onOrderRemove:c,onConditionRemove:l,...d})=>{var h;const{dicts:N}=ce(),s=o.useCallback(u=>p.fields.filter(n=>n.fieldName===u.fieldName)[0].title+"："+(u.sort==="asc"?"升序":"降序"),[p]),g=o.useCallback(u=>u.title+"："+r.filter(n=>n.fieldId===u.id).filter(n=>n.opt===C.isNull||n.opt===C.isNotNull||(n==null?void 0:n.value)&&(n==null?void 0:n.value.length)>0).map(n=>{var m,x,y;return n.opt===C.isNull?"未填写":n.opt===C.isNotNull?"已填写":u.dictCode?N[u.dictCode].data.filter(b=>{var z;return n.value===b.value||((z=n==null?void 0:n.value)==null?void 0:z.includes(b.value))}).map(b=>b.label).toString():n.opt===C.loe&&r.map(b=>b.opt).includes(C.goe)||n.opt===C.goe&&r.map(b=>b.opt).includes(C.loe)?n.opt===C.loe?void 0:`${r.filter(b=>b.opt===C.goe)[0].value}~${r.filter(b=>b.opt===C.loe)[0].value}`:u.fieldType==="boolean"?((m=n==null?void 0:n.value)==null?void 0:m.length)===1?n.value[0]===!0?"是":"否":((x=n==null?void 0:n.value)==null?void 0:x.length)===2?"是,否":"":(y=n==null?void 0:n.value)==null?void 0:y[0]}).filter(n=>n!=null).join(","),[p,r]);return e.length>0||r.length>0?T(Ye,{className:`${d.className} whitespace-nowrap`,style:d.style,children:[e==null?void 0:e.map((u,n)=>T("div",{className:" bg-gray-100 hover:bg-gray-200 p-1 rounded h-full items-center flex text-xs  text-gray-500\r hover:text-gray-600\r ",children:[i("div",{className:"",children:`${s(u)}`}),i(me,{size:"small",className:"ml-2 cursor-pointer",onClick:()=>{c(e.filter((m,x)=>x!==n))}})]},`order${u.fieldName}`)),(h=p.fields)==null?void 0:h.filter(u=>r.map(n=>n.fieldId).includes(u.id)).filter(u=>g(u)!==u.title+"：").map((u,n)=>T("div",{className:" bg-gray-100 hover:bg-gray-200 p-1 rounded h-full items-center flex text-xs  text-gray-500\r hover:text-gray-600\r ",children:[i("div",{children:`${g(u)}`}),i(me,{size:"small",className:"ml-2 hover:cursor-pointer",onClick:()=>{l(u.id)}})]},`condition${u.id}`))]}):i($e,{})},it=new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}),at=({onLineClick:r,className:e,width:p,model:c,dataSource:l,fkMap:d,parentMap:N,orders:s,select_more:g,read:h=!1,ignores:u=[],onSelected:n,dicts:m,onColumnFilter:x,selected:y,checkedBottomShow:b,onColumnSort:z,onFieldClick:F,outSelectedColumn:A,btns:E,maxHeight:w,activeKey:L,pagination:Z,flowFormType:ee,queryFunc:G,columnSortFieldNames:Y,mainFormDto:U,wheres:$=[],...D})=>{const[f,P]=o.useState();o.useEffect(()=>{P(l)},[l]);const O=o.useMemo(()=>180,[E]),q=o.useCallback(v=>{var k,M;if(U&&U[v])return(M=(k=U[v].fields.filter(te=>te.fieldName==="name"||te.fieldName==="title"))==null?void 0:k[0])==null?void 0:M.fieldName},[U]),[Q,X]=o.useState();o.useEffect(()=>{A&&X(A)},[A]);const B=o.useMemo(()=>{const v=[];if(c&&c.fields){let k=[];!Y||Y.length===0?k=c.fields.filter(t=>!u.includes(t.fieldName)&&t.fieldName!=="id"&&t.x_component!=="VfEditor"&&t.dataType!=="array").sort((t,K)=>t.sort-K.sort):k=Y.map(t=>c.fields.find(K=>K.fieldName===t));const M=O,te={string:150,boolean:150,number:150,date:150},ue=p-M-100,fe=k.filter(t=>t&&t.fieldName).map(t=>te[t.fieldType]).reduce((t,K)=>t+K,0);let pe=0;return fe<ue&&(pe=(ue-fe)/k.length),k.filter(t=>!!t).forEach(t=>{var K;v.push({...t,title:i(nt,{entityName:c.entityType,option:t.x_component==="DictSelect"||t.x_component==="DictRadio"||t.x_component==="DictCheckbox"?(K=m[`${t.entityType}_${t.fieldName}`])==null?void 0:K.data:t.fieldType==="boolean"?[{label:"是",value:!0},{label:"否",value:!1}]:[],field:t,where:$==null?void 0:$.filter(R=>R.fieldId===t.id),onFilter:R=>{x&&x(R?[...$==null?void 0:$.filter(a=>a.fieldId!==t.id),...R]:$==null?void 0:$.filter(a=>a.fieldId!==t.id))},onSort:R=>{z(_e(s||[],R))}}),width:te[t.fieldType]+pe,dataIndex:t.fieldName,align:t.listAlign?t.listAlign:"center",className:`${Q===t.fieldName?"bg-blue-200":""} `})}),v==null||v.forEach((t,K)=>{var R;if(t.ellipsis=!0,t.x_component==="DictSelect"||t.x_component==="DictRadio"||t.x_component==="DictCheckbox")t.render=(a,_,V)=>a?a.split(",").map((W,S)=>{var J,H;const I=(H=(J=m[`${t.dictCode||t.entityType+"_"+t.fieldName}`])==null?void 0:J.data)==null?void 0:H.find(ne=>ne.value===W);return I&&I.color?i(ve,{className:`${I.color} !text-white mr-2`,children:I==null?void 0:I.label},`${V}_${S}_${I.value}`):I?i(ve,{className:" mr-2",children:I==null?void 0:I.label},`${V}_${S}_${I.value}`):"-"}):"-";else if(t.x_component==="RelationInput"||t.x_component==="UserInput"||t.x_component==="VfTreeInput"&&((R=t.fieldName)!=null&&R.endsWith("Id")))t.render=(a,_,V)=>(d==null?void 0:d[a])||a;else if(t.x_component==="M2MSelectInput")t.render=(a,_,V)=>((a==null?void 0:a.map(W=>d==null?void 0:d[W]))||[]).join(",");else if(t.x_component==="InputMoney")t.render=(a,_,V)=>{var W,S,I;return a?(I=(S=(W=ae.InputMoney)==null?void 0:W.props)==null?void 0:S.formatter)==null?void 0:I.call(S,a):""};else if(t.x_component==="DatePicker")t.render=(a,_,V)=>{var S,I;const W=(I=(S=t.pageComponentPropDtos)==null?void 0:S.find(J=>J.propName==="type"))==null?void 0:I.propVal;return a?W==="month"?re(a,"yyyy/MM"):W==="dateTime"?re(a,"yyyy/MM/dd HH:mm:ss"):re(a,"yyyy/MM/dd"):""};else if(t.dictCode){const a=t.dictCode;t.render=(_,V,W)=>{var S,I,J;if(_===""||_===null||_===void 0)return"-";{const H=(J=(I=(S=m[a||"vlife"])==null?void 0:S.data)==null?void 0:I.filter(ne=>ne.value+""==_+""))==null?void 0:J[0];return H&&H.color?i("span",{className:`text-white  text-xs ${se({[`bg-${H.color}-500`]:H.color!==void 0})} px-3 py-1 font-bold  rounded-lg`,children:H.label}):H?H.label:_}}}else t.fieldType==="boolean"?t.render=(a,_,V)=>a===null?"-":a?"是":"否":t.entityFieldName==="id"&&d?t.render=(a,_,V)=>{if(a){const W=S=>{var J,H;const I=q((J=c.fields.find(ne=>ne.fieldName===t.dataIndex))==null?void 0:J.entityType);return I?(H=d==null?void 0:d[S])==null?void 0:H[I]:T("div",{className:" flex items-center space-x-2",children:[i(he,{content:"需配置外外键字段所在表的标签字段",children:i(Pe,{className:" text-red-500"})}),i("div",{children:"配置"})]})};return a.indexOf(",")===-1?F&&t.dataIndex&&F[t==null?void 0:t.dataIndex]?i("div",{className:"hover:underline text-blue-600 cursor-pointer",onClick:S=>{S.stopPropagation(),t.entityFieldName==="id"&&d?F[t.dataIndex||""](d[a]):F[t.dataIndex||""](_)},children:W(a)}):W(a):a.split(",").map(S=>i("span",{className:"text-blue-600 cursor-pointer mr-1",children:W(S)},S))}}:t.fieldName==="pcode"&&N?t.render=(a,_,V)=>N[a]:t.fieldType==="date"?t.render=(a,_,V)=>{if(typeof a=="number")return re(a,"yyyy/MM/dd");if(a){var W=new Date(a);return re(W,"yyyy/MM/dd")}}:Ce.includes(t.fieldType)?t.render=(a,_,V)=>t.money?it.format(a):a:t.safeStr&&(t.render=(a,_,V)=>Te(a))}),v==null||v.forEach((t,K)=>{t.x_component==="VfImage"?t.render=(R,a,_)=>i(Fe,{size:"small",value:R,readPretty:!0,onChange:()=>{}},`index${_}`):t.x_component==="SelectIcon"&&(t.render=(R,a,_)=>i(de,{value:R,readPretty:!0},`index${_}`))}),h!==!0&&E.length!==0&&(v==null||v.push({title:"操作",align:"center",fixed:"right",fieldName:"operate",width:O,render:(t,K,R)=>i(be,{more:!0,className:" flex items-center justify-center",entity:c.entityType,dataType:c.type,position:"tableLine",line:R,btnType:"link",activeKey:L,btns:[...E.map(a=>({...a,model:a.model||c.type,reaction:[...a.reaction||[],Qe.result((_,V)=>{var W;return((W=V==null?void 0:V.fields)==null?void 0:W.find(S=>S.fieldName===`${c.entityType}Id`))!==void 0}).then(`${c.entityType}Id`).value(K.id).readPretty()]}))],datas:[{...K,tableSort:R}],...D,onDataChange:a=>{a!==void 0&&typeof a=="object"?G==null||G():G&&G()}},`lineBtn_${R}`)})),v}return[]},[c,p,d,N,E,f,h,s,Y,$,Q,O,U]),j=o.useMemo(()=>(v,k)=>({style:k%2===1?{background:"#f9fafc"}:{},onClick:M=>{r==null||r(v)}}),[c,r]),ie=o.useMemo(()=>({disabled:!g,fixed:!0,width:50,selectedRowKeys:y==null?void 0:y.map((v,k)=>v.id),onSelect:(v,k)=>{g==!1&&k==!0&&n&&n([v])},onChange:(v,k)=>{g&&k&&(n==null||n([...k.map(M=>M)]))}}),[y]);return T("div",{className:`${e} flex flex-col `,children:[i(rt,{className:" h-7 items-center flex ml-2 my-1",formVo:c,onOrderRemove:v=>{z(v)},order:s||[],where:$||[],onConditionRemove:v=>{x($.filter(k=>k.fieldId!==v))}}),i(ze,{className:" w-full flex-1  ",scroll:{y:w},resizable:!0,size:"middle",style:{display:"block",overflow:"auto"},bordered:!0,rowKey:"id",dataSource:f,columns:B,onRow:j,rowSelection:h===!0||g===void 0?void 0:ie,pagination:Z||!1,...D})]})},lt="15",vt=({className:r,tableModel:e,req:p,ignores:c,onLineClick:l,onFieldClick:d,btns:N,sysTabDto:s})=>{var X;const{dicts:g,menu:h,setTableData:u,tableData:n}=ce(),{getModel:m}=Xe(),x=o.useRef(null),y=we(x),[b,z]=o.useState(1),[F,A]=o.useState(Number(lt)),[E,w]=o.useState(),[L,Z]=o.useState([]),[ee,G]=o.useState(),[Y,U]=o.useState(),[$,D]=o.useState([]),[f,P]=o.useState(),O=o.useMemo(()=>y!=null&&y.height?(y==null?void 0:y.height)-100:400,[y]),q=o.useMemo(()=>$&&$.length>0?{...p,conditions:p!=null&&p.conditions?{...p.conditions,where:[...p.conditions.where||[],...$]}:{orAnd:"and",where:$}}:p,[$,p]),Q=o.useMemo(()=>{if(e!=null&&e.type&&e.state&&(e.state==="published"||e.state==="restart")){const{type:B}=e;return j=>je.post(`/${B}/page`,j)}},[e==null?void 0:e.type,e==null?void 0:e.state]);return o.useEffect(()=>{const B={order:{orders:L&&L.length>0?Ee(L):s!=null&&s.orderFieldName?`${s==null?void 0:s.orderFieldName}_${(s==null?void 0:s.orderDirection)||"desc"}`:""},pager:{size:F,page:b},...q,tabId:s==null?void 0:s.id};Q&&Q(B).then(j=>{j.data&&(j.data.totalPage!==0&&j.data.totalPage<b&&z(j.data.totalPage),w(j.data))})},[e==null?void 0:e.type,L,F,b,n.loadDataFlag,JSON.stringify(q),s==null?void 0:s.id,Q]),o.useEffect(()=>{if(e&&E){f||e.fields.filter(j=>j.entityType!==e.entityType&&j.entityFieldName==="id").forEach(j=>{m({type:j.entityType}).then(ie=>{ie&&P(v=>({...v,[j.entityType]:ie}))})});const B=async j=>{G(await We(j,e,m)),U(await ke(j,e))};E.result&&E.result.length>0&&B(E.result)}else G({})},[E,e]),T("div",{ref:x,className:`${r} relative h-full flex flex-col text-sm    `,children:[e&&!!ee&&(y==null?void 0:y.width)&&i(at,{className:"flex-1 flex ",queryFunc:()=>{u(B=>({...B,loadDataFlag:B.loadDataFlag+1}))},model:e,dataSource:(E==null?void 0:E.result)||[],fkMap:ee,parentMap:Y,maxHeight:O,width:y.width,ignores:c,onFieldClick:d,dicts:g,onColumnSort:Z,orders:L,wheres:$,onColumnFilter:D,selected:n.selected,onSelected:B=>{u(j=>({...j,selected:B}))},columnSortFieldNames:((X=s==null?void 0:s.fieldNames)==null?void 0:X.split(","))||[],btns:l?[]:N||[],select_more:!0,onLineClick:l,mainFormDto:f},e.type+F+b+(h==null?void 0:h.id)),(e==null?void 0:e.state)!=="published"&&i("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-red-300 font-medium",children:"当前可预览，数据接口需要重启服务后则能正常使用"}),i(et,{className:"z-30 bottom-0 absolute w-full font-bold h-12 bg-white border-t border-gray-100",total:E==null?void 0:E.total,pageSize:F,currentPage:b,max:1e4,onPageChange:z,onPageSizeChange:A})]})},ht=({className:r,leftBtns:e,rightBtns:p,tableModel:c,onSearchChange:l,searchFields:d,children:N})=>{const{tableData:s,setTableData:g}=ce(),[h,u]=o.useState([]);o.useState(!1),o.useEffect(()=>{u(c.fields||[])},[c]);const n=o.useMemo(()=>{var m;return(m=c.fields)==null?void 0:m.filter(x=>x.fieldType==="string"&&(d==null?void 0:d.includes(x.fieldName)))},[c,d]);return T("div",{className:`${r}  flex`,children:[i("div",{className:"flex items-center justify-between px-2 bg-white rounded-t-xl w-full",children:T("div",{className:"flex  h-full items-center",children:[N,e,n&&n.length>0&&i(le,{className:" flex ml-2  ",tooltip:`根据进行${n.map(m=>m.title).join(",")}查询`,onDataChange:m=>{if(m&&m!==""){const x=n.map(y=>({fieldName:y.fieldName,opt:C.like,value:[m]}));l==null||l({orAnd:"or",where:x,conditions:[]})}else l==null||l(void 0)}})]})}),i("div",{className:"flex  h-full items-center mr-2",children:i(be,{position:"tableToolbar",activeKey:s.tabActiveKey,btns:(p||[]).map(m=>({...m,onSubmitFinish:m.onSubmitFinish||(x=>{g(y=>({...y,selected:[],loadDataFlag:y.loadDataFlag+1}))})})),datas:s==null?void 0:s.selected})})]})};function st(r){return r?typeof r=="string"?i(de,{readPretty:!0,value:r}):r.render():null}const xt=r=>{const{tabs:e,className:p,activeKey:c,onTabChange:l,children:d,tabBtn:N}=r;return T("div",{className:`${p} flex h-10 bg-white`,children:[i("div",{className:" w-4 border-b border-gray-300"}),e==null?void 0:e.map((s,g)=>g===0&&!c||c===s.key?T("div",{className:" px-2 flex cursor-pointer justify-center items-center  border-gray-300 rounded-t-md border-l border-r border-t bg-slate-50",children:[s.icon?st(s.icon):i("i",{className:"  icon-subtable text-green-500  icon-table font-thin"}),T("span",{className:"font-bold text-sm px-1",children:[" ",s.name]}),N]},s.key):T("div",{onClick:()=>l==null?void 0:l(s.key),className:" text-gray-500 hover:bg-slate-100 cursor-pointer px-2 flex justify-center items-center text-sm  rounded-t-md border-b order-gray-300",children:[i("i",{className:"  icon-subtable  icon-table font-thin "}),T("span",{className:"font-thin",children:[" ",s.name]})]},s.key)),d&&i("div",{className:" flex border-b border-gray-300 flex-1 items-center justify-start pl-1",children:d})]})};export{xt as T,vt as a,ht as b,we as u};
