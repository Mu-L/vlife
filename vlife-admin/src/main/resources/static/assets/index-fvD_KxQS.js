import{r as P,l as U,F as ce,k as x,c as xt,f as Qe,o as Fa,j as wn,v as Mo,$ as Wa}from"./index-zu87m18r.js";import{u as Ie,s as Zr,G as Ft,d as Ga,r as qa,e as Qa}from"./GroupLabel-CFJ4I-sR.js";import{V as Me}from"./VF-CFm92MRs.js";import{S as _o}from"./SelectedPanel-BLkn-adF.js";import{V as mt,p as Ja,n as es}from"./index-D84rZFL3.js";import{C as ko}from"./CreateEntityBtn-BEVeCO4b.js";import{d as ts}from"./SysApp-DRxQSclV.js";import{u as ns}from"./index-BmfRL-y0.js";import"./index-DA-42-7E.js";import"./index-D_2oZ5Sg.js";function os(e){let t;const n=new Set,o=(u,c)=>{const d=typeof u=="function"?u(t):u;if(d!==t){const f=t;t=c?d:Object.assign({},t,d),n.forEach(h=>h(t,f))}},r=()=>t,i=(u,c=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=c(t);function h(){const g=c(t);if(!d(f,g)){const p=f;u(f=g,p)}}return n.add(h),()=>n.delete(h)},l={setState:o,getState:r,subscribe:(u,c,d)=>c||d?i(u,c,d):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return t=e(o,r,l),l}const rs=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Do=rs?P.useEffect:P.useLayoutEffect;function is(e){const t=typeof e=="function"?os(e):e,n=(o=t.getState,r=Object.is)=>{const[,i]=P.useReducer(w=>w+1,0),a=t.getState(),s=P.useRef(a),l=P.useRef(o),u=P.useRef(r),c=P.useRef(!1),d=P.useRef();d.current===void 0&&(d.current=o(a));let f,h=!1;(s.current!==a||l.current!==o||u.current!==r||c.current)&&(f=o(a),h=!r(d.current,f)),Do(()=>{h&&(d.current=f),s.current=a,l.current=o,u.current=r,c.current=!1});const g=P.useRef(a);Do(()=>{const w=()=>{try{const N=t.getState(),C=l.current(N);u.current(d.current,C)||(s.current=N,d.current=C,i())}catch{c.current=!0,i()}},y=t.subscribe(w);return t.getState()!==g.current&&w(),y},[]);const p=h?f:d.current;return P.useDebugValue(p),p};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const o=[n,t];return{next(){const r=o.length<=0;return{value:o.shift(),done:r}}}},n}function as(){const e=P.createContext(void 0);return{Provider:({initialStore:r,createStore:i,children:a})=>{const s=P.useRef();return s.current||(r&&(console.warn("Provider initialStore is deprecated and will be removed in the next version."),i||(i=()=>r)),s.current=i()),P.createElement(e.Provider,{value:s.current},a)},useStore:(r,i=Object.is)=>{const a=P.useContext(e);if(!a)throw new Error("Seems like you have not used zustand provider as an ancestor.");return a(r,i)},useStoreApi:()=>{const r=P.useContext(e);if(!r)throw new Error("Seems like you have not used zustand provider as an ancestor.");return P.useMemo(()=>({getState:r.getState,setState:r.setState,subscribe:r.subscribe,destroy:r.destroy}),[r])}}}var ss={value:()=>{}};function cn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Wt(n)}function Wt(e){this._=e}function ls(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Wt.prototype=cn.prototype={constructor:Wt,on:function(e,t){var n=this._,o=ls(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=cs(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=$o(n[r],e.name,t);else if(t==null)for(r in n)n[r]=$o(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Wt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function cs(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function $o(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=ss,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Hn="http://www.w3.org/1999/xhtml";const Ao={svg:"http://www.w3.org/2000/svg",xhtml:Hn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function un(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ao.hasOwnProperty(t)?{space:Ao[t],local:e}:e}function us(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Hn&&t.documentElement.namespaceURI===Hn?t.createElement(e):t.createElementNS(n,e)}}function ds(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ur(e){var t=un(e);return(t.local?ds:us)(t)}function fs(){}function no(e){return e==null?fs:function(){return this.querySelector(e)}}function hs(e){typeof e!="function"&&(e=no(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=new Array(a),l,u,c=0;c<a;++c)(l=i[c])&&(u=e.call(l,l.__data__,c,i))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new se(o,this._parents)}function gs(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function vs(){return[]}function Kr(e){return e==null?vs:function(){return this.querySelectorAll(e)}}function ps(e){return function(){return gs(e.apply(this,arguments))}}function ms(e){typeof e=="function"?e=ps(e):e=Kr(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(o.push(e.call(l,l.__data__,u,a)),r.push(l));return new se(o,r)}function Fr(e){return function(){return this.matches(e)}}function Wr(e){return function(t){return t.matches(e)}}var ys=Array.prototype.find;function bs(e){return function(){return ys.call(this.children,e)}}function ws(){return this.firstElementChild}function xs(e){return this.select(e==null?ws:bs(typeof e=="function"?e:Wr(e)))}var Ss=Array.prototype.filter;function Cs(){return Array.from(this.children)}function Os(e){return function(){return Ss.call(this.children,e)}}function Ns(e){return this.selectAll(e==null?Cs:Os(typeof e=="function"?e:Wr(e)))}function Es(e){typeof e!="function"&&(e=Fr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new se(o,this._parents)}function Gr(e){return new Array(e.length)}function Ps(){return new se(this._enter||this._groups.map(Gr),this._parents)}function Jt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Jt.prototype={constructor:Jt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ms(e){return function(){return e}}function _s(e,t,n,o,r,i){for(var a=0,s,l=t.length,u=i.length;a<u;++a)(s=t[a])?(s.__data__=i[a],o[a]=s):n[a]=new Jt(e,i[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function ks(e,t,n,o,r,i,a){var s,l,u=new Map,c=t.length,d=i.length,f=new Array(c),h;for(s=0;s<c;++s)(l=t[s])&&(f[s]=h=a.call(l,l.__data__,s,t)+"",u.has(h)?r[s]=l:u.set(h,l));for(s=0;s<d;++s)h=a.call(e,i[s],s,i)+"",(l=u.get(h))?(o[s]=l,l.__data__=i[s],u.delete(h)):n[s]=new Jt(e,i[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(r[s]=l)}function Ds(e){return e.__data__}function $s(e,t){if(!arguments.length)return Array.from(this,Ds);var n=t?ks:_s,o=this._parents,r=this._groups;typeof e!="function"&&(e=Ms(e));for(var i=r.length,a=new Array(i),s=new Array(i),l=new Array(i),u=0;u<i;++u){var c=o[u],d=r[u],f=d.length,h=As(e.call(c,c&&c.__data__,u,o)),g=h.length,p=s[u]=new Array(g),w=a[u]=new Array(g),y=l[u]=new Array(f);n(c,d,p,w,y,h,t);for(var N=0,C=0,v,b;N<g;++N)if(v=p[N]){for(N>=C&&(C=N+1);!(b=w[C])&&++C<g;);v._next=b||null}}return a=new se(a,o),a._enter=s,a._exit=l,a}function As(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ts(){return new se(this._exit||this._groups.map(Gr),this._parents)}function zs(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function Is(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),s=new Array(r),l=0;l<a;++l)for(var u=n[l],c=o[l],d=u.length,f=s[l]=new Array(d),h,g=0;g<d;++g)(h=u[g]||c[g])&&(f[g]=h);for(;l<r;++l)s[l]=n[l];return new se(s,this._parents)}function Bs(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function Rs(e){e||(e=js);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],s=a.length,l=r[i]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new se(r,this._parents).order()}function js(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Hs(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ls(){return Array.from(this)}function Xs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function Vs(){let e=0;for(const t of this)++e;return e}function Ys(){return!this.node()}function Zs(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,s;i<a;++i)(s=r[i])&&e.call(s,s.__data__,i,r);return this}function Us(e){return function(){this.removeAttribute(e)}}function Ks(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Fs(e,t){return function(){this.setAttribute(e,t)}}function Ws(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Gs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function qs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Qs(e,t){var n=un(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Ks:Us:typeof t=="function"?n.local?qs:Gs:n.local?Ws:Fs)(n,t))}function qr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Js(e){return function(){this.style.removeProperty(e)}}function el(e,t,n){return function(){this.style.setProperty(e,t,n)}}function tl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function nl(e,t,n){return arguments.length>1?this.each((t==null?Js:typeof t=="function"?tl:el)(e,t,n??"")):it(this.node(),e)}function it(e,t){return e.style.getPropertyValue(t)||qr(e).getComputedStyle(e,null).getPropertyValue(t)}function ol(e){return function(){delete this[e]}}function rl(e,t){return function(){this[e]=t}}function il(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function al(e,t){return arguments.length>1?this.each((t==null?ol:typeof t=="function"?il:rl)(e,t)):this.node()[e]}function Qr(e){return e.trim().split(/^|\s+/)}function oo(e){return e.classList||new Jr(e)}function Jr(e){this._node=e,this._names=Qr(e.getAttribute("class")||"")}Jr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ei(e,t){for(var n=oo(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function ti(e,t){for(var n=oo(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function sl(e){return function(){ei(this,e)}}function ll(e){return function(){ti(this,e)}}function cl(e,t){return function(){(t.apply(this,arguments)?ei:ti)(this,e)}}function ul(e,t){var n=Qr(e+"");if(arguments.length<2){for(var o=oo(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?cl:t?sl:ll)(n,t))}function dl(){this.textContent=""}function fl(e){return function(){this.textContent=e}}function hl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function gl(e){return arguments.length?this.each(e==null?dl:(typeof e=="function"?hl:fl)(e)):this.node().textContent}function vl(){this.innerHTML=""}function pl(e){return function(){this.innerHTML=e}}function ml(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function yl(e){return arguments.length?this.each(e==null?vl:(typeof e=="function"?ml:pl)(e)):this.node().innerHTML}function bl(){this.nextSibling&&this.parentNode.appendChild(this)}function wl(){return this.each(bl)}function xl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sl(){return this.each(xl)}function Cl(e){var t=typeof e=="function"?e:Ur(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ol(){return null}function Nl(e,t){var n=typeof e=="function"?e:Ur(e),o=t==null?Ol:typeof t=="function"?t:no(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function El(){var e=this.parentNode;e&&e.removeChild(this)}function Pl(){return this.each(El)}function Ml(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _l(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kl(e){return this.select(e?_l:Ml)}function Dl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function $l(e){return function(t){e.call(this,t,this.__data__)}}function Al(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Tl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function zl(e,t,n){return function(){var o=this.__on,r,i=$l(t);if(o){for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function Il(e,t,n){var o=Al(e+""),r,i=o.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(r=0,c=s[l];r<i;++r)if((a=o[r]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?zl:Tl,r=0;r<i;++r)this.each(s(o[r],t,n));return this}function ni(e,t,n){var o=qr(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Bl(e,t){return function(){return ni(this,e,t)}}function Rl(e,t){return function(){return ni(this,e,t.apply(this,arguments))}}function jl(e,t){return this.each((typeof t=="function"?Rl:Bl)(e,t))}function*Hl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var oi=[null];function se(e,t){this._groups=e,this._parents=t}function _t(){return new se([[document.documentElement]],oi)}function Ll(){return this}se.prototype=_t.prototype={constructor:se,select:hs,selectAll:ms,selectChild:xs,selectChildren:Ns,filter:Es,data:$s,enter:Ps,exit:Ts,join:zs,merge:Is,selection:Ll,order:Bs,sort:Rs,call:Hs,nodes:Ls,node:Xs,size:Vs,empty:Ys,each:Zs,attr:Qs,style:nl,property:al,classed:ul,text:gl,html:yl,raise:wl,lower:Sl,append:Cl,insert:Nl,remove:Pl,clone:kl,datum:Dl,on:Il,dispatch:jl,[Symbol.iterator]:Hl};function ue(e){return typeof e=="string"?new se([[document.querySelector(e)]],[document.documentElement]):new se([[e]],oi)}function Xl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function pe(e,t){if(e=Xl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Vl={passive:!1},Ct={capture:!0,passive:!1};function xn(e){e.stopImmediatePropagation()}function tt(e){e.preventDefault(),e.stopImmediatePropagation()}function ri(e){var t=e.document.documentElement,n=ue(e).on("dragstart.drag",tt,Ct);"onselectstart"in t?n.on("selectstart.drag",tt,Ct):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ii(e,t){var n=e.document.documentElement,o=ue(e).on("dragstart.drag",null);t&&(o.on("click.drag",tt,Ct),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Bt=e=>()=>e;function Ln(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Ln.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Yl(e){return!e.ctrlKey&&!e.button}function Zl(){return this.parentNode}function Ul(e,t){return t??{x:e.x,y:e.y}}function Kl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fl(){var e=Yl,t=Zl,n=Ul,o=Kl,r={},i=cn("start","drag","end"),a=0,s,l,u,c,d=0;function f(v){v.on("mousedown.drag",h).filter(o).on("touchstart.drag",w).on("touchmove.drag",y,Vl).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(v,b){if(!(c||!e.call(this,v,b))){var O=C(this,t.call(this,v,b),v,b,"mouse");O&&(ue(v.view).on("mousemove.drag",g,Ct).on("mouseup.drag",p,Ct),ri(v.view),xn(v),u=!1,s=v.clientX,l=v.clientY,O("start",v))}}function g(v){if(tt(v),!u){var b=v.clientX-s,O=v.clientY-l;u=b*b+O*O>d}r.mouse("drag",v)}function p(v){ue(v.view).on("mousemove.drag mouseup.drag",null),ii(v.view,u),tt(v),r.mouse("end",v)}function w(v,b){if(e.call(this,v,b)){var O=v.changedTouches,M=t.call(this,v,b),E=O.length,_,I;for(_=0;_<E;++_)(I=C(this,M,v,b,O[_].identifier,O[_]))&&(xn(v),I("start",v,O[_]))}}function y(v){var b=v.changedTouches,O=b.length,M,E;for(M=0;M<O;++M)(E=r[b[M].identifier])&&(tt(v),E("drag",v,b[M]))}function N(v){var b=v.changedTouches,O=b.length,M,E;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),M=0;M<O;++M)(E=r[b[M].identifier])&&(xn(v),E("end",v,b[M]))}function C(v,b,O,M,E,_){var I=i.copy(),z=pe(_||O,b),L,X,m;if((m=n.call(v,new Ln("beforestart",{sourceEvent:O,target:f,identifier:E,active:a,x:z[0],y:z[1],dx:0,dy:0,dispatch:I}),M))!=null)return L=m.x-z[0]||0,X=m.y-z[1]||0,function k(S,D,A){var $=z,T;switch(S){case"start":r[E]=k,T=a++;break;case"end":delete r[E],--a;case"drag":z=pe(A||D,b),T=a;break}I.call(S,v,new Ln(S,{sourceEvent:D,subject:m,target:f,identifier:E,active:T,x:z[0]+L,y:z[1]+X,dx:z[0]-$[0],dy:z[1]-$[1],dispatch:I}),M)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Bt(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:Bt(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Bt(v),f):n},f.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:Bt(!!v),f):o},f.on=function(){var v=i.on.apply(i,arguments);return v===i?f:v},f.clickDistance=function(v){return arguments.length?(d=(v=+v)*v,f):Math.sqrt(d)},f}function ro(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ai(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function kt(){}var Ot=.7,en=1/Ot,nt="\\s*([+-]?\\d+)\\s*",Nt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wl=/^#([0-9a-f]{3,8})$/,Gl=new RegExp(`^rgb\\(${nt},${nt},${nt}\\)$`),ql=new RegExp(`^rgb\\(${me},${me},${me}\\)$`),Ql=new RegExp(`^rgba\\(${nt},${nt},${nt},${Nt}\\)$`),Jl=new RegExp(`^rgba\\(${me},${me},${me},${Nt}\\)$`),ec=new RegExp(`^hsl\\(${Nt},${me},${me}\\)$`),tc=new RegExp(`^hsla\\(${Nt},${me},${me},${Nt}\\)$`),To={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ro(kt,Et,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zo,formatHex:zo,formatHex8:nc,formatHsl:oc,formatRgb:Io,toString:Io});function zo(){return this.rgb().formatHex()}function nc(){return this.rgb().formatHex8()}function oc(){return si(this).formatHsl()}function Io(){return this.rgb().formatRgb()}function Et(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Wl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Bo(t):n===3?new ie(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Rt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Rt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Gl.exec(e))?new ie(t[1],t[2],t[3],1):(t=ql.exec(e))?new ie(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ql.exec(e))?Rt(t[1],t[2],t[3],t[4]):(t=Jl.exec(e))?Rt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ec.exec(e))?Ho(t[1],t[2]/100,t[3]/100,1):(t=tc.exec(e))?Ho(t[1],t[2]/100,t[3]/100,t[4]):To.hasOwnProperty(e)?Bo(To[e]):e==="transparent"?new ie(NaN,NaN,NaN,0):null}function Bo(e){return new ie(e>>16&255,e>>8&255,e&255,1)}function Rt(e,t,n,o){return o<=0&&(e=t=n=NaN),new ie(e,t,n,o)}function rc(e){return e instanceof kt||(e=Et(e)),e?(e=e.rgb(),new ie(e.r,e.g,e.b,e.opacity)):new ie}function Xn(e,t,n,o){return arguments.length===1?rc(e):new ie(e,t,n,o??1)}function ie(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}ro(ie,Xn,ai(kt,{brighter(e){return e=e==null?en:Math.pow(en,e),new ie(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ot:Math.pow(Ot,e),new ie(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ie(Re(this.r),Re(this.g),Re(this.b),tn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ro,formatHex:Ro,formatHex8:ic,formatRgb:jo,toString:jo}));function Ro(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}`}function ic(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}${Be((isNaN(this.opacity)?1:this.opacity)*255)}`}function jo(){const e=tn(this.opacity);return`${e===1?"rgb(":"rgba("}${Re(this.r)}, ${Re(this.g)}, ${Re(this.b)}${e===1?")":`, ${e})`}`}function tn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Re(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Be(e){return e=Re(e),(e<16?"0":"")+e.toString(16)}function Ho(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new de(e,t,n,o)}function si(e){if(e instanceof de)return new de(e.h,e.s,e.l,e.opacity);if(e instanceof kt||(e=Et(e)),!e)return new de;if(e instanceof de)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,s=i-r,l=(i+r)/2;return s?(t===i?a=(n-o)/s+(n<o)*6:n===i?a=(o-t)/s+2:a=(t-n)/s+4,s/=l<.5?i+r:2-i-r,a*=60):s=l>0&&l<1?0:a,new de(a,s,l,e.opacity)}function ac(e,t,n,o){return arguments.length===1?si(e):new de(e,t,n,o??1)}function de(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}ro(de,ac,ai(kt,{brighter(e){return e=e==null?en:Math.pow(en,e),new de(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ot:Math.pow(Ot,e),new de(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new ie(Sn(e>=240?e-240:e+120,r,o),Sn(e,r,o),Sn(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new de(Lo(this.h),jt(this.s),jt(this.l),tn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tn(this.opacity);return`${e===1?"hsl(":"hsla("}${Lo(this.h)}, ${jt(this.s)*100}%, ${jt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Lo(e){return e=(e||0)%360,e<0?e+360:e}function jt(e){return Math.max(0,Math.min(1,e||0))}function Sn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const li=e=>()=>e;function sc(e,t){return function(n){return e+n*t}}function lc(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function cc(e){return(e=+e)==1?ci:function(t,n){return n-t?lc(t,n,e):li(isNaN(t)?n:t)}}function ci(e,t){var n=t-e;return n?sc(e,n):li(isNaN(e)?t:e)}const Xo=function e(t){var n=cc(t);function o(r,i){var a=n((r=Xn(r)).r,(i=Xn(i)).r),s=n(r.g,i.g),l=n(r.b,i.b),u=ci(r.opacity,i.opacity);return function(c){return r.r=a(c),r.g=s(c),r.b=l(c),r.opacity=u(c),r+""}}return o.gamma=e,o}(1);function _e(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Vn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cn=new RegExp(Vn.source,"g");function uc(e){return function(){return e}}function dc(e){return function(t){return e(t)+""}}function fc(e,t){var n=Vn.lastIndex=Cn.lastIndex=0,o,r,i,a=-1,s=[],l=[];for(e=e+"",t=t+"";(o=Vn.exec(e))&&(r=Cn.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(o=o[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:_e(o,r)})),n=Cn.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?dc(l[0].x):uc(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}var Vo=180/Math.PI,Yn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ui(e,t,n,o,r,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Vo,skewX:Math.atan(l)*Vo,scaleX:a,scaleY:s}}var Ht;function hc(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Yn:ui(t.a,t.b,t.c,t.d,t.e,t.f)}function gc(e){return e==null||(Ht||(Ht=document.createElementNS("http://www.w3.org/2000/svg","g")),Ht.setAttribute("transform",e),!(e=Ht.transform.baseVal.consolidate()))?Yn:(e=e.matrix,ui(e.a,e.b,e.c,e.d,e.e,e.f))}function di(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,c,d,f,h,g){if(u!==d||c!==f){var p=h.push("translate(",null,t,null,n);g.push({i:p-4,x:_e(u,d)},{i:p-2,x:_e(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:_e(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function s(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:_e(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function l(u,c,d,f,h,g){if(u!==d||c!==f){var p=h.push(r(h)+"scale(",null,",",null,")");g.push({i:p-4,x:_e(u,d)},{i:p-2,x:_e(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,f),a(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var g=-1,p=f.length,w;++g<p;)d[(w=f[g]).i]=w.x(h);return d.join("")}}}var vc=di(hc,"px, ","px)","deg)"),pc=di(gc,", ",")",")"),mc=1e-12;function Yo(e){return((e=Math.exp(e))+1/e)/2}function yc(e){return((e=Math.exp(e))-1/e)/2}function bc(e){return((e=Math.exp(2*e))-1)/(e+1)}const wc=function e(t,n,o){function r(i,a){var s=i[0],l=i[1],u=i[2],c=a[0],d=a[1],f=a[2],h=c-s,g=d-l,p=h*h+g*g,w,y;if(p<mc)y=Math.log(f/u)/t,w=function(M){return[s+M*h,l+M*g,u*Math.exp(t*M*y)]};else{var N=Math.sqrt(p),C=(f*f-u*u+o*p)/(2*u*n*N),v=(f*f-u*u-o*p)/(2*f*n*N),b=Math.log(Math.sqrt(C*C+1)-C),O=Math.log(Math.sqrt(v*v+1)-v);y=(O-b)/t,w=function(M){var E=M*y,_=Yo(b),I=u/(n*N)*(_*bc(t*E+b)-yc(b));return[s+I*h,l+I*g,u*_/Yo(t*E+b)]}}return w.duration=y*1e3*t/Math.SQRT2,w}return r.rho=function(i){var a=Math.max(.001,+i),s=a*a,l=s*s;return e(a,s,l)},r}(Math.SQRT2,2,4);var at=0,yt=0,ft=0,fi=1e3,nn,bt,on=0,Le=0,dn=0,Pt=typeof performance=="object"&&performance.now?performance:Date,hi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function io(){return Le||(hi(xc),Le=Pt.now()+dn)}function xc(){Le=0}function rn(){this._call=this._time=this._next=null}rn.prototype=gi.prototype={constructor:rn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?io():+n)+(t==null?0:+t),!this._next&&bt!==this&&(bt?bt._next=this:nn=this,bt=this),this._call=e,this._time=n,Zn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zn())}};function gi(e,t,n){var o=new rn;return o.restart(e,t,n),o}function Sc(){io(),++at;for(var e=nn,t;e;)(t=Le-e._time)>=0&&e._call.call(void 0,t),e=e._next;--at}function Zo(){Le=(on=Pt.now())+dn,at=yt=0;try{Sc()}finally{at=0,Oc(),Le=0}}function Cc(){var e=Pt.now(),t=e-on;t>fi&&(dn-=t,on=e)}function Oc(){for(var e,t=nn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:nn=n);bt=e,Zn(o)}function Zn(e){if(!at){yt&&(yt=clearTimeout(yt));var t=e-Le;t>24?(e<1/0&&(yt=setTimeout(Zo,e-Pt.now()-dn)),ft&&(ft=clearInterval(ft))):(ft||(on=Pt.now(),ft=setInterval(Cc,fi)),at=1,hi(Zo))}}function Uo(e,t,n){var o=new rn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Nc=cn("start","end","cancel","interrupt"),Ec=[],vi=0,Ko=1,Un=2,Gt=3,Fo=4,Kn=5,qt=6;function fn(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Pc(e,n,{name:t,index:o,group:r,on:Nc,tween:Ec,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:vi})}function ao(e,t){var n=fe(e,t);if(n.state>vi)throw new Error("too late; already scheduled");return n}function ye(e,t){var n=fe(e,t);if(n.state>Gt)throw new Error("too late; already running");return n}function fe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Pc(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=gi(i,0,n.time);function i(u){n.state=Ko,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,f,h;if(n.state!==Ko)return l();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Gt)return Uo(a);h.state===Fo?(h.state=qt,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=qt,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(Uo(function(){n.state===Gt&&(n.state=Fo,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Un,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Un){for(n.state=Gt,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Kn,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===Kn&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=qt,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Qt(e,t){var n=e.__transition,o,r,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>Un&&o.state<Kn,o.state=qt,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function Mc(e){return this.each(function(){Qt(this,e)})}function _c(e,t){var n,o;return function(){var r=ye(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,s=o.length;a<s;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function kc(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=ye(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var s={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=s;break}l===u&&r.push(s)}i.tween=r}}function Dc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=fe(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?_c:kc)(n,e,t))}function so(e,t,n){var o=e._id;return e.each(function(){var r=ye(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return fe(r,o).value[t]}}function pi(e,t){var n;return(typeof t=="number"?_e:t instanceof Et?Xo:(n=Et(t))?(t=n,Xo):fc)(e,t)}function $c(e){return function(){this.removeAttribute(e)}}function Ac(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Tc(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function zc(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function Ic(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function Bc(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function Rc(e,t){var n=un(e),o=n==="transform"?pc:pi;return this.attrTween(e,typeof t=="function"?(n.local?Bc:Ic)(n,o,so(this,"attr."+e,t)):t==null?(n.local?Ac:$c)(n):(n.local?zc:Tc)(n,o,t))}function jc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Hc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Lc(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&Hc(e,i)),n}return r._value=t,r}function Xc(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&jc(e,i)),n}return r._value=t,r}function Vc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=un(e);return this.tween(n,(o.local?Lc:Xc)(o,t))}function Yc(e,t){return function(){ao(this,e).delay=+t.apply(this,arguments)}}function Zc(e,t){return t=+t,function(){ao(this,e).delay=t}}function Uc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Yc:Zc)(t,e)):fe(this.node(),t).delay}function Kc(e,t){return function(){ye(this,e).duration=+t.apply(this,arguments)}}function Fc(e,t){return t=+t,function(){ye(this,e).duration=t}}function Wc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Kc:Fc)(t,e)):fe(this.node(),t).duration}function Gc(e,t){if(typeof t!="function")throw new Error;return function(){ye(this,e).ease=t}}function qc(e){var t=this._id;return arguments.length?this.each(Gc(t,e)):fe(this.node(),t).ease}function Qc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ye(this,e).ease=n}}function Jc(e){if(typeof e!="function")throw new Error;return this.each(Qc(this._id,e))}function eu(e){typeof e!="function"&&(e=Fr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new Ce(o,this._parents,this._name,this._id)}function tu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var l=t[s],u=n[s],c=l.length,d=a[s]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;s<o;++s)a[s]=t[s];return new Ce(a,this._parents,this._name,this._id)}function nu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ou(e,t,n){var o,r,i=nu(t)?ao:ye;return function(){var a=i(this,e),s=a.on;s!==o&&(r=(o=s).copy()).on(t,n),a.on=r}}function ru(e,t){var n=this._id;return arguments.length<2?fe(this.node(),n).on.on(e):this.each(ou(n,e,t))}function iu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function au(){return this.on("end.remove",iu(this._id))}function su(e){var t=this._name,n=this._id;typeof e!="function"&&(e=no(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var s=o[a],l=s.length,u=i[a]=new Array(l),c,d,f=0;f<l;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,fn(u[f],t,n,f,u,fe(c,n)));return new Ce(i,this._parents,t,n)}function lu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Kr(e));for(var o=this._groups,r=o.length,i=[],a=[],s=0;s<r;++s)for(var l=o[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,g=fe(c,n),p=0,w=f.length;p<w;++p)(h=f[p])&&fn(h,t,n,p,f,g);i.push(f),a.push(c)}return new Ce(i,a,t,n)}var cu=_t.prototype.constructor;function uu(){return new cu(this._groups,this._parents)}function du(e,t){var n,o,r;return function(){var i=it(this,e),a=(this.style.removeProperty(e),it(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function mi(e){return function(){this.style.removeProperty(e)}}function fu(e,t,n){var o,r=n+"",i;return function(){var a=it(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function hu(e,t,n){var o,r,i;return function(){var a=it(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),it(this,e))),a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s))}}function gu(e,t){var n,o,r,i="style."+t,a="end."+i,s;return function(){var l=ye(this,e),u=l.on,c=l.value[i]==null?s||(s=mi(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(a,r=c),l.on=o}}function vu(e,t,n){var o=(e+="")=="transform"?vc:pi;return t==null?this.styleTween(e,du(e,o)).on("end.style."+e,mi(e)):typeof t=="function"?this.styleTween(e,hu(e,o,so(this,"style."+e,t))).each(gu(this._id,e)):this.styleTween(e,fu(e,o,t),n).on("end.style."+e,null)}function pu(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function mu(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&pu(e,a,n)),o}return i._value=t,i}function yu(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,mu(e,t,n??""))}function bu(e){return function(){this.textContent=e}}function wu(e){return function(){var t=e(this);this.textContent=t??""}}function xu(e){return this.tween("text",typeof e=="function"?wu(so(this,"text",e)):bu(e==null?"":e+""))}function Su(e){return function(t){this.textContent=e.call(this,t)}}function Cu(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Su(r)),t}return o._value=e,o}function Ou(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Cu(e))}function Nu(){for(var e=this._name,t=this._id,n=yi(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=fe(l,t);fn(l,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ce(o,this._parents,e,n)}function Eu(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){--r===0&&i()}};n.each(function(){var u=ye(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),r===0&&i()})}var Pu=0;function Ce(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function yi(){return++Pu}var we=_t.prototype;Ce.prototype={constructor:Ce,select:su,selectAll:lu,selectChild:we.selectChild,selectChildren:we.selectChildren,filter:eu,merge:tu,selection:uu,transition:Nu,call:we.call,nodes:we.nodes,node:we.node,size:we.size,empty:we.empty,each:we.each,on:ru,attr:Rc,attrTween:Vc,style:vu,styleTween:yu,text:xu,textTween:Ou,remove:au,tween:Dc,delay:Uc,duration:Wc,ease:qc,easeVarying:Jc,end:Eu,[Symbol.iterator]:we[Symbol.iterator]};function Mu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _u={time:null,delay:0,duration:250,ease:Mu};function ku(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Du(e){var t,n;e instanceof Ce?(t=e._id,e=e._name):(t=yi(),(n=_u).time=io(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&fn(l,e,t,u,a,n||ku(l,t));return new Ce(o,this._parents,e,t)}_t.prototype.interrupt=Mc;_t.prototype.transition=Du;const Lt=e=>()=>e;function $u(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Se(e,t,n){this.k=e,this.x=t,this.y=n}Se.prototype={constructor:Se,scale:function(e){return e===1?this:new Se(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Se(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var je=new Se(1,0,0);Se.prototype;function On(e){e.stopImmediatePropagation()}function ht(e){e.preventDefault(),e.stopImmediatePropagation()}function Au(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Tu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Wo(){return this.__zoom||je}function zu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Iu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bu(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function Ru(){var e=Au,t=Tu,n=Bu,o=zu,r=Iu,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=wc,u=cn("start","zoom","end"),c,d,f,h=500,g=150,p=0,w=10;function y(m){m.property("__zoom",Wo).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",I).filter(r).on("touchstart.zoom",z).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(m,k,S,D){var A=m.selection?m.selection():m;A.property("__zoom",Wo),m!==A?b(m,k,S,D):A.interrupt().each(function(){O(this,arguments).event(D).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},y.scaleBy=function(m,k,S,D){y.scaleTo(m,function(){var A=this.__zoom.k,$=typeof k=="function"?k.apply(this,arguments):k;return A*$},S,D)},y.scaleTo=function(m,k,S,D){y.transform(m,function(){var A=t.apply(this,arguments),$=this.__zoom,T=S==null?v(A):typeof S=="function"?S.apply(this,arguments):S,j=$.invert(T),H=typeof k=="function"?k.apply(this,arguments):k;return n(C(N($,H),T,j),A,a)},S,D)},y.translateBy=function(m,k,S,D){y.transform(m,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),a)},null,D)},y.translateTo=function(m,k,S,D,A){y.transform(m,function(){var $=t.apply(this,arguments),T=this.__zoom,j=D==null?v($):typeof D=="function"?D.apply(this,arguments):D;return n(je.translate(j[0],j[1]).scale(T.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof S=="function"?-S.apply(this,arguments):-S),$,a)},D,A)};function N(m,k){return k=Math.max(i[0],Math.min(i[1],k)),k===m.k?m:new Se(k,m.x,m.y)}function C(m,k,S){var D=k[0]-S[0]*m.k,A=k[1]-S[1]*m.k;return D===m.x&&A===m.y?m:new Se(m.k,D,A)}function v(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function b(m,k,S,D){m.on("start.zoom",function(){O(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(D).end()}).tween("zoom",function(){var A=this,$=arguments,T=O(A,$).event(D),j=t.apply(A,$),H=S==null?v(j):typeof S=="function"?S.apply(A,$):S,V=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),Z=A.__zoom,F=typeof k=="function"?k.apply(A,$):k,G=l(Z.invert(H).concat(V/Z.k),F.invert(H).concat(V/F.k));return function(B){if(B===1)B=F;else{var K=G(B),Q=V/K[2];B=new Se(Q,H[0]-K[0]*Q,H[1]-K[1]*Q)}T.zoom(null,B)}})}function O(m,k,S){return!S&&m.__zooming||new M(m,k)}function M(m,k){this.that=m,this.args=k,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,k),this.taps=0}M.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,k){return this.mouse&&m!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var k=ue(this.that).datum();u.call(m,this.that,new $u(m,{sourceEvent:this.sourceEvent,target:y,type:m,transform:this.that.__zoom,dispatch:u}),k)}};function E(m,...k){if(!e.apply(this,arguments))return;var S=O(this,k).event(m),D=this.__zoom,A=Math.max(i[0],Math.min(i[1],D.k*Math.pow(2,o.apply(this,arguments)))),$=pe(m);if(S.wheel)(S.mouse[0][0]!==$[0]||S.mouse[0][1]!==$[1])&&(S.mouse[1]=D.invert(S.mouse[0]=$)),clearTimeout(S.wheel);else{if(D.k===A)return;S.mouse=[$,D.invert($)],Qt(this),S.start()}ht(m),S.wheel=setTimeout(T,g),S.zoom("mouse",n(C(N(D,A),S.mouse[0],S.mouse[1]),S.extent,a));function T(){S.wheel=null,S.end()}}function _(m,...k){if(f||!e.apply(this,arguments))return;var S=m.currentTarget,D=O(this,k,!0).event(m),A=ue(m.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",V,!0),$=pe(m,S),T=m.clientX,j=m.clientY;ri(m.view),On(m),D.mouse=[$,this.__zoom.invert($)],Qt(this),D.start();function H(Z){if(ht(Z),!D.moved){var F=Z.clientX-T,G=Z.clientY-j;D.moved=F*F+G*G>p}D.event(Z).zoom("mouse",n(C(D.that.__zoom,D.mouse[0]=pe(Z,S),D.mouse[1]),D.extent,a))}function V(Z){A.on("mousemove.zoom mouseup.zoom",null),ii(Z.view,D.moved),ht(Z),D.event(Z).end()}}function I(m,...k){if(e.apply(this,arguments)){var S=this.__zoom,D=pe(m.changedTouches?m.changedTouches[0]:m,this),A=S.invert(D),$=S.k*(m.shiftKey?.5:2),T=n(C(N(S,$),D,A),t.apply(this,k),a);ht(m),s>0?ue(this).transition().duration(s).call(b,T,D,m):ue(this).call(y.transform,T,D,m)}}function z(m,...k){if(e.apply(this,arguments)){var S=m.touches,D=S.length,A=O(this,k,m.changedTouches.length===D).event(m),$,T,j,H;for(On(m),T=0;T<D;++T)j=S[T],H=pe(j,this),H=[H,this.__zoom.invert(H),j.identifier],A.touch0?!A.touch1&&A.touch0[2]!==H[2]&&(A.touch1=H,A.taps=0):(A.touch0=H,$=!0,A.taps=1+!!c);c&&(c=clearTimeout(c)),$&&(A.taps<2&&(d=H[0],c=setTimeout(function(){c=null},h)),Qt(this),A.start())}}function L(m,...k){if(this.__zooming){var S=O(this,k).event(m),D=m.changedTouches,A=D.length,$,T,j,H;for(ht(m),$=0;$<A;++$)T=D[$],j=pe(T,this),S.touch0&&S.touch0[2]===T.identifier?S.touch0[0]=j:S.touch1&&S.touch1[2]===T.identifier&&(S.touch1[0]=j);if(T=S.that.__zoom,S.touch1){var V=S.touch0[0],Z=S.touch0[1],F=S.touch1[0],G=S.touch1[1],B=(B=F[0]-V[0])*B+(B=F[1]-V[1])*B,K=(K=G[0]-Z[0])*K+(K=G[1]-Z[1])*K;T=N(T,Math.sqrt(B/K)),j=[(V[0]+F[0])/2,(V[1]+F[1])/2],H=[(Z[0]+G[0])/2,(Z[1]+G[1])/2]}else if(S.touch0)j=S.touch0[0],H=S.touch0[1];else return;S.zoom("touch",n(C(T,j,H),S.extent,a))}}function X(m,...k){if(this.__zooming){var S=O(this,k).event(m),D=m.changedTouches,A=D.length,$,T;for(On(m),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),$=0;$<A;++$)T=D[$],S.touch0&&S.touch0[2]===T.identifier?delete S.touch0:S.touch1&&S.touch1[2]===T.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(T=pe(T,this),Math.hypot(d[0]-T[0],d[1]-T[1])<w)){var j=ue(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return y.wheelDelta=function(m){return arguments.length?(o=typeof m=="function"?m:Lt(+m),y):o},y.filter=function(m){return arguments.length?(e=typeof m=="function"?m:Lt(!!m),y):e},y.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:Lt(!!m),y):r},y.extent=function(m){return arguments.length?(t=typeof m=="function"?m:Lt([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),y):t},y.scaleExtent=function(m){return arguments.length?(i[0]=+m[0],i[1]=+m[1],y):[i[0],i[1]]},y.translateExtent=function(m){return arguments.length?(a[0][0]=+m[0][0],a[1][0]=+m[1][0],a[0][1]=+m[0][1],a[1][1]=+m[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(m){return arguments.length?(n=m,y):n},y.duration=function(m){return arguments.length?(s=+m,y):s},y.interpolate=function(m){return arguments.length?(l=m,y):l},y.on=function(){var m=u.on.apply(u,arguments);return m===u?y:m},y.clickDistance=function(m){return arguments.length?(p=(m=+m)*m,y):Math.sqrt(p)},y.tapDistance=function(m){return arguments.length?(w=+m,y):w},y}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function bi(e,t){if(e){if(typeof e=="string")return Fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(e,t)}}function ju(e){if(Array.isArray(e))return e}function Hu(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,i=!1,a,s;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(o.push(a.value),!(t&&o.length===t));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&n.return!=null&&n.return()}finally{if(i)throw s}}return o}}function Lu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W(e,t){return ju(e)||Hu(e,t)||bi(e,t)||Lu()}var st;(function(e){e.Strict="strict",e.Loose="loose"})(st||(st={}));var lt;(function(e){e.Lines="lines",e.Dots="dots"})(lt||(lt={}));var ot;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ot||(ot={}));var xe;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(xe||(xe={}));var Mt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Mt||(Mt={}));var R;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(R||(R={}));var lo=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},rt=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),o)},wi=function(t,n){return{x:rt(t.x,n[0][0],n[1][0]),y:rt(t.y,n[0][1],n[1][1])}},xi=function(t){var n,o;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((o=window)===null||o===void 0?void 0:o.document)},Si=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},ct=function(t){var n=t.x,o=t.y,r=t.width,i=t.height;return{x:n,y:o,x2:n+r,y2:o+i}},Ci=function(t){var n=t.x,o=t.y,r=t.x2,i=t.y2;return{x:n,y:o,width:r-n,height:i-o}},Xu=function(t,n){return Ci(Si(ct(t),ct(n)))},Oi=function(t){return!isNaN(t)&&isFinite(t)},te=Symbol("internals");function Go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Go(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Go(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function qo(e,t){var n=e.find(function(u){return u.id===t.parentNode});if(n){var o=t.position.x+t.width-n.width,r=t.position.y+t.height-n.height;if(o>0||r>0||t.position.x<0||t.position.y<0){var i,a;if(n.style=wt({},n.style)||{},n.style.width=(i=n.style.width)!==null&&i!==void 0?i:n.width,n.style.height=(a=n.style.height)!==null&&a!==void 0?a:n.height,o>0&&(n.style.width+=o),r>0&&(n.style.height+=r),t.position.x<0){var s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){var l=Math.abs(t.position.y);n.position.y=n.position.y-l,n.style.height+=l,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Vu(e,t){if(e.some(function(o){return o.type==="reset"}))return e.filter(function(o){return o.type==="reset"}).map(function(o){return o.item});var n=e.filter(function(o){return o.type==="add"}).map(function(o){return o.item});return t.reduce(function(o,r){var i=e.find(function(l){return l.id===r.id});if(i)switch(i.type){case"select":return o.push(wt(wt({},r),{},{selected:i.selected})),o;case"position":{var a=wt({},r);return typeof i.position<"u"&&(a.position=i.position),typeof i.positionAbsolute<"u"&&(a.positionAbsolute=i.positionAbsolute),typeof i.dragging<"u"&&(a.dragging=i.dragging),a.expandParent&&qo(o,a),o.push(a),o}case"dimensions":{var s=wt({},r);return typeof i.dimensions<"u"&&(s.width=i.dimensions.width,s.height=i.dimensions.height),s.expandParent&&qo(o,s),o.push(s),o}case"remove":return o}return o.push(r),o},n)}function Yu(e,t){return Vu(e,t)}var ke=function(t,n){return{id:t,type:"select",selected:n}};function Je(e,t){return e.reduce(function(n,o){var r=t.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(ke(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(ke(o.id,!1))),n},[])}function Qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Ni(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qo(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qo(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Jo=function(t,n,o){var r=n.querySelectorAll(t);if(!r||!r.length)return null;var i=Array.from(r),a=n.getBoundingClientRect();return i.map(function(s){var l=s.getBoundingClientRect();return Ni({id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(l.left-a.left)/o,y:(l.top-a.top)/o},lo(s))})};function gt(e,t,n){return n===void 0?n:function(o){var r=t().nodeInternals.get(e);n(o,Ni({},r))}}function Ei(e){var t=e.id,n=e.store,o=n.getState(),r=o.addSelectedNodes,i=o.unselectNodesAndEdges,a=o.multiSelectionActive,s=o.nodeInternals,l=s.get(t);n.setState({nodesSelectionActive:!1}),l.selected?l.selected&&a&&i({nodes:[l]}):r([t])}function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?er(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Zu=function(t){return"id"in t&&"source"in t&&"target"in t},Uu=function(t){var n=t.source,o=t.sourceHandle,r=t.target,i=t.targetHandle;return"reactflow__edge-".concat(n).concat(o||"","-").concat(r).concat(i||"")},Wn=function(t,n){if(typeof t>"u")return"";if(typeof t=="string")return t;var o=n?"".concat(n,"__"):"";return"".concat(o).concat(Object.keys(t).sort().map(function(r){return"".concat(r,"=").concat(t[r])}).join("&"))},Ku=function(t,n){return n.some(function(o){return o.source===t.source&&o.target===t.target&&(o.sourceHandle===t.sourceHandle||!o.sourceHandle&&!t.sourceHandle)&&(o.targetHandle===t.targetHandle||!o.targetHandle&&!t.targetHandle)})},Fu=function(t,n){if(!t.source||!t.target)return n;var o;return Zu(t)?o=St({},t):o=St(St({},t),{},{id:Uu(t)}),Ku(o,n)?n:n.concat(o)},Pi=function(t,n,o,r){var i=t.x,a=t.y,s=W(n,3),l=s[0],u=s[1],c=s[2],d=W(r,2),f=d[0],h=d[1],g={x:(i-l)/c,y:(a-u)/c};return o?{x:f*Math.round(g.x/f),y:h*Math.round(g.y/h)}:g},hn=function(t){if(t.length===0)return{x:0,y:0,width:0,height:0};var n=t.reduce(function(o,r){var i=r.positionAbsolute,a=r.position,s=r.width,l=r.height;return Si(o,ct({x:i?i.x:a.x,y:i?i.y:a.y,width:s||0,height:l||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ci(n)},Mi=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],r=W(o,3),i=r[0],a=r[1],s=r[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,c=ct({x:(n.x-i)/s,y:(n.y-a)/s,width:n.width/s,height:n.height/s}),d=[];return t.forEach(function(f){var h=f.positionAbsolute,g=f.width,p=f.height,w=f.selectable,y=w===void 0?!0:w;if(u&&!y)return!1;var N=ct(St(St({},h),{},{width:g||0,height:p||0})),C=Math.max(0,Math.min(c.x2,N.x2)-Math.max(c.x,N.x)),v=Math.max(0,Math.min(c.y2,N.y2)-Math.max(c.y,N.y)),b=Math.ceil(C*v),O=typeof g>"u"||typeof p>"u"||g===null||p===null,M=l&&b>0,E=(g||0)*(p||0),_=O||M||b>=E;_&&d.push(f)}),d},_i=function(t,n){var o=t.map(function(r){return r.id});return n.filter(function(r){return o.includes(r.source)||o.includes(r.target)})},ki=function(t,n,o,r,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+a)),l=o/(t.height*(1+a)),u=Math.min(s,l),c=rt(u,r,i),d=t.x+t.width/2,f=t.y+t.height/2,h=n/2-d*c,g=o/2-f*c;return[h,g,c]},ze=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)};function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Di(e,t,n,o){var r,i,a,s,l,u,c,d,f,h,g,p;if(!e.parentNode)return o;var w=t.get(e.parentNode);return Di(w,t,n,{x:((r=o.x)!==null&&r!==void 0?r:0)+((i=(a=w.position)===null||a===void 0?void 0:a.x)!==null&&i!==void 0?i:0),y:((s=o.y)!==null&&s!==void 0?s:0)+((l=(u=w.position)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0),z:((c=(d=w[te])===null||d===void 0?void 0:d.z)!==null&&c!==void 0?c:0)>((f=o.z)!==null&&f!==void 0?f:0)?(h=(g=w[te])===null||g===void 0?void 0:g.z)!==null&&h!==void 0?h:0:(p=o.z)!==null&&p!==void 0?p:0})}function Nn(e,t){var n=new Map,o={};return e.forEach(function(r){var i,a=Oi(r.zIndex)?r.zIndex:r.selected?1e3:0,s=t.get(r.id),l=et(et({width:s==null?void 0:s.width,height:s==null?void 0:s.height},r),{},{positionAbsolute:{x:r.position.x,y:r.position.y}});r.parentNode&&(l.parentNode=r.parentNode,o[r.parentNode]=!0),Object.defineProperty(l,te,{enumerable:!1,value:{handleBounds:s==null||(i=s[te])===null||i===void 0?void 0:i.handleBounds,z:a}}),n.set(r.id,l)}),n.forEach(function(r){if(r.parentNode&&!n.has(r.parentNode))throw new Error("Parent node ".concat(r.parentNode," not found"));if(r.parentNode||o[r.id]){var i,a,s=Di(r,n,o,et(et({},r.position),{},{z:(i=(a=r[te])===null||a===void 0?void 0:a.z)!==null&&i!==void 0?i:0})),l=s.x,u=s.y,c=s.z;r.positionAbsolute={x:l,y:u},r[te].z=c,o[r.id]&&(r[te].isParent=!0)}}),n}function $i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e(),o=n.nodeInternals,r=n.width,i=n.height,a=n.minZoom,s=n.maxZoom,l=n.d3Zoom,u=n.d3Selection,c=n.fitViewOnInitDone,d=n.fitViewOnInit;if((t.initial&&!c&&d||!t.initial)&&l&&u){var f=Array.from(o.values()).filter(function(E){return t.includeHiddenNodes?E.width&&E.height:!E.hidden}),h=f.every(function(E){return E.width&&E.height});if(f.length>0&&h){var g,p,w,y=hn(f),N=ki(y,r,i,(g=t.minZoom)!==null&&g!==void 0?g:a,(p=t.maxZoom)!==null&&p!==void 0?p:s,(w=t.padding)!==null&&w!==void 0?w:.1),C=W(N,3),v=C[0],b=C[1],O=C[2],M=je.translate(v,b).scale(O);return typeof t.duration=="number"&&t.duration>0?l.transform(ze(u,t.duration),M):l.transform(u,M),!0}}return!1}function Wu(e,t){return e.forEach(function(n){var o=t.get(n.id);if(o){var r;t.set(o.id,et(et({},o),{},(r={},q(r,te,o[te]),q(r,"selected",n.selected),r)))}}),new Map(t)}function Gu(e,t){return t.map(function(n){var o=e.find(function(r){return r.id===n.id});return o&&(n.selected=o.selected),n})}function Xt(e){var t=e.changedNodes,n=e.changedEdges,o=e.get,r=e.set,i=o(),a=i.nodeInternals,s=i.edges,l=i.onNodesChange,u=i.onEdgesChange,c=i.hasDefaultNodes,d=i.hasDefaultEdges;t!=null&&t.length&&(c&&r({nodeInternals:Wu(t,a)}),l==null||l(t)),n!=null&&n.length&&(d&&r({edges:Gu(n,s)}),u==null||u(n))}var Gn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nr={width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Gn,nodeExtent:Gn,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:st.Strict,domNode:null,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,reactFlowVersion:"10.3.17",connectionStartHandle:null,connectOnClick:!0};function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?or(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var co=as(),Ai=co.Provider,ee=co.useStore,oe=co.useStoreApi,Ti=function(){return is(function(t,n){return ve(ve({},nr),{},{setNodes:function(r){t({nodeInternals:Nn(r,n().nodeInternals)})},setEdges:function(r){var i=n(),a=i.defaultEdgeOptions,s=a===void 0?{}:a;t({edges:r.map(function(l){return ve(ve({},s),l)})})},setDefaultNodesAndEdges:function(r,i){var a=typeof r<"u",s=typeof i<"u",l=a?Nn(r,new Map):new Map,u=s?i:[];t({nodeInternals:l,edges:u,hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:function(r){var i=n(),a=i.onNodesChange,s=i.nodeInternals,l=i.fitViewOnInit,u=i.fitViewOnInitDone,c=i.fitViewOnInitOptions,d=i.domNode,f=d==null?void 0:d.querySelector(".react-flow__viewport");if(f){var h=window.getComputedStyle(f),g=new window.DOMMatrixReadOnly(h.transform),p=g.m22,w=r.reduce(function(N,C){var v=s.get(C.id);if(v){var b=lo(C.nodeElement),O=!!(b.width&&b.height&&(v.width!==b.width||v.height!==b.height||C.forceUpdate));O&&(s.set(v.id,ve(ve({},v),{},q({},te,ve(ve({},v[te]),{},{handleBounds:{source:Jo(".source",C.nodeElement,p),target:Jo(".target",C.nodeElement,p)}})),b)),N.push({id:v.id,type:"dimensions",dimensions:b}))}return N},[]),y=u||l&&!u&&$i(n,ve({initial:!0},c));t({nodeInternals:new Map(s),fitViewOnInitDone:y}),(w==null?void 0:w.length)>0&&(a==null||a(w))}},updateNodePositions:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n(),l=s.onNodesChange,u=s.nodeInternals,c=s.hasDefaultNodes;if(c||l){var d=r.map(function(g){var p={id:g.id,type:"position",dragging:a};return i&&(p.positionAbsolute=g.positionAbsolute,p.position=g.position),p});if(d!=null&&d.length){if(c){var f=Yu(d,Array.from(u.values())),h=Nn(f,u);t({nodeInternals:h})}l==null||l(d)}}},addSelectedNodes:function(r){var i=n(),a=i.multiSelectionActive,s=i.nodeInternals,l=i.edges,u,c=null;a?u=r.map(function(d){return ke(d,!0)}):(u=Je(Array.from(s.values()),r),c=Je(l,[])),Xt({changedNodes:u,changedEdges:c,get:n,set:t})},addSelectedEdges:function(r){var i=n(),a=i.multiSelectionActive,s=i.edges,l=i.nodeInternals,u,c=null;a?u=r.map(function(d){return ke(d,!0)}):(u=Je(s,r),c=Je(Array.from(l.values()),[])),Xt({changedNodes:c,changedEdges:u,get:n,set:t})},unselectNodesAndEdges:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.nodes,a=r.edges,s=n(),l=s.nodeInternals,u=s.edges,c=i||Array.from(l.values()),d=a||u,f=c.map(function(g){return g.selected=!1,ke(g.id,!1)}),h=d.map(function(g){return ke(g.id,!1)});Xt({changedNodes:f,changedEdges:h,get:n,set:t})},setMinZoom:function(r){var i=n(),a=i.d3Zoom,s=i.maxZoom;a==null||a.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:function(r){var i=n(),a=i.d3Zoom,s=i.minZoom;a==null||a.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:function(r){var i=n(),a=i.d3Zoom;a==null||a.translateExtent(r),t({translateExtent:r})},resetSelectedElements:function(){var r=n(),i=r.nodeInternals,a=r.edges,s=Array.from(i.values()),l=s.filter(function(c){return c.selected}).map(function(c){return ke(c.id,!1)}),u=a.filter(function(c){return c.selected}).map(function(c){return ke(c.id,!1)});Xt({changedNodes:l,changedEdges:u,get:n,set:t})},setNodeExtent:function(r){var i=n(),a=i.nodeInternals;a.forEach(function(s){s.positionAbsolute=wi(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(a)})},reset:function(){return t(ve({},nr))}})})};function re(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=re(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function ae(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!Object.is(e[n[o]],t[n[o]]))return!1;return!0}function qu(e){if(Array.isArray(e))return Fn(e)}function Qu(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ju(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function He(e){return qu(e)||Qu(e)||bi(e)||Ju()}var ed={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},getZoom:function(){return 1},setViewport:function(t){},getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},viewportInitialized:!1},td=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}},nd=function(){var t=oe(),n=ee(td,ae),o=n.d3Zoom,r=n.d3Selection,i=P.useMemo(function(){return r&&o?{zoomIn:function(s){return o.scaleBy(ze(r,s==null?void 0:s.duration),1.2)},zoomOut:function(s){return o.scaleBy(ze(r,s==null?void 0:s.duration),1/1.2)},zoomTo:function(s,l){return o.scaleTo(ze(r,l==null?void 0:l.duration),s)},getZoom:function(){return t.getState().transform[2]},setViewport:function(s,l){var u,c,d,f=W(t.getState().transform,3),h=f[0],g=f[1],p=f[2],w=je.translate((u=s.x)!==null&&u!==void 0?u:h,(c=s.y)!==null&&c!==void 0?c:g).scale((d=s.zoom)!==null&&d!==void 0?d:p);o.transform(ze(r,l==null?void 0:l.duration),w)},getViewport:function(){var s=W(t.getState().transform,3),l=s[0],u=s[1],c=s[2];return{x:l,y:u,zoom:c}},fitView:function(s){return $i(t.getState,s)},setCenter:function(s,l,u){var c=t.getState(),d=c.width,f=c.height,h=c.maxZoom,g=typeof(u==null?void 0:u.zoom)<"u"?u.zoom:h,p=d/2-s*g,w=f/2-l*g,y=je.translate(p,w).scale(g);o.transform(ze(r,u==null?void 0:u.duration),y)},fitBounds:function(s,l){var u,c=t.getState(),d=c.width,f=c.height,h=c.minZoom,g=c.maxZoom,p=ki(s,d,f,h,g,(u=l==null?void 0:l.padding)!==null&&u!==void 0?u:.1),w=W(p,3),y=w[0],N=w[1],C=w[2],v=je.translate(y,N).scale(C);o.transform(ze(r,l==null?void 0:l.duration),v)},project:function(s){var l=t.getState(),u=l.transform,c=l.snapToGrid,d=l.snapGrid;return Pi(s,u,c,d)},viewportInitialized:!0}:ed},[o,r]);return i};function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function zi(){var e=nd(),t=oe(),n=P.useCallback(function(){var d=t.getState(),f=d.nodeInternals,h=Array.from(f.values());return h.map(function(g){return We({},g)})},[]),o=P.useCallback(function(d){var f=t.getState(),h=f.nodeInternals;return h.get(d)},[]),r=P.useCallback(function(){var d=t.getState(),f=d.edges,h=f===void 0?[]:f;return h.map(function(g){return We({},g)})},[]),i=P.useCallback(function(d){var f=t.getState(),h=f.edges,g=h===void 0?[]:h;return g.find(function(p){return p.id===d})},[]),a=P.useCallback(function(d){var f=t.getState(),h=f.nodeInternals,g=f.setNodes,p=f.hasDefaultNodes,w=f.onNodesChange,y=Array.from(h.values()),N=typeof d=="function"?d(y):d;if(p)g(N);else if(w){var C=N.length===0?y.map(function(v){return{type:"remove",id:v.id}}):N.map(function(v){return{item:v,type:"reset"}});w(C)}},[]),s=P.useCallback(function(d){var f=t.getState(),h=f.edges,g=h===void 0?[]:h,p=f.setEdges,w=f.hasDefaultEdges,y=f.onEdgesChange,N=typeof d=="function"?d(g):d;if(w)p(N);else if(y){var C=N.length===0?g.map(function(v){return{type:"remove",id:v.id}}):N.map(function(v){return{item:v,type:"reset"}});y(C)}},[]),l=P.useCallback(function(d){var f=Array.isArray(d)?d:[d],h=t.getState(),g=h.nodeInternals,p=h.setNodes,w=h.hasDefaultNodes,y=h.onNodesChange;if(w){var N=Array.from(g.values()),C=[].concat(N,He(f));p(C)}else if(y){var v=f.map(function(b){return{item:b,type:"add"}});y(v)}},[]),u=P.useCallback(function(d){var f=Array.isArray(d)?d:[d],h=t.getState(),g=h.edges,p=g===void 0?[]:g,w=h.setEdges,y=h.hasDefaultEdges,N=h.onEdgesChange;if(y)w([].concat(He(p),He(f)));else if(N){var C=f.map(function(v){return{item:v,type:"add"}});N(C)}},[]),c=P.useCallback(function(){var d=t.getState(),f=d.nodeInternals,h=d.edges,g=h===void 0?[]:h,p=d.transform,w=Array.from(f.values()),y=W(p,3),N=y[0],C=y[1],v=y[2];return{nodes:w.map(function(b){return We({},b)}),edges:g.map(function(b){return We({},b)}),viewport:{x:N,y:C,zoom:v}}},[]);return P.useMemo(function(){return We(We({},e),{},{getNodes:n,getNode:o,getEdges:r,getEdge:i,setNodes:a,setEdges:s,addNodes:l,addEdges:u,toObject:c})},[e,n,o,r,i,a,s,l,u,c])}function od(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,i;for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function gn(e,t){if(e==null)return{};var n=od(e,t),o,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function rd(){return x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:x("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function id(){return x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:x("path",{d:"M0 0h32v4.2H0z"})})}function ad(){return x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:x("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function sd(){return x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:x("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ld(){return x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:x("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}var cd=["children","className"];function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function ud(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ir(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Vt=function(t){var n=t.children,o=t.className,r=gn(t,cd);return x("button",{...ud({type:"button",className:re(["react-flow__controls-button",o])},r),children:n})},dd=function(t){return t.nodesDraggable&&t.nodesConnectable&&t.elementsSelectable},Ii=function(t){var n=t.style,o=t.showZoom,r=o===void 0?!0:o,i=t.showFitView,a=i===void 0?!0:i,s=t.showInteractive,l=s===void 0?!0:s,u=t.fitViewOptions,c=t.onZoomIn,d=t.onZoomOut,f=t.onFitView,h=t.onInteractiveChange,g=t.className,p=t.children,w=oe(),y=P.useState(!1),N=W(y,2),C=N[0],v=N[1],b=ee(dd),O=zi(),M=O.zoomIn,E=O.zoomOut,_=O.fitView;if(P.useEffect(function(){v(!0)},[]),!C)return null;var I=function(){M==null||M(),c==null||c()},z=function(){E==null||E(),d==null||d()},L=function(){_==null||_(u),f==null||f()},X=function(){w.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),h==null||h(!b)};return U("div",{className:re(["react-flow__controls",g]),style:n,children:[r&&U(ce,{children:[x(Vt,{onClick:I,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:x(rd,{})}),x(Vt,{onClick:z,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:x(id,{})})]}),a&&x(Vt,{className:"react-flow__controls-fitview",onClick:L,title:"fit view","aria-label":"fit view",children:x(ad,{})}),l&&x(Vt,{className:"react-flow__controls-interactive",onClick:X,title:"toggle interactivity","aria-label":"toggle interactivity",children:b?x(ld,{}):x(sd,{})}),p]})};Ii.displayName="Controls";var fd=P.memo(Ii),Bi=function(t){var n=t.x,o=t.y,r=t.width,i=t.height,a=t.style,s=t.color,l=t.strokeColor,u=t.strokeWidth,c=t.className,d=t.borderRadius,f=t.shapeRendering,h=a||{},g=h.background,p=h.backgroundColor,w=s||g||p;return x("rect",{className:re(["react-flow__minimap-node",c]),x:n,y:o,rx:d,ry:d,width:r,height:i,fill:w,stroke:l,strokeWidth:u,shapeRendering:f})};Bi.displayName="MiniMapNode";var hd=P.memo(Bi),gd=200,vd=150,pd=function(t){return{viewBBox:{x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]},nodes:Array.from(t.nodeInternals.values())}},En=function(t){return t instanceof Function?t:function(){return t}},Ri=function(t){var n,o,r=t.style,i=t.className,a=t.nodeStrokeColor,s=a===void 0?"#555":a,l=t.nodeColor,u=l===void 0?"#fff":l,c=t.nodeClassName,d=c===void 0?"":c,f=t.nodeBorderRadius,h=f===void 0?5:f,g=t.nodeStrokeWidth,p=g===void 0?2:g,w=t.maskColor,y=w===void 0?"rgb(240, 242, 243, 0.7)":w,N=ee(pd,ae),C=N.viewBBox,v=N.nodes,b=(n=r==null?void 0:r.width)!==null&&n!==void 0?n:gd,O=(o=r==null?void 0:r.height)!==null&&o!==void 0?o:vd,M=En(u),E=En(s),_=En(d),I=v.length>0?Xu(hn(v),C):C,z=I.width/b,L=I.height/O,X=Math.max(z,L),m=X*b,k=X*O,S=5*X,D=I.x-(m-I.width)/2-S,A=I.y-(k-I.height)/2-S,$=m+S*2,T=k+S*2,j=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return U("svg",{width:b,height:O,viewBox:"".concat(D," ").concat(A," ").concat($," ").concat(T),style:r,className:re(["react-flow__minimap",i]),children:[v.filter(function(H){return!H.hidden&&H.width&&H.height}).map(function(H){var V,Z,F,G;return x(hd,{x:(V=(Z=H.positionAbsolute)===null||Z===void 0?void 0:Z.x)!==null&&V!==void 0?V:0,y:(F=(G=H.positionAbsolute)===null||G===void 0?void 0:G.y)!==null&&F!==void 0?F:0,width:H.width,height:H.height,style:H.style,className:_(H),color:M(H),borderRadius:h,strokeColor:E(H),strokeWidth:p,shapeRendering:j},H.id)}),x("path",{className:"react-flow__minimap-mask",d:"M".concat(D-S,",").concat(A-S,"h").concat($+S*2,"v").concat(T+S*2,"h").concat(-$-S*2,`z
        M`).concat(C.x,",").concat(C.y,"h").concat(C.width,"v").concat(C.height,"h").concat(-C.width,"z"),fill:y,fillRule:"evenodd"})]})};Ri.displayName="MiniMap";var md=P.memo(Ri),yd=function(t,n,o){return x("path",{stroke:o,strokeWidth:n,d:"M".concat(t/2," 0 V").concat(t," M0 ").concat(t/2," H").concat(t)})},bd=function(t,n){return x("circle",{cx:t,cy:t,r:t,fill:n})},Yt;function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ar(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var wd=(Yt={},q(Yt,lt.Dots,"#81818a"),q(Yt,lt.Lines,"#eee"),Yt),xd=function(t){return t.transform},ji=function(t){var n=t.variant,o=n===void 0?lt.Dots:n,r=t.gap,i=r===void 0?15:r,a=t.size,s=a===void 0?.4:a,l=t.color,u=t.style,c=t.className,d=P.useRef(null),f=P.useState(null),h=W(f,2),g=h[0],p=h[1],w=ee(xd),y=W(w,3),N=y[0],C=y[1],v=y[2];P.useEffect(function(){var z=document.querySelectorAll(".react-flow__background"),L=Array.from(z).findIndex(function(X){return X===d.current});p("pattern-".concat(L))},[]);var b=i*v||1,O=N%b,M=C%b,E=o===lt.Lines,_=l||wd[o],I=E?yd(b,s,_):bd(s*v,_);return x("svg",{className:re(["react-flow__background","react-flow__container",c]),style:sr(sr({},u),{},{width:"100%",height:"100%"}),ref:d,children:g&&U(ce,{children:[x("pattern",{id:g,x:O,y:M,width:b,height:b,patternUnits:"userSpaceOnUse",children:I}),x("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(g,")")})]})})};ji.displayName="Background";var Sd=P.memo(ji),Cd=["paid-pro","paid-sponsor","paid-enterprise","paid-custom"];function Od(e){var t=e.proOptions,n=e.position,o=n===void 0?"bottom-right":n;if(t!=null&&t.account&&Cd.includes(t==null?void 0:t.account)&&t!==null&&t!==void 0&&t.hideAttribution)return null;var r="".concat(o).split("-");return x("div",{className:re(["react-flow__attribution"].concat(He(r))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing",children:x("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer",children:"React Flow"})})}var Nd=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Ed(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Pd=function(t){var n=t.x,o=t.y,r=t.label,i=t.labelStyle,a=i===void 0?{}:i,s=t.labelShowBg,l=s===void 0?!0:s,u=t.labelBgStyle,c=u===void 0?{}:u,d=t.labelBgPadding,f=d===void 0?[2,4]:d,h=t.labelBgBorderRadius,g=h===void 0?2:h,p=t.children,w=t.className,y=gn(t,Nd),N=P.useRef(null),C=P.useState({x:0,y:0,width:0,height:0}),v=W(C,2),b=v[0],O=v[1],M=re(["react-flow__edge-textwrapper",w]);return P.useEffect(function(){if(N.current){var E=N.current.getBBox();O({x:E.x,y:E.y,width:E.width,height:E.height})}},[r]),typeof r>"u"||!r?null:U("g",{...Ed({transform:"translate(".concat(n-b.width/2," ").concat(o-b.height/2,")"),className:M},y),children:[l&&x("rect",{width:b.width+2*f[0],x:-f[0],y:-f[1],height:b.height+2*f[1],className:"react-flow__edge-textbg",style:c,rx:g,ry:g}),x("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:N,style:a,children:r}),p]})},Md=P.memo(Pd),vn=function(e){var t=e.path,n=e.centerX,o=e.centerY,r=e.label,i=e.labelStyle,a=e.labelShowBg,s=e.labelBgStyle,l=e.labelBgPadding,u=e.labelBgBorderRadius,c=e.style,d=e.markerEnd,f=e.markerStart,h=r?x(Md,{x:n,y:o,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u}):null;return U(ce,{children:[x("path",{style:c,d:t,className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h]})};function an(e){var t=e.pos,n=e.x1,o=e.y1,r=e.x2,i=e.y2,a,s;switch(t){case R.Left:case R.Right:a=.5*(n+r),s=o;break;case R.Top:case R.Bottom:a=n,s=.5*(o+i);break}return[a,s]}function Hi(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?R.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?R.Top:s,u=an({pos:r,x1:t,y1:n,x2:i,y2:a}),c=W(u,2),d=c[0],f=c[1],h=an({pos:l,x1:i,y1:a,x2:t,y2:n}),g=W(h,2),p=g[0],w=g[1];return"M".concat(t,",").concat(n," C").concat(d,",").concat(f," ").concat(p,",").concat(w," ").concat(i,",").concat(a)}function _d(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?R.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?R.Top:s,u=an({pos:r,x1:t,y1:n,x2:i,y2:a}),c=W(u,2),d=c[0],f=c[1],h=an({pos:l,x1:i,y1:a,x2:t,y2:n}),g=W(h,2),p=g[0],w=g[1],y=t*.125+d*.375+p*.375+i*.125,N=n*.125+f*.375+w*.375+a*.125,C=Math.abs(y-t),v=Math.abs(N-n);return[y,N,C,v]}var Li=P.memo(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.sourcePosition,a=i===void 0?R.Bottom:i,s=e.targetPosition,l=s===void 0?R.Top:s,u=e.label,c=e.labelStyle,d=e.labelShowBg,f=e.labelBgStyle,h=e.labelBgPadding,g=e.labelBgBorderRadius,p=e.style,w=e.markerEnd,y=e.markerStart,N={sourceX:t,sourceY:n,sourcePosition:a,targetX:o,targetY:r,targetPosition:l},C=Hi(N),v=_d(N),b=W(v,2),O=b[0],M=b[1];return x(vn,{path:C,centerX:O,centerY:M,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:p,markerEnd:w,markerStart:y})});function cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function kd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var ur=[R.Left,R.Right],Xi=function(t){var n=t.sourceX,o=t.sourceY,r=t.targetX,i=t.targetY,a=t.sourcePosition,s=a===void 0?R.Bottom:a,l=t.targetPosition,u=l===void 0?R.Top:l,c=ur.includes(s),d=ur.includes(u),f=c&&!d||d&&!c;if(f){var h=c?Math.abs(r-n):0,g=n>r?n-h:n+h,p=c?0:Math.abs(i-o),w=o<i?o+p:o-p;return[g,w,h,p]}var y=Math.abs(r-n)/2,N=r<n?r+y:r-y,C=Math.abs(i-o)/2,v=i<o?i+C:i-C;return[N,v,y,C]};function vt(e,t,n){return n===void 0?n:function(o){var r=t().edges.find(function(i){return i.id===e});n(o,kd({},r))}}var Pn=function(t,n,o){return"L ".concat(t,",").concat(n-o,"Q ").concat(t,",").concat(n," ").concat(t+o,",").concat(n)},Mn=function(t,n,o){return"L ".concat(t+o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-o)},_n=function(t,n,o){return"L ".concat(t,",").concat(n-o,"Q ").concat(t,",").concat(n," ").concat(t-o,",").concat(n)},kn=function(t,n,o){return"L ".concat(t-o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-o)},Dn=function(t,n,o){return"L ".concat(t+o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+o)},$n=function(t,n,o){return"L ".concat(t,",").concat(n+o,"Q ").concat(t,",").concat(n," ").concat(t+o,",").concat(n)},An=function(t,n,o){return"L ".concat(t,",").concat(n+o,"Q ").concat(t,",").concat(n," ").concat(t-o,",").concat(n)},Tn=function(t,n,o){return"L ".concat(t-o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+o)};function qn(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?R.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?R.Top:s,u=e.borderRadius,c=u===void 0?5:u,d=e.centerX,f=e.centerY,h=Xi({sourceX:t,sourceY:n,targetX:i,targetY:a}),g=W(h,4),p=g[0],w=g[1],y=g[2],N=g[3],C=Math.min(c,Math.abs(i-t)),v=Math.min(c,Math.abs(a-n)),b=Math.min(C,v,y,N),O=[R.Left,R.Right],M=typeof d<"u"?d:p,E=typeof f<"u"?f:w,_=null,I=null;return t<=i?(_=n<=a?Pn(t,E,b):$n(t,E,b),I=n<=a?Tn(i,E,b):kn(i,E,b)):(_=n<a?_n(t,E,b):An(t,E,b),I=n<a?Dn(i,E,b):Mn(i,E,b)),O.includes(r)&&O.includes(l)?t<=i?(_=n<=a?Tn(M,n,b):kn(M,n,b),I=n<=a?Pn(M,a,b):$n(M,a,b)):(r===R.Right&&l===R.Left||r===R.Left&&l===R.Right||r===R.Left&&l===R.Left)&&(_=n<=a?Dn(M,n,b):Mn(M,n,b),I=n<=a?_n(M,a,b):An(M,a,b)):O.includes(r)&&!O.includes(l)?(t<=i?_=n<=a?Tn(i,n,b):kn(i,n,b):_=n<=a?Dn(i,n,b):Mn(i,n,b),I=""):!O.includes(r)&&O.includes(l)&&(t<=i?_=n<=a?Pn(t,a,b):$n(t,a,b):_=n<=a?_n(t,a,b):An(t,a,b),I=""),"M ".concat(t,",").concat(n).concat(_).concat(I,"L ").concat(i,",").concat(a)}var uo=P.memo(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.label,a=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,u=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.sourcePosition,h=f===void 0?R.Bottom:f,g=e.targetPosition,p=g===void 0?R.Top:g,w=e.markerEnd,y=e.markerStart,N=e.borderRadius,C=N===void 0?5:N,v=Xi({sourceX:t,sourceY:n,targetX:o,targetY:r,sourcePosition:h,targetPosition:p}),b=W(v,2),O=b[0],M=b[1],E=qn({sourceX:t,sourceY:n,sourcePosition:h,targetX:o,targetY:r,targetPosition:p,borderRadius:C});return x(vn,{path:E,centerX:O,centerY:M,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:w,markerStart:y})});function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Vi=P.memo(function(e){return x(uo,{...fr(fr({},e),{},{borderRadius:0})})}),Yi=P.memo(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.label,a=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,u=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.markerEnd,h=e.markerStart,g=Math.abs(r-n)/2,p=r<n?r+g:r-g,w=Math.abs(o-t)/2,y=o<t?o+w:o-w,N="M ".concat(t,",").concat(n,"L ").concat(o,",").concat(r);return x(vn,{path:N,centerX:y,centerY:p,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:f,markerStart:h})});function Zt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function sn(e){var t=e.pos,n=e.x1,o=e.y1,r=e.x2,i=e.y2,a=e.c,s,l;switch(t){case R.Left:s=n-Zt(n-r,a),l=o;break;case R.Right:s=n+Zt(r-n,a),l=o;break;case R.Top:s=n,l=o-Zt(o-i,a);break;case R.Bottom:s=n,l=o+Zt(i-o,a);break}return[s,l]}function Zi(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?R.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?R.Top:s,u=e.curvature,c=u===void 0?.25:u,d=sn({pos:r,x1:t,y1:n,x2:i,y2:a,c}),f=W(d,2),h=f[0],g=f[1],p=sn({pos:l,x1:i,y1:a,x2:t,y2:n,c}),w=W(p,2),y=w[0],N=w[1];return"M".concat(t,",").concat(n," C").concat(h,",").concat(g," ").concat(y,",").concat(N," ").concat(i,",").concat(a)}function Dd(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?R.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?R.Top:s,u=e.curvature,c=u===void 0?.25:u,d=sn({pos:r,x1:t,y1:n,x2:i,y2:a,c}),f=W(d,2),h=f[0],g=f[1],p=sn({pos:l,x1:i,y1:a,x2:t,y2:n,c}),w=W(p,2),y=w[0],N=w[1],C=t*.125+h*.375+y*.375+i*.125,v=n*.125+g*.375+N*.375+a*.125,b=Math.abs(C-t),O=Math.abs(v-n);return[C,v,b,O]}var Qn=P.memo(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.sourcePosition,a=i===void 0?R.Bottom:i,s=e.targetPosition,l=s===void 0?R.Top:s,u=e.label,c=e.labelStyle,d=e.labelShowBg,f=e.labelBgStyle,h=e.labelBgPadding,g=e.labelBgBorderRadius,p=e.style,w=e.markerEnd,y=e.markerStart,N=e.curvature,C={sourceX:t,sourceY:n,sourcePosition:a,targetX:o,targetY:r,targetPosition:l,curvature:N},v=Zi(C),b=Dd(C),O=W(b,2),M=O[0],E=O[1];return x(vn,{path:v,centerX:M,centerY:E,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:p,markerEnd:w,markerStart:y})}),fo=P.createContext(null),$d=fo.Provider;fo.Consumer;function Jn(e,t,n,o,r,i,a){var s=a.elementFromPoint(e.clientX,e.clientY),l=(s==null?void 0:s.classList.contains("target"))||!1,u=(s==null?void 0:s.classList.contains("source"))||!1,c={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(l||u)){c.isHoveringHandle=!0;var d=s.getAttribute("data-nodeid"),f=s.getAttribute("data-handleid"),h=n?{source:d,sourceHandle:f,target:o,targetHandle:r}:{source:o,sourceHandle:r,target:d,targetHandle:f};c.connection=h;var g=t===st.Strict?n&&u||!n&&l:!0;g&&(c.isValid=i(h))}return c}function zn(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Ui(e){var t=e.event,n=e.handleId,o=e.nodeId,r=e.onConnect,i=e.isTarget,a=e.getState,s=e.setState,l=e.isValidConnection,u=e.elementEdgeUpdaterType,c=e.onEdgeUpdateEnd,d=t.target.closest(".react-flow"),f=xi(t.target);if(!f)return;var h=f.elementFromPoint(t.clientX,t.clientY),g=h==null?void 0:h.classList.contains("target"),p=h==null?void 0:h.classList.contains("source");if(!d||!g&&!p&&!u)return;var w=a(),y=w.onConnectStart,N=w.connectionMode,C=u||(g?"target":"source"),v=d.getBoundingClientRect(),b;s({connectionPosition:{x:t.clientX-v.left,y:t.clientY-v.top},connectionNodeId:o,connectionHandleId:n,connectionHandleType:C}),y==null||y(t,{nodeId:o,handleId:n,handleType:C});function O(E){s({connectionPosition:{x:E.clientX-v.left,y:E.clientY-v.top}});var _=Jn(E,N,i,o,n,l,f),I=_.connection,z=_.elementBelow,L=_.isValid,X=_.isHoveringHandle;if(!X)return zn(b);I.source!==I.target&&z&&(zn(b),b=z,z.classList.add("react-flow__handle-connecting"),z.classList.toggle("react-flow__handle-valid",L))}function M(E){var _=a(),I=_.onConnectStop,z=_.onConnectEnd,L=Jn(E,N,i,o,n,l,f),X=L.connection,m=L.isValid;I==null||I(E),m&&(r==null||r(X)),z==null||z(E),u&&c&&c(E),zn(b),s({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),f.removeEventListener("mousemove",O),f.removeEventListener("mouseup",M)}f.addEventListener("mousemove",O),f.addEventListener("mouseup",M)}var Ad=["type","position","isValidConnection","isConnectable","id","onConnect","children","className","onMouseDown"];function hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Td=function(){return!0},zd=function(t){return{connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick}},Ki=P.forwardRef(function(e,t){var n=e.type,o=n===void 0?"source":n,r=e.position,i=r===void 0?R.Top:r,a=e.isValidConnection,s=a===void 0?Td:a,l=e.isConnectable,u=l===void 0?!0:l,c=e.id,d=e.onConnect,f=e.children,h=e.className,g=e.onMouseDown,p=gn(e,Ad),w=oe(),y=P.useContext(fo),N=ee(zd,ae),C=N.connectionStartHandle,v=N.connectOnClick,b=c||null,O=o==="target",M=function(z){var L=w.getState(),X=L.defaultEdgeOptions,m=L.onConnect,k=L.hasDefaultEdges,S=In(In({},X),z);if(k){var D=w.getState(),A=D.edges;w.setState({edges:Fu(S,A)})}m==null||m(S),d==null||d(S)},E=function(z){z.button===0&&Ui({event:z,handleId:b,nodeId:y,onConnect:M,isTarget:O,getState:w.getState,setState:w.setState,isValidConnection:s}),g==null||g(z)},_=function(z){var L=w.getState(),X=L.onClickConnectStart,m=L.onClickConnectStop,k=L.onClickConnectEnd,S=L.connectionMode;if(!C){X==null||X(z,{nodeId:y,handleId:b,handleType:o}),w.setState({connectionStartHandle:{nodeId:y,type:o,handleId:b}});return}var D=xi(z.target),A=Jn(z,S,C.type==="target",C.nodeId,C.handleId||null,s,D),$=A.connection,T=A.isValid;m==null||m(z),T&&M($),k==null||k(z),w.setState({connectionStartHandle:null})};return x("div",{...In({"data-handleid":b,"data-nodeid":y,"data-handlepos":i,className:re(["react-flow__handle","react-flow__handle-".concat(i),"nodrag",h,{source:!O,target:O,connectable:u,connecting:(C==null?void 0:C.nodeId)===y&&(C==null?void 0:C.handleId)===b&&(C==null?void 0:C.type)===o}]),onMouseDown:E,onClick:v?_:void 0,ref:t},p),children:f})});Ki.displayName="Handle";var ut=P.memo(Ki),Fi=function(t){var n=t.data,o=t.isConnectable,r=t.targetPosition,i=r===void 0?R.Top:r,a=t.sourcePosition,s=a===void 0?R.Bottom:a;return U(ce,{children:[x(ut,{type:"target",position:i,isConnectable:o}),n==null?void 0:n.label,x(ut,{type:"source",position:s,isConnectable:o})]})};Fi.displayName="DefaultNode";var eo=P.memo(Fi),Wi=function(t){var n=t.data,o=t.isConnectable,r=t.sourcePosition,i=r===void 0?R.Bottom:r;return U(ce,{children:[n==null?void 0:n.label,x(ut,{type:"source",position:i,isConnectable:o})]})};Wi.displayName="InputNode";var Gi=P.memo(Wi),qi=function(t){var n=t.data,o=t.isConnectable,r=t.targetPosition,i=r===void 0?R.Top:r;return U(ce,{children:[x(ut,{type:"target",position:i,isConnectable:o}),n==null?void 0:n.label]})};qi.displayName="OutputNode";var Qi=P.memo(qi),Id=function(t){return{selectedNodes:Array.from(t.nodeInternals.values()).filter(function(n){return n.selected}),selectedEdges:t.edges.filter(function(n){return n.selected})}},Bd=function(t,n){var o=t.selectedNodes.map(function(s){return s.id}),r=n.selectedNodes.map(function(s){return s.id}),i=t.selectedEdges.map(function(s){return s.id}),a=n.selectedEdges.map(function(s){return s.id});return ae(o,r)&&ae(i,a)};function Rd(e){var t=e.onSelectionChange,n=ee(Id,Bd),o=n.selectedNodes,r=n.selectedEdges;return P.useEffect(function(){t({nodes:o,edges:r})},[o,r]),null}var jd=P.memo(Rd),Hd=function(t){return{setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset}};function Pe(e,t){P.useEffect(function(){typeof e<"u"&&t(e)},[e])}function J(e,t,n){P.useEffect(function(){typeof t<"u"&&n(q({},e,t))},[t])}var Ld=function(t){var n=t.nodes,o=t.edges,r=t.defaultNodes,i=t.defaultEdges,a=t.onConnect,s=t.onConnectStart,l=t.onConnectStop,u=t.onConnectEnd,c=t.onClickConnectStart,d=t.onClickConnectStop,f=t.onClickConnectEnd,h=t.nodesDraggable,g=t.nodesConnectable,p=t.minZoom,w=t.maxZoom,y=t.nodeExtent,N=t.onNodesChange,C=t.onEdgesChange,v=t.elementsSelectable,b=t.connectionMode,O=t.snapGrid,M=t.snapToGrid,E=t.translateExtent,_=t.connectOnClick,I=t.defaultEdgeOptions,z=t.fitView,L=t.fitViewOptions,X=t.onNodesDelete,m=t.onEdgesDelete,k=t.onNodeDrag,S=t.onNodeDragStart,D=t.onNodeDragStop,A=t.onSelectionDrag,$=t.onSelectionDragStart,T=t.onSelectionDragStop,j=ee(Hd,ae),H=j.setNodes,V=j.setEdges,Z=j.setDefaultNodesAndEdges,F=j.setMinZoom,G=j.setMaxZoom,B=j.setTranslateExtent,K=j.setNodeExtent,Q=j.reset,Y=oe();return P.useEffect(function(){return Z(r,i),function(){Q()}},[]),J("defaultEdgeOptions",I,Y.setState),J("connectionMode",b,Y.setState),J("onConnect",a,Y.setState),J("onConnectStart",s,Y.setState),J("onConnectStop",l,Y.setState),J("onConnectEnd",u,Y.setState),J("onClickConnectStart",c,Y.setState),J("onClickConnectStop",d,Y.setState),J("onClickConnectEnd",f,Y.setState),J("nodesDraggable",h,Y.setState),J("nodesConnectable",g,Y.setState),J("elementsSelectable",v,Y.setState),J("snapToGrid",M,Y.setState),J("snapGrid",O,Y.setState),J("onNodesChange",N,Y.setState),J("onEdgesChange",C,Y.setState),J("connectOnClick",_,Y.setState),J("fitViewOnInit",z,Y.setState),J("fitViewOnInitOptions",L,Y.setState),J("onNodesDelete",X,Y.setState),J("onEdgesDelete",m,Y.setState),J("onNodeDrag",k,Y.setState),J("onNodeDragStart",S,Y.setState),J("onNodeDragStop",D,Y.setState),J("onSelectionDrag",A,Y.setState),J("onSelectionDragStart",$,Y.setState),J("onSelectionDragStop",T,Y.setState),Pe(n,H),Pe(o,V),Pe(r,H),Pe(i,V),Pe(p,F),Pe(w,G),Pe(E,B),Pe(y,K),null},Xd=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow .react-flow__connectionline{z-index:1001}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none;position:absolute}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}",Vd=Xd,Yd=".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-group.selected,.react-flow__node-input.selected,.react-flow__node-output.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-default.selectable.selected,.react-flow__node-group.selectable.selected,.react-flow__node-input.selectable.selected,.react-flow__node-output.selectable.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}",Zd=Yd,Ud=function(t,n,o){return o===R.Left?t-n:o===R.Right?t+n:t},Kd=function(t,n,o){return o===R.Top?t-n:o===R.Bottom?t+n:t},gr=function(t){var n=t.className,o=t.position,r=t.centerX,i=t.centerY,a=t.radius,s=a===void 0?10:a;return x("circle",{className:re(["react-flow__edgeupdater",n]),cx:Ud(r,s,o),cy:Kd(i,s,o),r:s,stroke:"transparent",fill:"transparent"})},Ge=function(e){var t=function(o){var r=o.id,i=o.className,a=o.type,s=o.data,l=o.onClick,u=o.onEdgeDoubleClick,c=o.selected,d=o.animated,f=o.label,h=o.labelStyle,g=o.labelShowBg,p=o.labelBgStyle,w=o.labelBgPadding,y=o.labelBgBorderRadius,N=o.style,C=o.source,v=o.target,b=o.sourceX,O=o.sourceY,M=o.targetX,E=o.targetY,_=o.sourcePosition,I=o.targetPosition,z=o.elementsSelectable,L=o.hidden,X=o.sourceHandleId,m=o.targetHandleId,k=o.onContextMenu,S=o.onMouseEnter,D=o.onMouseMove,A=o.onMouseLeave,$=o.edgeUpdaterRadius,T=o.onEdgeUpdate,j=o.onEdgeUpdateStart,H=o.onEdgeUpdateEnd,V=o.markerEnd,Z=o.markerStart,F=o.rfId,G=P.useState(!1),B=W(G,2),K=B[0],Q=B[1],Y=oe(),ne=function(he){var ge=Y.getState(),Ze=ge.edges,Ue=ge.addSelectedEdges,Ne=Ze.find(function(Ke){return Ke.id===r});z&&(Y.setState({nodesSelectionActive:!1}),Ue([r])),l==null||l(he,Ne)},le=vt(r,Y.getState,u),be=vt(r,Y.getState,k),Oe=vt(r,Y.getState,S),dt=vt(r,Y.getState,D),Xe=vt(r,Y.getState,A),De=function(he,ge){var Ze=ge?v:C,Ue=(ge?m:X)||null,Ne=ge?"target":"source",Ke=function(){return!0},yn=ge,Fe=Y.getState().edges.find(function(Ee){return Ee.id===r});j==null||j(he,Fe,Ne);var bn=H?function(Ee){return H(Ee,Fe,Ne)}:void 0,Tt=function(zt){return T==null?void 0:T(Fe,zt)};Ui({event:he,handleId:Ue,nodeId:Ze,onConnect:Tt,isTarget:yn,getState:Y.getState,setState:Y.setState,isValidConnection:Ke,elementEdgeUpdaterType:Ne,onEdgeUpdateEnd:bn})},Ve=function(he){return De(he,!0)},$e=function(he){return De(he,!1)},Ae=function(){return Q(!0)},Ye=function(){return Q(!1)},Dt=P.useMemo(function(){return"url(#".concat(Wn(Z,F),")")},[Z,F]),pn=P.useMemo(function(){return"url(#".concat(Wn(V,F),")")},[V,F]);if(L)return null;var $t=!z&&!l,At=typeof T<"u",mn=re(["react-flow__edge","react-flow__edge-".concat(a),i,{selected:c,animated:d,inactive:$t,updating:K}]);return U("g",{className:mn,onClick:ne,onDoubleClick:le,onContextMenu:be,onMouseEnter:Oe,onMouseMove:dt,onMouseLeave:Xe,children:[x(e,{id:r,source:C,target:v,selected:c,animated:d,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:p,labelBgPadding:w,labelBgBorderRadius:y,data:s,style:N,sourceX:b,sourceY:O,targetX:M,targetY:E,sourcePosition:_,targetPosition:I,sourceHandleId:X,targetHandleId:m,markerStart:Dt,markerEnd:pn,"data-testid":"rf__edge-".concat(r)}),At&&x("g",{onMouseDown:Ve,onMouseEnter:Ae,onMouseOut:Ye,children:x(gr,{position:_,centerX:b,centerY:O,radius:$})}),At&&x("g",{onMouseDown:$e,onMouseEnter:Ae,onMouseOut:Ye,children:x(gr,{position:I,centerX:M,centerY:E,radius:$})})]})};return t.displayName="EdgeWrapper",P.memo(t)};function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function pr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Fd(e){var t={default:Ge(e.default||Qn),straight:Ge(e.bezier||Yi),step:Ge(e.step||Vi),smoothstep:Ge(e.step||uo),simplebezier:Ge(e.simplebezier||Li)},n={},o=Object.keys(e).filter(function(r){return!["default","bezier"].includes(r)}).reduce(function(r,i){return r[i]=Ge(e[i]||Qn),r},n);return pr(pr({},t),o)}function mr(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,a=(n==null?void 0:n.height)||t.height;switch(e){case R.Top:return{x:o+i/2,y:r};case R.Right:return{x:o+i,y:r+a/2};case R.Bottom:return{x:o+i/2,y:r+a};case R.Left:return{x:o,y:r+a/2}}}function yr(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(o){return o.id===t})),typeof n>"u"?null:n}var Wd=function(t,n,o,r,i,a){var s=mr(o,t,n),l=mr(a,r,i);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function Gd(e){var t=e.sourcePos,n=e.targetPos,o=e.sourceWidth,r=e.sourceHeight,i=e.targetWidth,a=e.targetHeight,s=e.width,l=e.height,u=e.transform,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+o,n.x+i),y2:Math.max(t.y+r,n.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);var d=ct({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:l/u[2]}),f=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),h=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y)),g=Math.ceil(f*h);return g>0}function br(e,t){var n,o,r,i,a,s=e.get(t),l=(s==null||(n=s[te])===null||n===void 0?void 0:n.handleBounds)||null,u=!s||!l||!s.width||!s.height||typeof((o=s.positionAbsolute)===null||o===void 0?void 0:o.x)>"u"||typeof((r=s.positionAbsolute)===null||r===void 0?void 0:r.y)>"u";return[{x:(s==null||(i=s.positionAbsolute)===null||i===void 0?void 0:i.x)||0,y:(s==null||(a=s.positionAbsolute)===null||a===void 0?void 0:a.y)||0,width:(s==null?void 0:s.width)||0,height:(s==null?void 0:s.height)||0},l,!u]}var qd=typeof document<"u"?document:null,ln=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:qd},n=P.useState(!1),o=W(n,2),r=o[0],i=o[1],a=P.useRef(new Set([])),s=P.useMemo(function(){if(e!==null){var d=Array.isArray(e)?e:[e],f=d.filter(function(g){return typeof g=="string"}).map(function(g){return g.split("+")}),h=f.reduce(function(g,p){return g.concat.apply(g,He(p))},[]);return[f,h]}return[[],[]]},[e]),l=W(s,2),u=l[0],c=l[1];return P.useEffect(function(){if(e!==null){var d,f,h=function(y){if(Sr(y))return!1;var N=xr(y.code,c);a.current.add(y[N]),wr(u,a.current,!1)&&(y.preventDefault(),i(!0))},g=function(y){if(Sr(y))return!1;var N=xr(y.code,c);wr(u,a.current,!0)?(i(!1),a.current.clear()):a.current.delete(y[N])},p=function(){a.current.clear(),i(!1)};return t==null||(d=t.target)===null||d===void 0||d.addEventListener("keydown",h),t==null||(f=t.target)===null||f===void 0||f.addEventListener("keyup",g),window.addEventListener("blur",p),function(){var w,y;t==null||(w=t.target)===null||w===void 0||w.removeEventListener("keydown",h),t==null||(y=t.target)===null||y===void 0||y.removeEventListener("keyup",g),window.removeEventListener("blur",p)}}},[e,i]),r};function wr(e,t,n){return e.filter(function(o){return n||o.length===t.size}).some(function(o){return o.every(function(r){return t.has(r)})})}function xr(e,t){return t.includes(e)?"code":"key"}function Sr(e){var t,n=((t=e.composedPath)===null||t===void 0?void 0:t.call(e)[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))}var Qd=function(t){return{onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange}},Jd=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,o=oe(),r=ee(Qd,ae),i=r.onNodesChange,a=r.onEdgesChange,s=ln(t),l=ln(n);P.useEffect(function(){var u=o.getState(),c=u.nodeInternals,d=u.edges,f=u.hasDefaultNodes,h=u.hasDefaultEdges,g=u.onNodesDelete,p=u.onEdgesDelete,w=Array.from(c.values()),y=w.reduce(function(E,_){return(!_.selected&&_.parentNode&&E.find(function(I){return I.id===_.parentNode})||_.selected)&&E.push(_),E},[]),N=d.filter(function(E){return E.selected});if(s&&(y||N)){var C=_i(y,d),v=[].concat(He(N),He(C)),b=v.reduce(function(E,_){return E.includes(_.id)||E.push(_.id),E},[]);if((h||f)&&(h&&o.setState({edges:d.filter(function(E){return!b.includes(E.id)})}),f&&(y.forEach(function(E){c.delete(E.id)}),o.setState({nodeInternals:new Map(c)}))),b.length>0&&(p==null||p(v),a)){var O=b.map(function(E){return{id:E,type:"remove"}});a(O)}if(y.length>0&&(g==null||g(y),i)){var M=y.map(function(E){return{id:E.id,type:"remove"}});i(M)}o.setState({nodesSelectionActive:!1})}},[s,i,a]),P.useEffect(function(){o.setState({multiSelectionActive:l})},[l])};function ef(e){var t=oe();P.useEffect(function(){var n,o=function(){if(e.current){var i=lo(e.current);t.setState({width:i.width||500,height:i.height||500})}};return o(),window.onresize=o,e.current&&(n=new ResizeObserver(function(){return o()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])}var tf=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},Bn=function(t){return{x:t.x,y:t.y,zoom:t.k}},Ut=function(t,n){return t.target.closest(".".concat(n))},nf=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler}},of=function(t){var n=t.onMove,o=t.onMoveStart,r=t.onMoveEnd,i=t.zoomOnScroll,a=i===void 0?!0:i,s=t.zoomOnPinch,l=s===void 0?!0:s,u=t.panOnScroll,c=u===void 0?!1:u,d=t.panOnScrollSpeed,f=d===void 0?.5:d,h=t.panOnScrollMode,g=h===void 0?ot.Free:h,p=t.zoomOnDoubleClick,w=p===void 0?!0:p,y=t.selectionKeyPressed,N=t.elementsSelectable,C=t.panOnDrag,v=C===void 0?!0:C,b=t.translateExtent,O=t.minZoom,M=t.maxZoom,E=t.defaultZoom,_=E===void 0?1:E,I=t.defaultPosition,z=I===void 0?[0,0]:I,L=t.zoomActivationKeyCode,X=t.preventScrolling,m=X===void 0?!0:X,k=t.children,S=t.noWheelClassName,D=t.noPanClassName,A=oe(),$=P.useRef(!1),T=P.useRef(null),j=P.useRef({x:0,y:0,zoom:0}),H=ee(nf,ae),V=H.d3Zoom,Z=H.d3Selection,F=H.d3ZoomHandler,G=ln(L);return ef(T),P.useEffect(function(){if(T.current){var B,K=Ru().scaleExtent([O,M]).translateExtent(b),Q=ue(T.current).call(K),Y=rt(z[0],b[0][0],b[1][0]),ne=rt(z[1],b[0][1],b[1][1]),le=rt(_,O,M),be=je.translate(Y,ne).scale(le);K.transform(Q,be),A.setState({d3Zoom:K,d3Selection:Q,d3ZoomHandler:Q.on("wheel.zoom"),transform:[Y,ne,le],domNode:(B=Q.node())===null||B===void 0?void 0:B.closest(".react-flow")})}},[]),P.useEffect(function(){Z&&V&&(c&&!G?Z.on("wheel",function(B){if(Ut(B,S))return!1;B.preventDefault(),B.stopImmediatePropagation();var K=Z.property("__zoom").k||1;if(B.ctrlKey&&l){var Q=pe(B),Y=-B.deltaY*(B.deltaMode===1?.05:B.deltaMode?1:.002)*10,ne=K*Math.pow(2,Y);V.scaleTo(Z,ne,Q);return}var le=B.deltaMode===1?20:1,be=g===ot.Vertical?0:B.deltaX*le,Oe=g===ot.Horizontal?0:B.deltaY*le;V.translateBy(Z,-(be/K)*f,-(Oe/K)*f)}).on("wheel.zoom",null):typeof F<"u"&&Z.on("wheel",function(B){if(!m||Ut(B,S))return null;B.preventDefault()}).on("wheel.zoom",F))},[c,g,Z,V,F,G,l,m,S]),P.useEffect(function(){V&&(y&&!$.current?V.on("zoom",null):y||V.on("zoom",function(B){if(A.setState({transform:[B.transform.x,B.transform.y,B.transform.k]}),n){var K=Bn(B.transform);n(B.sourceEvent,K)}}))},[y,V,n]),P.useEffect(function(){V&&V.on("start",function(B){if($.current=!0,o){var K=Bn(B.transform);j.current=K,o(B.sourceEvent,K)}})},[V,o]),P.useEffect(function(){V&&V.on("end",function(B){if($.current=!1,r&&tf(j.current,B.transform)){var K=Bn(B.transform);j.current=K,r(B.sourceEvent,K)}})},[V,r]),P.useEffect(function(){V&&V.filter(function(B){var K=G||a,Q=l&&B.ctrlKey;return!v&&!K&&!c&&!w&&!l||y||!w&&B.type==="dblclick"||Ut(B,S)&&B.type==="wheel"||Ut(B,D)&&B.type!=="wheel"||!l&&B.ctrlKey&&B.type==="wheel"||!K&&!c&&!Q&&B.type==="wheel"||!v&&(B.type==="mousedown"||B.type==="touchstart")?!1:(!B.ctrlKey||B.type==="wheel")&&!B.button})},[V,a,l,c,w,v,y,N,G]),x("div",{className:"react-flow__renderer react-flow__container",ref:T,children:k})};function Cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Nr(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var rf=function(t){return{userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable}},Er={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},af=P.memo(function(e){var t=e.selectionKeyPressed,n=oe(),o=P.useRef(0),r=P.useRef(0),i=P.useRef(),a=P.useState(Er),s=W(a,2),l=s[0],u=s[1],c=ee(rf,ae),d=c.userSelectionActive,f=c.elementsSelectable,h=d||t;if(!f||!h)return null;var g=function(){u(Er),n.setState({userSelectionActive:!1}),o.current=0,r.current=0},p=function(v){var b=v.target.closest(".react-flow");i.current=b.getBoundingClientRect();var O=Nr(v,i.current);u({width:0,height:0,startX:O.x,startY:O.y,x:O.x,y:O.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})},w=function(v){var b,O;if(!(!t||!l.draw||!i.current)){var M=Nr(v,i.current),E=(b=l.startX)!==null&&b!==void 0?b:0,_=(O=l.startY)!==null&&O!==void 0?O:0,I=Or(Or({},l),{},{x:M.x<E?M.x:E,y:M.y<_?M.y:_,width:Math.abs(M.x-E),height:Math.abs(M.y-_)}),z=n.getState(),L=z.nodeInternals,X=z.edges,m=z.transform,k=z.onNodesChange,S=z.onEdgesChange,D=Array.from(L.values()),A=Mi(L,I,m,!1,!0),$=_i(A,X).map(function(V){return V.id}),T=A.map(function(V){return V.id});if(o.current!==T.length){o.current=T.length;var j=Je(D,T);j.length&&(k==null||k(j))}if(r.current!==$.length){r.current=$.length;var H=Je(X,$);H.length&&(S==null||S(H))}u(I)}},y=function(){n.setState({nodesSelectionActive:o.current>0}),g()},N=function(){n.setState({nodesSelectionActive:!1}),g()};return x("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:p,onMouseMove:w,onMouseUp:y,onMouseLeave:N,children:l.draw&&x("div",{className:"react-flow__selection react-flow__container",style:{width:l.width,height:l.height,transform:"translate(".concat(l.x,"px, ").concat(l.y,"px)")}})})});function Pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Ji(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return n?n.selected?!0:Ji(n,t):!1}function _r(e,t,n){var o=e;do{var r;if((r=o)!==null&&r!==void 0&&r.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function sf(e,t,n){return Array.from(e.values()).filter(function(o){return(o.selected||o.id===n)&&(!o.parentNode||!Ji(o,e))}).map(function(o){var r,i,a,s;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:t.x-((r=(i=o.positionAbsolute)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0),y:t.y-((a=(s=o.positionAbsolute)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode,width:o.width,height:o.height}})}function lf(e,t,n,o,r,i){var a=W(o,2),s=a[0],l=a[1],u=e.extent||i,c={x:t.x-e.distance.x,y:t.y-e.distance.y};if(n&&(c.x=s*Math.round(c.x/s),c.y=l*Math.round(c.y/l)),e.extent==="parent")if(e.parentNode&&e.width&&e.height){var d=r.get(e.parentNode);u=d!=null&&d.positionAbsolute&&d!==null&&d!==void 0&&d.width&&d!==null&&d!==void 0&&d.height?[[d.positionAbsolute.x,d.positionAbsolute.y],[d.positionAbsolute.x+d.width-e.width,d.positionAbsolute.y+d.height-e.height]]:u}else u=i;else if(e.extent&&e.parentNode){var f,h,g,p,w=r.get(e.parentNode),y=(f=w==null||(h=w.positionAbsolute)===null||h===void 0?void 0:h.x)!==null&&f!==void 0?f:0,N=(g=w==null||(p=w.positionAbsolute)===null||p===void 0?void 0:p.y)!==null&&g!==void 0?g:0;u=[[e.extent[0][0]+y,e.extent[0][1]+N],[e.extent[1][0]+y,e.extent[1][1]+N]]}var C={x:0,y:0};if(e.parentNode){var v,b,O,M,E=r.get(e.parentNode);C={x:(v=E==null||(b=E.positionAbsolute)===null||b===void 0?void 0:b.x)!==null&&v!==void 0?v:0,y:(O=E==null||(M=E.positionAbsolute)===null||M===void 0?void 0:M.y)!==null&&O!==void 0?O:0}}return e.positionAbsolute=u?wi(c,u):c,e.position={x:e.positionAbsolute.x-C.x,y:e.positionAbsolute.y-C.y},e}function Rn(e){var t=e.nodeId,n=e.dragItems,o=e.nodeInternals,r=n.map(function(i){var a=o.get(i.id);return Mr(Mr({},a),{},{position:i.position,positionAbsolute:i.positionAbsolute})});return[t?r.find(function(i){return i.id===t}):r[0],r]}function jn(e){return function(t,n,o){return e==null?void 0:e(t,o)}}function ea(e){var t=e.nodeRef,n=e.disabled,o=n===void 0?!1:n,r=e.noDragClassName,i=e.handleSelector,a=e.nodeId,s=e.isSelectable,l=e.selectNodesOnDrag,u=P.useState(!1),c=W(u,2),d=c[0],f=c[1],h=oe(),g=P.useRef(),p=P.useRef({x:null,y:null}),w=P.useCallback(function(y){var N=y.sourceEvent,C=h.getState(),v=C.transform,b=C.snapGrid,O=C.snapToGrid,M=N.touches?N.touches[0].clientX:N.clientX,E=N.touches?N.touches[0].clientY:N.clientY,_=Pi({x:M,y:E},v,O,b);return _},[]);return P.useEffect(function(){if(t!=null&&t.current){var y=ue(t.current);if(o)y.on(".drag",null);else{var N=Fl().on("start",function(C){var v=h.getState(),b=v.nodeInternals,O=v.multiSelectionActive,M=v.unselectNodesAndEdges,E=v.onNodeDragStart,_=v.onSelectionDragStart,I=a?E:jn(_);if(!l&&!O&&a){var z;(z=b.get(a))!==null&&z!==void 0&&z.selected||M()}a&&s&&l&&Ei({id:a,store:h});var L=w(C);if(p.current=L,g.current=sf(b,L,a),I&&g.current){var X=Rn({nodeId:a,dragItems:g.current,nodeInternals:b}),m=W(X,2),k=m[0],S=m[1];I(C.sourceEvent,k,S)}}).on("drag",function(C){var v=h.getState(),b=v.updateNodePositions,O=v.snapToGrid,M=v.snapGrid,E=v.nodeInternals,_=v.nodeExtent,I=v.onNodeDrag,z=v.onSelectionDrag,L=w(C);if((p.current.x!==L.x||p.current.y!==L.y)&&g.current){p.current=L,g.current=g.current.map(function(A){return lf(A,L,O,M,E,_)});var X=a?I:jn(z);if(b(g.current,!0,!0),f(!0),X){var m=Rn({nodeId:a,dragItems:g.current,nodeInternals:E}),k=W(m,2),S=k[0],D=k[1];X(C.sourceEvent,S,D)}}C.on("end",function(A){if(f(!1),g.current){var $=h.getState(),T=$.updateNodePositions,j=$.nodeInternals,H=$.onNodeDragStop,V=$.onSelectionDragStop,Z=a?H:jn(V);if(T(g.current,!1,!1),Z){var F=Rn({nodeId:a,dragItems:g.current,nodeInternals:j}),G=W(F,2),B=G[0],K=G[1];Z(A.sourceEvent,B,K)}}})}).filter(function(C){var v=C.target,b=!C.button&&(!r||!_r(v,".".concat(r),t))&&(!i||_r(v,i,t));return b});return y.call(N),function(){y.on(".drag",null)}}}},[t,o,r,i,s,h,a,l,w]),d}function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function cf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var uf=function(t){return cf({transformString:"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")"),userSelectionActive:t.userSelectionActive},hn(Array.from(t.nodeInternals.values()).filter(function(n){return n.selected})))},df=function(t){var n=Array.from(t.nodeInternals.values()).filter(function(o){return o.selected});return hn(n)};function ff(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,o=oe(),r=ee(uf,ae),i=r.transformString,a=r.userSelectionActive,s=ee(df,ae),l=s.width,u=s.height,c=s.x,d=s.y,f=P.useRef(null);if(ea({nodeRef:f}),a||!l||!u)return null;var h=t?function(g){var p=Array.from(o.getState().nodeInternals.values()).filter(function(w){return w.selected});t(g,p)}:void 0;return x("div",{className:re(["react-flow__nodesselection","react-flow__container",n]),style:{transform:i},children:x("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,style:{width:l,height:u,top:d,left:c}})})}var hf=P.memo(ff),gf=function(t){return t.nodesSelectionActive},ta=function(t){var n=t.children,o=t.onPaneClick,r=t.onPaneContextMenu,i=t.onPaneScroll,a=t.deleteKeyCode,s=t.onMove,l=t.onMoveStart,u=t.onMoveEnd,c=t.selectionKeyCode,d=t.multiSelectionKeyCode,f=t.zoomActivationKeyCode,h=t.elementsSelectable,g=t.zoomOnScroll,p=t.zoomOnPinch,w=t.panOnScroll,y=t.panOnScrollSpeed,N=t.panOnScrollMode,C=t.zoomOnDoubleClick,v=t.panOnDrag,b=t.translateExtent,O=t.minZoom,M=t.maxZoom,E=t.defaultZoom,_=t.defaultPosition,I=t.preventScrolling,z=t.onSelectionContextMenu,L=t.noWheelClassName,X=t.noPanClassName,m=oe(),k=ee(gf),S=ln(c);Jd({deleteKeyCode:a,multiSelectionKeyCode:d});var D=function(j){o==null||o(j),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},A=r?function(T){return r(T)}:void 0,$=i?function(T){return i(T)}:void 0;return U(of,{onMove:s,onMoveStart:l,onMoveEnd:u,selectionKeyPressed:S,elementsSelectable:h,zoomOnScroll:g,zoomOnPinch:p,panOnScroll:w,panOnScrollSpeed:y,panOnScrollMode:N,zoomOnDoubleClick:C,panOnDrag:v,translateExtent:b,minZoom:O,maxZoom:M,defaultZoom:E,defaultPosition:_,zoomActivationKeyCode:f,preventScrolling:I,noWheelClassName:L,noPanClassName:X,children:[n,x(af,{selectionKeyPressed:S}),k&&x(hf,{onSelectionContextMenu:z,noPanClassName:X}),x("div",{className:"react-flow__pane react-flow__container",onClick:D,onContextMenu:A,onWheel:$})]})};ta.displayName="FlowRenderer";var vf=P.memo(ta);function pf(e){var t=ee(P.useCallback(function(n){return e?Mi(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values())},[e]));return t}var mf=function(t){return{nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions}},na=function(t){var n=ee(mf,ae),o=n.nodesDraggable,r=n.nodesConnectable,i=n.elementsSelectable,a=n.updateNodeDimensions,s=pf(t.onlyRenderVisibleElements),l=P.useRef(),u=P.useMemo(function(){if(typeof ResizeObserver>"u")return null;var c=new ResizeObserver(function(d){var f=d.map(function(h){return{id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}});a(f)});return l.current=c,c},[]);return P.useEffect(function(){return function(){var c;l==null||(c=l.current)===null||c===void 0||c.disconnect()}},[]),x("div",{className:"react-flow__nodes react-flow__container",children:s.map(function(c){var d,f,h,g,p,w,y,N=c.type||"default";t.nodeTypes[N]||(N="default");var C=t.nodeTypes[N]||t.nodeTypes.default,v=!!(c.draggable||o&&typeof c.draggable>"u"),b=!!(c.selectable||i&&typeof c.selectable>"u"),O=!!(c.connectable||r&&typeof c.connectable>"u");return x(C,{id:c.id,className:c.className,style:c.style,type:N,data:c.data,sourcePosition:c.sourcePosition||R.Bottom,targetPosition:c.targetPosition||R.Top,hidden:c.hidden,xPos:(d=(f=c.positionAbsolute)===null||f===void 0?void 0:f.x)!==null&&d!==void 0?d:0,yPos:(h=(g=c.positionAbsolute)===null||g===void 0?void 0:g.y)!==null&&h!==void 0?h:0,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!c.selected,isDraggable:v,isSelectable:b,isConnectable:O,resizeObserver:u,dragHandle:c.dragHandle,zIndex:(p=(w=c[te])===null||w===void 0?void 0:w.z)!==null&&p!==void 0?p:0,isParent:!!((y=c[te])!==null&&y!==void 0&&y.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!c.width&&!!c.height},c.id)})})};na.displayName="NodeRenderer";var yf=P.memo(na),qe;function Dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var bf=(qe={},q(qe,R.Left,R.Right),q(qe,R.Right,R.Left),q(qe,R.Top,R.Bottom),q(qe,R.Bottom,R.Top),qe),wf=function(e){var t,n,o,r,i,a=e.connectionNodeId,s=e.connectionHandleType,l=e.connectionLineStyle,u=e.connectionLineType,c=u===void 0?xe.Bezier:u,d=e.isConnectable,f=e.CustomConnectionLineComponent,h=ee(P.useCallback(function($){return{fromNode:$.nodeInternals.get(a),handleId:$.connectionHandleId,toX:($.connectionPosition.x-$.transform[0])/$.transform[2],toY:($.connectionPosition.y-$.transform[1])/$.transform[2]}},[a]),ae),g=h.fromNode,p=h.handleId,w=h.toX,y=h.toY,N=g==null||(t=g[te])===null||t===void 0?void 0:t.handleBounds;if(!g||!d||!(N!=null&&N[s]))return null;var C=N[s],v=p?C.find(function($){return $.id===p}):C[0],b=v?v.x+v.width/2:((n=g==null?void 0:g.width)!==null&&n!==void 0?n:0)/2,O=v?v.y+v.height/2:(o=g==null?void 0:g.height)!==null&&o!==void 0?o:0,M=((g==null||(r=g.positionAbsolute)===null||r===void 0?void 0:r.x)||0)+b,E=((g==null||(i=g.positionAbsolute)===null||i===void 0?void 0:i.y)||0)+O,_=v==null?void 0:v.position;if(!_)return null;var I=bf[_],z,L,X,m,k,S;switch(s){case"source":z=M,L=E,X=_,m=w,k=y,S=I;break;case"target":z=w,L=y,X=I,m=M,k=E,S=_;break}if(f)return x("g",{className:"react-flow__connection",children:x(f,{connectionLineType:c,connectionLineStyle:l,fromNode:g,fromHandle:v,fromX:M,fromY:E,toX:w,toY:y,fromPosition:_,toPosition:I,sourcePosition:X,targetPosition:S,sourceNode:g,sourceHandle:v,targetX:m,targetY:k,sourceX:z,sourceY:L})});var D="",A={sourceX:z,sourceY:L,sourcePosition:X,targetX:m,targetY:k,targetPosition:S};return c===xe.Bezier?D=Zi(A):c===xe.Step?D=qn($r($r({},A),{},{borderRadius:0})):c===xe.SmoothStep?D=qn(A):c===xe.SimpleBezier?D=Hi(A):D="M".concat(z,",").concat(L," ").concat(m,",").concat(k),x("g",{className:"react-flow__connection",children:x("path",{d:D,className:"react-flow__connection-path",style:l})})};function to(e){"@babel/helpers - typeof";return to=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},to(e)}var Kt,xf=function(t){var n=t.color,o=n===void 0?"none":n,r=t.strokeWidth,i=r===void 0?1:r;return x("polyline",{stroke:o,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:i,fill:"none",points:"-5,-4 0,0 -5,4"})},Sf=function(t){var n=t.color,o=n===void 0?"none":n,r=t.strokeWidth,i=r===void 0?1:r;return x("polyline",{stroke:o,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:i,fill:o,points:"-5,-4 0,0 -5,4 -5,-4"})},Ar=(Kt={},q(Kt,Mt.Arrow,xf),q(Kt,Mt.ArrowClosed,Sf),Kt);function Cf(e){var t=P.useMemo(function(){var n=Ar.hasOwnProperty(e);return n?Ar[e]:function(){return null}},[e]);return t}function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Of(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Nf=function(t){var n=t.id,o=t.type,r=t.color,i=t.width,a=i===void 0?12.5:i,s=t.height,l=s===void 0?12.5:s,u=t.markerUnits,c=u===void 0?"strokeWidth":u,d=t.strokeWidth,f=t.orient,h=f===void 0?"auto":f,g=Cf(o);return xt.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(a),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:c,orient:h,refX:"0",refY:"0"},xt.createElement(g,{color:r,strokeWidth:d}))},Ef=function(t){var n=t.defaultColor,o=t.rfId;return function(r){var i=[];return r.edges.reduce(function(a,s){return[s.markerStart,s.markerEnd].forEach(function(l){if(l&&to(l)==="object"){var u=Wn(l,o);i.includes(u)||(a.push(Of({id:u,color:l.color||n},l)),i.push(u))}}),a},[]).sort(function(a,s){return a.id.localeCompare(s.id)})}},oa=function(t){var n=t.defaultColor,o=t.rfId,r=ee(P.useCallback(Ef({defaultColor:n,rfId:o}),[n,o]),function(i,a){return!(i.length!==a.length||i.some(function(s,l){return s.id!==a[l].id}))});return x("defs",{children:r.map(function(i){return x(Nf,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id)})})};oa.displayName="MarkerDefinitions";var Pf=P.memo(oa),Mf=[{level:0,isMaxLevel:!0,edges:[]}];function _f(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=-1,r=e.reduce(function(a,s){var l=Oi(s.zIndex),u=l?s.zIndex:0;if(n){var c,d,f,h;u=l?s.zIndex:Math.max(((c=t.get(s.source))===null||c===void 0||(d=c[te])===null||d===void 0?void 0:d.z)||0,((f=t.get(s.target))===null||f===void 0||(h=f[te])===null||h===void 0?void 0:h.z)||0)}return a[u]?a[u].push(s):a[u]=[s],o=u>o?u:o,a},{}),i=Object.entries(r).map(function(a){var s=W(a,2),l=s[0],u=s[1],c=+l;return{edges:u,level:c,isMaxLevel:c===o}});return i.length===0?Mf:i}function kf(e,t,n){var o=ee(P.useCallback(function(r){return e?r.edges.filter(function(i){var a=t.get(i.source),s=t.get(i.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&Gd({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:s.width,targetHeight:s.height,width:r.width,height:r.height,transform:r.transform})}):r.edges},[e,t]));return _f(o,t,n)}var Df=function(t){return{connectionNodeId:t.connectionNodeId,connectionHandleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals}},ra=function(t){var n=ee(Df,ae),o=n.connectionNodeId,r=n.connectionHandleType,i=n.nodesConnectable,a=n.elementsSelectable,s=n.width,l=n.height,u=n.connectionMode,c=n.nodeInternals,d=kf(t.onlyRenderVisibleElements,c,t.elevateEdgesOnSelect);if(!s)return null;var f=t.connectionLineType,h=t.defaultMarkerColor,g=t.connectionLineStyle,p=t.connectionLineComponent,w=t.connectionLineContainerStyle,y=o&&r;return U(ce,{children:[d.map(function(N){var C=N.level,v=N.edges,b=N.isMaxLevel;return U("svg",{style:{zIndex:C},width:s,height:l,className:"react-flow__edges react-flow__container",children:[b&&x(Pf,{defaultColor:h,rfId:t.rfId}),x("g",{children:v.map(function(O){var M=br(c,O.source),E=W(M,3),_=E[0],I=E[1],z=E[2],L=br(c,O.target),X=W(L,3),m=X[0],k=X[1],S=X[2];if(!z||!S)return null;var D=O.type||"default";t.edgeTypes[D]||(console.warn('[React Flow]: Edge type "'.concat(D,'" not found. Using fallback type "default". Help: https://reactflow.dev/error#300')),D="default");var A=t.edgeTypes[D]||t.edgeTypes.default,$=u===st.Strict?k.target:k.target||k.source,T=yr(I.source,O.sourceHandle||null),j=yr($,O.targetHandle||null),H=(T==null?void 0:T.position)||R.Bottom,V=(j==null?void 0:j.position)||R.Top;if(!T||!j)return null;var Z=Wd(_,T,H,m,j,V),F=Z.sourceX,G=Z.sourceY,B=Z.targetX,K=Z.targetY;return x(A,{id:O.id,className:re([O.className,t.noPanClassName]),type:D,data:O.data,selected:!!O.selected,animated:!!O.animated,hidden:!!O.hidden,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,style:O.style,source:O.source,target:O.target,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerEnd:O.markerEnd,markerStart:O.markerStart,sourceX:F,sourceY:G,targetX:B,targetY:K,sourcePosition:H,targetPosition:V,elementsSelectable:a,onEdgeUpdate:t.onEdgeUpdate,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,onClick:t.onEdgeClick,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd,rfId:t.rfId},O.id)})})]},C)}),y&&x("svg",{style:w,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container",children:x(wf,{connectionNodeId:o,connectionHandleType:r,connectionLineStyle:g,connectionLineType:f,isConnectable:i,CustomConnectionLineComponent:p})})]})};ra.displayName="EdgeRenderer";var $f=P.memo(ra),Af=function(t){return"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")")};function Tf(e){var t=e.children,n=ee(Af);return x("div",{className:"react-flow__viewport react-flow__container",style:{transform:n},children:t})}function zf(e){var t=zi(),n=P.useRef(!1);P.useEffect(function(){!n.current&&t.viewportInitialized&&e&&(setTimeout(function(){return e(t)},1),n.current=!0)},[e,t.viewportInitialized])}var ia=function(t){var n=t.nodeTypes,o=t.edgeTypes,r=t.onMove,i=t.onMoveStart,a=t.onMoveEnd,s=t.onInit,l=t.onNodeClick,u=t.onEdgeClick,c=t.onNodeDoubleClick,d=t.onEdgeDoubleClick,f=t.onNodeMouseEnter,h=t.onNodeMouseMove,g=t.onNodeMouseLeave,p=t.onNodeContextMenu,w=t.onSelectionContextMenu,y=t.connectionLineType,N=t.connectionLineStyle,C=t.connectionLineComponent,v=t.connectionLineContainerStyle,b=t.selectionKeyCode,O=t.multiSelectionKeyCode,M=t.zoomActivationKeyCode,E=t.deleteKeyCode,_=t.onlyRenderVisibleElements,I=t.elementsSelectable,z=t.selectNodesOnDrag,L=t.translateExtent,X=t.minZoom,m=t.maxZoom,k=t.defaultZoom,S=t.defaultPosition,D=t.preventScrolling,A=t.defaultMarkerColor,$=t.zoomOnScroll,T=t.zoomOnPinch,j=t.panOnScroll,H=t.panOnScrollSpeed,V=t.panOnScrollMode,Z=t.zoomOnDoubleClick,F=t.panOnDrag,G=t.onPaneClick,B=t.onPaneScroll,K=t.onPaneContextMenu,Q=t.onEdgeUpdate,Y=t.onEdgeContextMenu,ne=t.onEdgeMouseEnter,le=t.onEdgeMouseMove,be=t.onEdgeMouseLeave,Oe=t.edgeUpdaterRadius,dt=t.onEdgeUpdateStart,Xe=t.onEdgeUpdateEnd,De=t.noDragClassName,Ve=t.noWheelClassName,$e=t.noPanClassName,Ae=t.elevateEdgesOnSelect,Ye=t.id;return zf(s),x(vf,{onPaneClick:G,onPaneContextMenu:K,onPaneScroll:B,deleteKeyCode:E,selectionKeyCode:b,multiSelectionKeyCode:O,zoomActivationKeyCode:M,elementsSelectable:I,onMove:r,onMoveStart:i,onMoveEnd:a,zoomOnScroll:$,zoomOnPinch:T,zoomOnDoubleClick:Z,panOnScroll:j,panOnScrollSpeed:H,panOnScrollMode:V,panOnDrag:F,translateExtent:L,minZoom:X,maxZoom:m,defaultZoom:k,defaultPosition:S,onSelectionContextMenu:w,preventScrolling:D,noDragClassName:De,noWheelClassName:Ve,noPanClassName:$e,children:U(Tf,{children:[x($f,{edgeTypes:o,onEdgeClick:u,onEdgeDoubleClick:d,connectionLineType:y,connectionLineStyle:N,connectionLineComponent:C,connectionLineContainerStyle:v,onEdgeUpdate:Q,onlyRenderVisibleElements:_,onEdgeContextMenu:Y,onEdgeMouseEnter:ne,onEdgeMouseMove:le,onEdgeMouseLeave:be,onEdgeUpdateStart:dt,onEdgeUpdateEnd:Xe,edgeUpdaterRadius:Oe,defaultMarkerColor:A,noPanClassName:$e,elevateEdgesOnSelect:!!Ae,rfId:Ye}),x(yf,{nodeTypes:n,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:p,selectNodesOnDrag:z,onlyRenderVisibleElements:_,noPanClassName:$e,noDragClassName:De})]})})};ia.displayName="GraphView";var If=P.memo(ia),aa=function(){return null};aa.displayName="GroupNode";function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Ir(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var pt=function(e){var t=function(o){var r=o.id,i=o.type,a=o.data,s=o.xPos,l=o.yPos,u=o.selected,c=o.onClick,d=o.onMouseEnter,f=o.onMouseMove,h=o.onMouseLeave,g=o.onContextMenu,p=o.onDoubleClick,w=o.style,y=o.className,N=o.isDraggable,C=o.isSelectable,v=o.isConnectable,b=o.selectNodesOnDrag,O=o.sourcePosition,M=o.targetPosition,E=o.hidden,_=o.resizeObserver,I=o.dragHandle,z=o.zIndex,L=o.isParent,X=o.noPanClassName,m=o.noDragClassName,k=o.initialized,S=oe(),D=P.useRef(null),A=P.useRef(O),$=P.useRef(M),T=P.useRef(i),j=C||N||c||d||f||h,H=gt(r,S.getState,d),V=gt(r,S.getState,f),Z=gt(r,S.getState,h),F=gt(r,S.getState,g),G=gt(r,S.getState,p),B=function(Y){if(C&&(!b||!N)&&Ei({id:r,store:S}),c){var ne=S.getState().nodeInternals.get(r);c(Y,Ir({},ne))}};P.useEffect(function(){if(D.current&&!E){var Q=D.current;return _==null||_.observe(Q),function(){return _==null?void 0:_.unobserve(Q)}}},[E]),P.useEffect(function(){var Q=T.current!==i,Y=A.current!==O,ne=$.current!==M;D.current&&(Q||Y||ne)&&(Q&&(T.current=i),Y&&(A.current=O),ne&&($.current=M),S.getState().updateNodeDimensions([{id:r,nodeElement:D.current,forceUpdate:!0}]))},[r,i,O,M]);var K=ea({nodeRef:D,disabled:E||!N,noDragClassName:m,handleSelector:I,nodeId:r,isSelectable:C,selectNodesOnDrag:b});return E?null:x("div",{className:re(["react-flow__node","react-flow__node-".concat(i),X,y,{selected:u,selectable:C,parent:L}]),ref:D,style:Ir({zIndex:z,transform:"translate(".concat(s,"px,").concat(l,"px)"),pointerEvents:j?"all":"none",visibility:k?"visible":"hidden"},w),onMouseEnter:H,onMouseMove:V,onMouseLeave:Z,onContextMenu:F,onClick:B,onDoubleClick:G,"data-testid":"rf__node-".concat(r),"data-id":r,children:x($d,{value:r,children:x(e,{id:r,data:a,type:i,xPos:s,yPos:l,selected:u,isConnectable:v,sourcePosition:O,targetPosition:M,dragging:K,dragHandle:I,zIndex:z})})})};return t.displayName="NodeWrapper",P.memo(t)};function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Br(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Bf(e){var t={input:pt(e.input||Gi),default:pt(e.default||eo),output:pt(e.output||Qi),group:pt(e.group||aa)},n={},o=Object.keys(e).filter(function(r){return!["input","default","output","group"].includes(r)}).reduce(function(r,i){return r[i]=pt(e[i]||eo),r},n);return Rr(Rr({},t),o)}function jr(e,t){P.useRef(null);var n=P.useMemo(function(){return t(e)},[e]);return n}function Hr(e){if(!(!e||typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var sa=function(t){var n=t.children,o=!0;try{oe()}catch{o=!1}return o?x(ce,{children:n}):x(Ai,{createStore:Ti,children:n})};sa.displayName="ReactFlowWrapper";var Rf=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onClickConnectStart","onClickConnectStop","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateEdgesOnSelect"];function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lr(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}Hr(Vd),Hr(Zd);var jf={input:Gi,default:eo,output:Qi},Hf={default:Qn,straight:Yi,step:Vi,smoothstep:uo,simplebezier:Li},Lf=[15,15],Xf=[0,0],la=P.forwardRef(function(e,t){var n=e.nodes,o=e.edges,r=e.defaultNodes,i=e.defaultEdges,a=e.className,s=e.nodeTypes,l=s===void 0?jf:s,u=e.edgeTypes,c=u===void 0?Hf:u,d=e.onNodeClick,f=e.onEdgeClick,h=e.onInit,g=e.onMove,p=e.onMoveStart,w=e.onMoveEnd,y=e.onConnect,N=e.onConnectStart,C=e.onConnectStop,v=e.onConnectEnd,b=e.onClickConnectStart,O=e.onClickConnectStop,M=e.onClickConnectEnd,E=e.onNodeMouseEnter,_=e.onNodeMouseMove,I=e.onNodeMouseLeave,z=e.onNodeContextMenu,L=e.onNodeDoubleClick,X=e.onNodeDragStart,m=e.onNodeDrag,k=e.onNodeDragStop,S=e.onNodesDelete,D=e.onEdgesDelete,A=e.onSelectionChange,$=e.onSelectionDragStart,T=e.onSelectionDrag,j=e.onSelectionDragStop,H=e.onSelectionContextMenu,V=e.connectionMode,Z=V===void 0?st.Strict:V,F=e.connectionLineType,G=F===void 0?xe.Bezier:F,B=e.connectionLineStyle,K=e.connectionLineComponent,Q=e.connectionLineContainerStyle,Y=e.deleteKeyCode,ne=Y===void 0?"Backspace":Y,le=e.selectionKeyCode,be=le===void 0?"Shift":le,Oe=e.multiSelectionKeyCode,dt=Oe===void 0?"Meta":Oe,Xe=e.zoomActivationKeyCode,De=Xe===void 0?"Meta":Xe,Ve=e.snapToGrid,$e=Ve===void 0?!1:Ve,Ae=e.snapGrid,Ye=Ae===void 0?Lf:Ae,Dt=e.onlyRenderVisibleElements,pn=Dt===void 0?!1:Dt,$t=e.selectNodesOnDrag,At=$t===void 0?!0:$t,mn=e.nodesDraggable,Te=e.nodesConnectable,he=e.elementsSelectable,ge=e.minZoom,Ze=ge===void 0?.5:ge,Ue=e.maxZoom,Ne=Ue===void 0?2:Ue,Ke=e.defaultZoom,yn=Ke===void 0?1:Ke,Fe=e.defaultPosition,bn=Fe===void 0?Xf:Fe,Tt=e.translateExtent,Ee=Tt===void 0?Gn:Tt,zt=e.preventScrolling,da=zt===void 0?!0:zt,fa=e.nodeExtent,ho=e.defaultMarkerColor,ha=ho===void 0?"#b1b1b7":ho,go=e.zoomOnScroll,ga=go===void 0?!0:go,vo=e.zoomOnPinch,va=vo===void 0?!0:vo,po=e.panOnScroll,pa=po===void 0?!1:po,mo=e.panOnScrollSpeed,ma=mo===void 0?.5:mo,yo=e.panOnScrollMode,ya=yo===void 0?ot.Free:yo,bo=e.zoomOnDoubleClick,ba=bo===void 0?!0:bo,wo=e.panOnDrag,wa=wo===void 0?!0:wo,xa=e.onPaneClick,Sa=e.onPaneScroll,Ca=e.onPaneContextMenu,Oa=e.children,Na=e.onEdgeUpdate,Ea=e.onEdgeContextMenu,Pa=e.onEdgeDoubleClick,Ma=e.onEdgeMouseEnter,_a=e.onEdgeMouseMove,ka=e.onEdgeMouseLeave,Da=e.onEdgeUpdateStart,$a=e.onEdgeUpdateEnd,xo=e.edgeUpdaterRadius,Aa=xo===void 0?10:xo,Ta=e.onNodesChange,za=e.onEdgesChange,So=e.noDragClassName,Ia=So===void 0?"nodrag":So,Co=e.noWheelClassName,Ba=Co===void 0?"nowheel":Co,Oo=e.noPanClassName,Ra=Oo===void 0?"nopan":Oo,No=e.fitView,ja=No===void 0?!1:No,Ha=e.fitViewOptions,Eo=e.connectOnClick,La=Eo===void 0?!0:Eo,Xa=e.attributionPosition,Va=e.proOptions,Ya=e.defaultEdgeOptions,Po=e.elevateEdgesOnSelect,Za=Po===void 0?!1:Po,It=gn(e,Rf),Ua=jr(l,Bf),Ka=jr(c,Fd);return x("div",{...Xr(Xr({},It),{},{ref:t,className:re(["react-flow",a])}),children:U(sa,{children:[x(If,{onInit:h,onMove:g,onMoveStart:p,onMoveEnd:w,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:E,onNodeMouseMove:_,onNodeMouseLeave:I,onNodeContextMenu:z,onNodeDoubleClick:L,nodeTypes:Ua,edgeTypes:Ka,connectionLineType:G,connectionLineStyle:B,connectionLineComponent:K,connectionLineContainerStyle:Q,selectionKeyCode:be,deleteKeyCode:ne,multiSelectionKeyCode:dt,zoomActivationKeyCode:De,onlyRenderVisibleElements:pn,selectNodesOnDrag:At,translateExtent:Ee,minZoom:Ze,maxZoom:Ne,defaultZoom:yn,defaultPosition:bn,preventScrolling:da,zoomOnScroll:ga,zoomOnPinch:va,zoomOnDoubleClick:ba,panOnScroll:pa,panOnScrollSpeed:ma,panOnScrollMode:ya,panOnDrag:wa,onPaneClick:xa,onPaneScroll:Sa,onPaneContextMenu:Ca,onSelectionContextMenu:H,onEdgeUpdate:Na,onEdgeContextMenu:Ea,onEdgeDoubleClick:Pa,onEdgeMouseEnter:Ma,onEdgeMouseMove:_a,onEdgeMouseLeave:ka,onEdgeUpdateStart:Da,onEdgeUpdateEnd:$a,edgeUpdaterRadius:Aa,defaultMarkerColor:ha,noDragClassName:Ia,noWheelClassName:Ba,noPanClassName:Ra,elevateEdgesOnSelect:Za,id:It==null?void 0:It.id}),x(Ld,{nodes:n,edges:o,defaultNodes:r,defaultEdges:i,onConnect:y,onConnectStart:N,onConnectStop:C,onConnectEnd:v,onClickConnectStart:b,onClickConnectStop:O,onClickConnectEnd:M,nodesDraggable:mn,nodesConnectable:Te,elementsSelectable:he,minZoom:Ze,maxZoom:Ne,nodeExtent:fa,onNodesChange:Ta,onEdgesChange:za,snapToGrid:$e,snapGrid:Ye,connectionMode:Z,translateExtent:Ee,connectOnClick:La,defaultEdgeOptions:Ya,fitView:ja,fitViewOptions:Ha,onNodesDelete:S,onEdgesDelete:D,onNodeDragStart:X,onNodeDrag:m,onNodeDragStop:k,onSelectionDrag:T,onSelectionDragStart:$,onSelectionDragStop:j}),A&&x(jd,{onSelectionChange:A}),Oa,x(Od,{proOptions:Va,position:Xa})]})})});la.displayName="ReactFlow";var ca=function(t){var n=t.children;return x(Ai,{createStore:Ti,children:n})};ca.displayName="ReactFlowProvider";const Vf=e=>{let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t},ua=200,Vr=120,Yf=({data:e,id:t})=>U("div",{className:`bg-white  ${Qe({" !bg-blue-50 !border-blue-500 ":(e==null?void 0:e.center)===!0})}  border border-gray-300 rounded-lg shadow p-4 text-sm relative hover:bg-yellow-50`,style:{width:ua},children:[x(ut,{type:"target",position:R.Left,style:{background:"#94a3b8",width:8,height:8}}),x(ut,{type:"source",position:R.Right,style:{background:"#94a3b8",width:8,height:8}}),x("div",{className:"font-bold mb-2 text-center border-b-2 pb-1",children:e.label}),x("ul",{className:"list-disc list-inside text-left",children:e.columns.map(n=>{var o;return x("li",{className:`${Qe({"text-red-500 font-bold":((o=e.heightLight)==null?void 0:o.includes(n.fieldName))||e.center===!0&&n.fieldName.endsWith("Id")&&n.entityType!==t})}`,children:n.title},n.id)})})]}),Zf={tableNode:Yf},Uf=({entity:e,entityVo:t,className:n})=>{const{models:o}=Ie({types:t.parents}),{models:r}=Ie({types:t.subs}),i=(f,h)=>{var g;return{id:f==null?void 0:f.type,label:f==null?void 0:f.title,columns:(g=f==null?void 0:f.fields)==null?void 0:g.filter(p=>p.fieldName!=="id"),heightLight:h}},a=P.useMemo(()=>e?[(o==null?void 0:o.map(f=>i(f,[e.type+"Id"])))||[],[{...i(e),center:!0}],(r==null?void 0:r.map(f=>i(f,[e.type+"Id"])))||[]]:[],[e,o,r]),[s,l]=xt.useState([]),[u,c]=xt.useState([]);P.useEffect(()=>{const f=[],h=[];a==null||a.forEach((g,p)=>g.forEach((w,y)=>{const{id:N,label:C,columns:v}=w;let b=400-p*250,O=y*(Vr+20);const M=v.filter(E=>E.fieldName.endsWith("Id")).map(E=>E.fieldName.replace(/Id$/,""));p!==0&&M.map(_=>a[p-1].find(z=>z.id===_)).filter(_=>_!==void 0).forEach(_=>{h.push({id:`e-${w.id}-${_==null?void 0:_.id}`,source:w.id,target:_==null?void 0:_.id,animated:!0,style:{stroke:"#4ade80",strokeWidth:3,strokeDasharray:"5 5"},markerEnd:{type:Mt.ArrowClosed,color:"#4ade80",width:10,height:10}})}),f.push({id:N,position:{x:b,y:O},data:{label:C,columns:v,center:w.center,heightLight:w.heightLight},style:{width:ua,height:Vr},type:"tableNode"})})),l(f),c(h)},[a]);const d=xt.useCallback(f=>l(h=>f.reduce((g,p)=>p.type==="position"&&p.dragging?h.map(w=>w.id===p.id?{...w,position:p.position}:w):g,h)),[]);return x("div",{className:`${n} w-full flex h-full`,children:x(ca,{children:U(la,{nodes:s,edges:u,onNodesChange:d,fitView:!0,fitViewOptions:{padding:.1,duration:500,includeHiddenNodes:!1,maxZoom:1},connectionLineType:xe.SimpleBezier,nodesDraggable:!0,nodesConnectable:!1,elementsSelectable:!0,nodeTypes:Zf,children:[x(md,{nodeColor:f=>{const h=["#22c55e","#3b82f6","#f59e0b","#8b5cf6"];return h[Math.abs(Vf(f.id))%h.length]}}),x(fd,{}),x(Sd,{color:"#ddd",gap:16})]})})})},Kf=({form:e})=>{const t=P.useMemo(()=>{const n=e.state;return n==="creating"?{msg:"创建中",desc:"添加字段",className:"bg-blue-400 text-white "}:n==="wait_start"?{msg:"已发布",desc:"待重启",className:"bg-yellow-500 text-white "}:n==="restart"?{msg:"有更新",desc:"待重启",className:"bg-red-400 text-white "}:{msg:"运行中",className:"bg-green-400 text-white "}},[e.state,e.unpublishForm]);return U("div",{className:` flex  flex-col w-16 h-16 text-sm rounded shadow justify-center items-center ${t.className}  `,children:[x("div",{className:" flex flex-1 items-center justify-between font-medium",children:t.msg}),e.unpublishForm&&x("div",{className:" text-xs pb-2 text-red-500 font-semibold",children:"待提交"}),!e.unpublishForm&&t.desc&&x("div",{className:" text-xs pb-2 ",children:t.desc})]})},Yr=({form:e,children:t,className:n})=>{const{refeshModel:o}=Ie();return U("div",{className:`flex  relative  items-center  group w-full ${n}`,children:[x(Kf,{form:e}),U("div",{className:" flex flex-col items-start  justify-center px-2 text-left border-x ml-2  w-1/3",children:[U("div",{className:"mb-2",children:[x("span",{className:"text-blue-500 text-sm  ",children:"标识："}),x("span",{className:"text-sm  text-gray-500  ",children:e==null?void 0:e.type})]}),U("div",{className:"flex",children:[x("span",{className:"text-blue-500 text-sm ",children:"名称："}),U("div",{className:"text-sm text-gray-500  flex justify-center items-center space-x-4",children:[U("span",{children:[" ",e==null?void 0:e.title]}),x("span",{className:"group-hover:block text-base text-gray-500 hidden",children:x(mt,{allowEmpty:!0,model:"form",btnType:"icon",icon:x("i",{className:"  icon-sp_edit_white"}),actionType:"edit",datas:e,reaction:[Me.field("state").includes(["published","wait_start","restart"]).then("type").readPretty(),Me.then("sysAppId").readPretty()],submitClose:!0,onSubmitFinish:r=>{o(r.id)},saveApi:Zr,title:"模型修改"})})]})]})]}),U("div",{className:"flex-1 flex flex-col items-start justify-center px-2 text-left",children:[U("div",{className:"w-full mb-2",children:[x("span",{className:"text-blue-500 text-sm  mb-4",children:"模型类："}),x("span",{className:"text-sm text-gray-500",children:e==null?void 0:e.typeClass})]}),U("div",{className:"w-full",children:[x("span",{className:"text-blue-500 text-sm ",children:"接口："}),x("span",{className:"text-sm text-gray-500",children:(e==null?void 0:e.typeClass.replace("dto","api").replace("entity","api"))+"Api"})]}),e.state==="creating"&&x("div",{className:"w-full absolute bottom-1  text-red-500 text-sm pl-12",children:"提交后生成以上代码"})]}),t&&x("div",{className:" ",children:t})]})},Ff=e=>{const{value:t,subs:n,onChange:o,selectField:r="typeClass",entity:i}=e,a=P.useCallback(l=>t?Object.keys(t).filter(u=>t[u]===l):[],[t]),s=P.useCallback(l=>n.length>0?x(Ja,{value:a(l),className:"mt-2",direction:"horizontal",onChange:u=>{o({...Object.fromEntries(Object.entries(t||{}).filter(([c,d])=>d!==l)),...Object.fromEntries(u.map(c=>[c,l]))})},children:n.map(u=>x(es,{value:u[r],extra:u.type,children:u.title}))}):x("div",{className:"h-20 text-gray-500 text-sm flex items-center justify-center",children:"无子表"}),[n,t,o]);return U("div",{className:"flex flex-col flex-1 justify-between items-start gap-4 p-3 bg-gray-50 rounded-lg shadow-md",children:[U("div",{className:"w-full bg-white p-2 rounded-lg shadow",children:[x(Ft,{text:"级联删除",desc:`删除${i.title}数据时, 同时删除以下勾选子表关联数据`}),s("remove")]}),U("div",{className:"w-full bg-white p-2 rounded-lg shadow",children:[x(Ft,{text:"级联清除",desc:`删除${i.title}数据时，会清空勾选表里外键字段值，解除关联关系`}),s("clear")]}),U("div",{className:"w-full bg-white p-2 rounded-lg shadow",children:[x(Ft,{text:"禁止删除",desc:`删除${i.title}表数据时，如勾选子表里存在关联数据，则不允许删除`}),s("unableRm")]})]})},ih=()=>{var h,g;const e=Fa(),[t,n]=P.useState(),[o,r]=P.useState(),[i,a]=ns(),s=P.useMemo(()=>o==null?void 0:o.find(p=>p.id===i.modelId),[o]),{appModels:l,refeshModel:u}=Ie({sysAppId:i.appId}),{models:c}=Ie({types:s==null?void 0:s.dtos}),{model:d}=Ie({id:i.modelId}),{models:f}=Ie({types:s==null?void 0:s.subs});return P.useEffect(()=>{Ga({}).then(p=>{r(p.data)})},[i.modelId]),P.useEffect(()=>{i.appId&&ts({id:i.appId}).then(p=>{n(p.data)})},[i.appId]),d?U("div",{className:" h-full flex flex-col",children:[U("div",{className:"w-full  rounded-lg bg-slate-50 shadow-md  font-sans p-2 mb-2",children:[x(Ft,{text:"实体模型",className:"mb-2"}),U("div",{className:"flex border-dashed border-b items-stretch pb-2 mb-2 space-x-2",children:[x(_o,{className:" w-3/5 bg-blue-50",onClick:()=>{},title:"基本信息",children:d&&x(Yr,{form:d})}),x(_o,{className:" w-2/5 p-4",onClick:()=>{},title:"相关模型",children:U("div",{className:" flex  justify-start items-center h-full space-x-4",children:[U("div",{onClick:()=>{a({tabActiveKey:"tableFlow"})},className:" flex flex-col w-20 h-20 rounded-md shadow bg-green-50 border  font-bold justify-center items-center   ",children:[x("div",{className:" text-xl",children:s==null?void 0:s.subs.length}),x("div",{className:" text-gray-400 text-xs",children:"子表"})]}),U("div",{onClick:()=>{a({tabActiveKey:"tableFlow"})},className:" flex flex-col w-20 h-20 rounded-md shadow bg-blue-50  border  font-bold justify-center items-center   ",children:[x("div",{className:" text-xl",children:s==null?void 0:s.parents.length}),x("div",{className:" text-gray-400 text-xs",children:"关联表"})]}),U("div",{onClick:()=>{a({tabActiveKey:"dto"})},className:" flex flex-col w-20 h-20 rounded-md shadow bg-green-50  border  font-bold justify-center items-center   ",children:[x("div",{className:" text-xl",children:(c==null?void 0:c.length)||0}),x("div",{className:" text-gray-400 text-xs",children:"DTO模型"})]})]})})]}),U("div",{className:"flex space-x-1 ",children:[x(ko,{app:t,btnType:"button"}),x(wn,{className:`${Qe({" animate-bounce":(((h=d==null?void 0:d.fields)==null?void 0:h.length)||0)===0})}`,title:"点击后添加字段",onClick:()=>{e(`/modelDesign/entity?appId=${i.appId}&modelId=${i==null?void 0:i.modelId}`)},icon:x("i",{className:"  icon-knowledge_file"}),children:"字段设计"}),(d==null?void 0:d.state)!=="creating"&&x(ce,{children:x(wn,{onClick:()=>{P.startTransition(()=>{e(`/full/formDesignPage/${d==null?void 0:d.type}`)})},icon:x("i",{className:" icon-rename_input"}),children:"表单设计"})}),x(mt,{datas:d==null?void 0:d.id,icon:x("i",{className:"  icon-delete"}),saveApi:qa,actionType:"api",submitConfirm:!0,onSubmitFinish:p=>{u(d==null?void 0:d.id)},disabled:(d==null?void 0:d.state)!=="creating",disabledHide:!1,title:"删除"}),s&&s.subs&&s.subs.length>0&&x(mt,{tooltip:"删除当前表数据时，子表数据级联影响配置",modal:x(Ff,{entity:d,subs:f||[],value:JSON.parse(d.cascadeDeleteEntityNames)}),icon:x("i",{className:"  icon-sp_edit_white"}),actionType:"modal",datas:JSON.parse(d.cascadeDeleteEntityNames),submitClose:!0,submitConfirm:!0,saveApi:p=>{Qa({...d,cascadeDeleteEntityNames:JSON.stringify(p)}).then(w=>{u(d==null?void 0:d.id)})},modalTitle:"级联删除配置(保存后重启服务生效)",title:"级联删除配置"})]})]}),d&&d.state!=="creating"?U(ce,{children:[U("div",{className:" flex ",children:[U("div",{className:"flex space-x-1 ml-2 text-sm",children:[x("div",{onClick:()=>{a({tabActiveKey:"tableFlow"})},className:` ${Qe({" !text-blue-500 !font-medium  border-blue-500":i.tabActiveKey==="tableFlow"||!i.tabActiveKey})} bg-white   border-b-2 py-2 px-4 font-thin  text-gray-400 flex hover:!text-blue-500 hover:!border-blue-500  cursor-pointer justify-center items-center`,children:"模型关系"}),U("div",{onClick:()=>{a({tabActiveKey:"dto"})},className:` ${Qe({"  !text-blue-500 !font-medium border-blue-500":i.tabActiveKey==="dto"})} bg-white  border-b-2 font-thin px-4 text-gray-400 p-2 flex hover:!text-blue-500 hover:!border-blue-500  cursor-pointer justify-center items-center`,children:["dto模型(",(g=s==null?void 0:s.dtos)==null?void 0:g.length,")"]})]}),x("div",{className:" flex flex-1  items-center h-full ml-4",children:x(mt,{actionType:"create",model:"form",btnColor:"danger",onSaveBefore:p=>(p.type=Mo(p.type),p.entityType=Mo(p.entityType),p),saveApi:Zr,title:"DTO模型",tooltip:"创建实体关联的DTO表单模型",allowEmpty:!0,modalTitle:"创建表单模型(DTO)",submitClose:!0,reaction:[Me.then("sysAppId","sysMenuId").hide(),Me.then("entityType").value(d.type).show().readPretty().title("关联实体表"),Me.then("itemType").value("dto"),Me.then("icon").hide(),Me.then("sysAppId").value(d.sysAppId).hide(),Me.then("title").title("DTO模型名称")],icon:x("i",{className:"icon-add-member2"}),onSubmitFinish:p=>{a({tabActiveKey:"dto"})}})})]}),U("div",{className:"w-full flex-1  rounded-lg bg-gray-50 shadow-md  font-sans p-2 mt-2 ",children:[i.tabActiveKey==="dto"&&x(ce,{children:c&&c.length>0?x("div",{className:"  grid  grid-cols-2 sm:grid-cols-1 gap-2  ",children:c==null?void 0:c.map(p=>{var w;return x(Yr,{className:" bg-white justify-start items-center p-4 border rounded-lg",form:p,children:U("div",{className:"w-full flex flex-col space-y-1",children:[x(mt,{title:"模型设计",className:`${Qe({" animate-bounce !text-red-500":(((w=p==null?void 0:p.fields)==null?void 0:w.length)||0)===0})}`,allowEmpty:!0,icon:x("i",{className:"icon-edit"}),onClick:()=>{e(`/modelDesign/dto?appId=${t==null?void 0:t.id}&modelId=${d==null?void 0:d.id}&dtoId=${p.id}`)}}),(p==null?void 0:p.state)!=="creating"&&x(wn,{type:"tertiary",onClick:()=>{P.startTransition(()=>{e(`/full/formDesignPage/${p==null?void 0:p.type}`)})},icon:x("i",{className:" icon-rename_input"}),children:"表单设计"})]})},p.id)})}):x("div",{className:" flex justify-center items-center h-full",children:x(Wa,{fullMode:!1,type:"danger",bordered:!0,icon:null,closeIcon:null,title:x("div",{className:" text-left",children:"DTO模型"}),description:U("div",{className:" text-left",children:[x("div",{className:" mt-2 text-sm",children:"1. 通过从存在父子关系的实体模型中筛选关键字段，组合成用于前端传输或表单绑定的DTO（数据传输对象）模型。"}),x("div",{className:" mt-2  text-sm",children:"2. 模型提交后会生成对应的DTO模型代码，以及相关API代码"})]})})})}),d&&s&&(i.tabActiveKey==="tableFlow"||!i.tabActiveKey)&&x(ce,{children:x(Uf,{entity:d,entityVo:s,className:" overflow-hidden"})})]})]}):x("div",{className:" flex-1 flex  items-center justify-center text-xl text-red-400 font-bold",children:d!=null&&d.unpublishForm?"请进入`字段设计`提交模型信息":"请先设计字段"})]}):U("div",{className:"flex justify-center items-center text-2xl  h-full w-full text-blue-400 ",children:[l&&l.length>0&&x("div",{children:"请从列表选择实体模型,或"}),x("div",{className:"mr-2"}),x(ko,{btnType:"button",app:t})]})};export{ih as default};
