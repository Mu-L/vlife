import{r as a,J as b,K as x,M as w,N as y,u as v,Q as N,a as S,d as e,j as f}from"./index-ClvCGvy-.js";import{l as j}from"./logo2-DYc4F8xQ.js";const P=(s,r)=>{const[l,o]=a.useState(s),[t,m]=a.useState({}),h=a.useCallback((i,c)=>{o(d=>({...d,[i]:c}))},[r]);return{values:l,errors:t,setFieldValue:h}},k=()=>{const[s,r]=b();return l=>{const o=w({...Object.fromEntries(s),...l});return r(o)}},E=s=>{const[r]=b(),l=k(),[o]=a.useState(s);return[a.useMemo(()=>x(Object.fromEntries(r),o),[r,o]),t=>l(t)]},I="/assets/login_bg-ewLp5Bdx.jpg",U="/assets/login_left-DJARTDei.png",C=window.localStorage.getItem(y),O=()=>{const{user:s,login:r,error:l,giteeLogin:o}=v(),[t,m]=a.useState();a.useEffect(()=>{N().then(n=>{var g;m((g=n.data)==null?void 0:g[0])})},[]);const h=S(),{values:i,setFieldValue:c}=P({username:C||"",password:""},null);a.useEffect(()=>{s&&s.id&&h("/")},[s]);const d=async()=>{await r(i).then(()=>{})},p="",[u,F]=E(["code","from"]);return a.useEffect(()=>{u.code!==void 0&&u.from==="gitee"&&o(u.code).then(n=>{})},[u]),e("div",{style:{backgroundImage:`url(${I})`},className:"bg-fixed relative bg-cover bg-center w-full justify-center flex items-center h-screen",children:f("div",{style:{width:"748px",height:"334px"},className:"  flex justify-center items-center",children:[e("div",{style:{width:"398px",backgroundImage:`url(${U})`,backgroundSize:"cover",backgroundPosition:"center"},className:"h-full bg-white rounded-l-3xl shadow-xl shadow-left shadow-top shadow-bottom"}),e("div",{style:{width:"358px",height:"334px"},className:"relative  flex justify-center items-center bg-white rounded-r-3xl shadow-xl shadow-right shadow-top shadow-bottom",children:f("div",{style:{width:"258px"},className:"flex flex-col  justify-center items-center",children:[e("div",{className:" flex justify-left w-full ",children:t!=null&&t.icon?e("img",{src:p+"/sysFile/image/"+(t==null?void 0:t.icon),style:{width:160,height:40,top:10}}):e("img",{src:j,style:{width:150,height:50,top:10}})}),e("p",{className:"text-red-400 pt-2 text-center  text-sm",children:l}),e("div",{className:"mb-1 pt-2 rounded",children:e("input",{type:"text",placeholder:"用户名",id:"username",value:i.username,onChange:n=>c("username",n.target.value),className:"  itali h-10 text-xl  rounded w-full text-gray-700 focus:outline-none border-b border-gray-300 focus:border-blue-400 transition duration-500 px-3 pb-3"})}),e("div",{className:"mb-2 pt-3 rounded ",children:e("input",{type:"password",id:"password",placeholder:"密码",value:i.password,onChange:n=>c("password",n.target.value),onKeyPress:n=>{n.key==="Enter"&&d()},className:"h-10  text-xl  rounded w-full text-gray-700 focus:outline-none border-b border-gray-300 focus:border-blue-400 transition duration-500 px-3 pb-3"})}),e("button",{className:" mt-4 w-64 bg-blue-400 hover:bg-blue-500 text-white font-bold py-2 rounded-md shadow-lg hover:shadow-xl transition duration-200",onClick:d,children:"登 录"})]})})]})})};export{O as default};
