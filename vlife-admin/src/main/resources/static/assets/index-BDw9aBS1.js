import{m as Oe,r as I,X as He,o as Ge,l as h,k as c,ar as de,as as Ae,Y as Be,f as Se,at as me,j as De}from"./index-zu87m18r.js";import{M as we,t as Le,h as fe}from"./index-D84rZFL3.js";import{F as Ee}from"./index-DA-42-7E.js";import{u as Fe,d as Te,p as Ze,G as Pe}from"./GroupLabel-CFJ4I-sR.js";import{l as xe}from"./SysApp-DRxQSclV.js";import{u as pe,c as J,B as Ke}from"./BtnToolBar-eoxdJY99.js";import{i as Me,c as je,d as Ce}from"./isBrowser-DDdYk2YE.js";import{u as Xe,g as Re}from"./useEffectWithTarget-Dhumc1Cp.js";import{u as Ye}from"./index-BmfRL-y0.js";import"./index-D_2oZ5Sg.js";var Je=function(a,s){return a===void 0&&(a=[]),s===void 0&&(s=[]),Oe(a,s)},ke=function(a,s,d){var n=I.useRef(),r=I.useRef(0);Je(s,n.current)||(n.current=s,r.current+=1),Xe(a,[r.current],d)},Qe=/(mac|iphone|ipod|ipad)/i.test(typeof navigator<"u"?navigator==null?void 0:navigator.platform:""),ge={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pausebreak:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftwindowkey:91,rightwindowkey:92,meta:Qe?[91,93]:[91,92],selectkey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalpoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,equalsign:187,comma:188,dash:189,period:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},k={ctrl:function(a){return a.ctrlKey},shift:function(a){return a.shiftKey},alt:function(a){return a.altKey},meta:function(a){return a.type==="keyup"?ge.meta.includes(a.keyCode):a.metaKey}};function We(a){var s=Object.keys(k).reduce(function(d,n){return k[n](a)?d+1:d},0);return[16,17,18,91,92].includes(a.keyCode)?s:s+1}function oe(a,s,d){var n,r;if(!a.key)return!1;if(Ce(s))return a.keyCode===s;var E=s.split("."),i=0;try{for(var C=J(E),e=C.next();!e.done;e=C.next()){var U=e.value,v=k[U],b=ge[U.toLowerCase()];(v&&v(a)||b&&b===a.keyCode)&&i++}}catch(D){n={error:D}}finally{try{e&&!e.done&&(r=C.return)&&r.call(C)}finally{if(n)throw n.error}}return d?i===E.length&&We(a)===E.length:i===E.length}function ze(a,s){return Me(a)?a:je(a)||Ce(a)?function(d){return oe(d,a,s)}:Array.isArray(a)?function(d){return a.some(function(n){return oe(d,n,s)})}:function(){return!!a}}var $e=["keydown"];function qe(a,s,d){var n={},r=n.events,E=r===void 0?$e:r,i=n.target,C=n.exactMatch,e=C===void 0?!1:C,U=n.useCapture,v=U===void 0?!1:U,b=pe(s),D=pe(a);ke(function(){var S,y,H,g=Re(i,window);if(g){var w=function(A){var f,p=ze(D.current,e);if(p(A))return(f=b.current)===null||f===void 0?void 0:f.call(b,A)};try{for(var u=J(E),l=u.next();!l.done;l=u.next()){var N=l.value;(H=g==null?void 0:g.addEventListener)===null||H===void 0||H.call(g,N,w,v)}}catch(A){S={error:A}}finally{try{l&&!l.done&&(y=u.return)&&y.call(u)}finally{if(S)throw S.error}}return function(){var A,f,p;try{for(var O=J(E),G=O.next();!G.done;G=O.next()){var Z=G.value;(p=g==null?void 0:g.removeEventListener)===null||p===void 0||p.call(g,Z,w,v)}}catch(m){A={error:m}}finally{try{G&&!G.done&&(f=O.return)&&f.call(O)}finally{if(A)throw A.error}}}}},[E],i)}var Ve=["阿","哎","安","肮","凹","八","挀","扳","邦","勹","陂","奔","伻","屄","边","灬","憋","汃","冫","癶","峬","嚓","偲","参","仓","撡","冊","嵾","曽","叉","芆","辿","伥","抄","车","抻","阷","吃","充","抽","出","欻","揣","巛","刅","吹","旾","逴","呲","匆","凑","粗","汆","崔","邨","搓","咑","呆","丹","当","刀","嘚","扥","灯","氐","甸","刁","爹","丁","丟","东","吺","厾","耑","垖","吨","多","妸","诶","奀","鞥","儿","发","帆","匚","飞","分","丰","覅","仏","紑","夫","旮","侅","甘","冈","皋","戈","给","根","刯","工","勾","估","瓜","乖","关","光","归","丨","呙","哈","咍","佄","夯","茠","诃","黒","拫","亨","噷","叿","齁","乎","花","怀","欢","巟","灰","昏","吙","丌","加","戋","江","艽","阶","巾","坕","冂","丩","凥","姢","噘","军","咔","开","刊","忼","尻","匼","肎","劥","空","抠","扝","夸","蒯","宽","匡","亏","坤","扩","垃","来","兰","啷","捞","肋","勒","崚","哩","俩","奁","良","撩","毟","拎","伶","溜","囖","龙","瞜","噜","驴","娈","掠","抡","罗","呣","妈","埋","嫚","牤","猫","么","呅","门","甿","咪","宀","喵","乜","民","名","谬","摸","哞","毪","嗯","拏","腉","囡","囔","孬","疒","娞","恁","能","妮","拈","娘","鸟","捏","囜","宁","妞","农","羺","奴","女","奻","疟","黁","挪","喔","讴","妑","拍","眅","乓","抛","呸","喷","匉","丕","囨","剽","氕","姘","乒","钋","剖","仆","七","掐","千","呛","悄","癿","亲","靑","卭","丘","区","峑","缺","夋","呥","穣","娆","惹","人","扔","日","茸","厹","邚","挼","堧","婑","瞤","捼","仨","毢","三","桒","掻","閪","森","僧","杀","筛","山","伤","弰","奢","申","升","尸","収","书","刷","衰","闩","双","脽","吮","说","厶","忪","捜","苏","狻","夊","孙","唆","他","囼","坍","汤","夲","忑","熥","剔","天","旫","帖","厅","囲","偷","凸","湍","推","吞","乇","穵","歪","弯","尣","危","昷","翁","挝","乌","夕","虲","仙","乡","灱","些","心","星","凶","休","吁","吅","削","坃","丫","恹","央","幺","倻","一","囙","应","哟","佣","优","扜","囦","曰","晕","帀","災","兂","匨","傮","则","贼","怎","増","扎","捚","沾","张","佋","蜇","贞","争","之","中","州","朱","抓","拽","专","妆","隹","宒","卓","乲","宗","邹","租","钻","厜","尊","昨","兙"],_e=["A","AI","AN","ANG","AO","BA","BAI","BAN","BANG","BAO","BEI","BEN","BENG","BI","BIAN","BIAO","BIE","BIN","BING","BO","BU","CA","CAI","CAN","CANG","CAO","CE","CEN","CENG","CHA","CHAI","CHAN","CHANG","CHAO","CHE","CHEN","CHENG","CHI","CHONG","CHOU","CHU","CHUA","CHUAI","CHUAN","CHUANG","CHUI","CHUN","CHUO","CI","CONG","COU","CU","CUAN","CUI","CUN","CUO","DA","DAI","DAN","DANG","DAO","DE","DEN","DENG","DI","DIAN","DIAO","DIE","DING","DIU","DONG","DOU","DU","DUAN","DUI","DUN","DUO","E","EI","EN","ENG","ER","FA","FAN","FANG","FEI","FEN","FENG","FIAO","FO","FOU","FU","GA","GAI","GAN","GANG","GAO","GE","GEI","GEN","GENG","GONG","GOU","GU","GUA","GUAI","GUAN","GUANG","GUI","GUN","GUO","HA","HAI","HAN","HANG","HAO","HE","HEI","HEN","HENG","HM","HONG","HOU","HU","HUA","HUAI","HUAN","HUANG","HUI","HUN","HUO","JI","JIA","JIAN","JIANG","JIAO","JIE","JIN","JING","JIONG","JIU","JU","JUAN","JUE","JUN","KA","KAI","KAN","KANG","KAO","KE","KEN","KENG","KONG","KOU","KU","KUA","KUAI","KUAN","KUANG","KUI","KUN","KUO","LA","LAI","LAN","LANG","LAO","LE","LEI","LENG","LI","LIA","LIAN","LIANG","LIAO","LIE","LIN","LING","LIU","LO","LONG","LOU","LU","LV","LUAN","LVE","LUN","LUO","M","MA","MAI","MAN","MANG","MAO","ME","MEI","MEN","MENG","MI","MIAN","MIAO","MIE","MIN","MING","MIU","MO","MOU","MU","N","NA","NAI","NAN","NANG","NAO","NE","NEI","NEN","NENG","NI","NIAN","NIANG","NIAO","NIE","NIN","NING","NIU","NONG","NOU","NU","NV","NUAN","NVE","NUN","NUO","O","OU","PA","PAI","PAN","PANG","PAO","PEI","PEN","PENG","PI","PIAN","PIAO","PIE","PIN","PING","PO","POU","PU","QI","QIA","QIAN","QIANG","QIAO","QIE","QIN","QING","QIONG","QIU","QU","QUAN","QUE","QUN","RAN","RANG","RAO","RE","REN","RENG","RI","RONG","ROU","RU","RUA","RUAN","RUI","RUN","RUO","SA","SAI","SAN","SANG","SAO","SE","SEN","SENG","SHA","SHAI","SHAN","SHANG","SHAO","SHE","SHEN","SHENG","SHI","SHOU","SHU","SHUA","SHUAI","SHUAN","SHUANG","SHUI","SHUN","SHUO","SI","SONG","SOU","SU","SUAN","SUI","SUN","SUO","TA","TAI","TAN","TANG","TAO","TE","TENG","TI","TIAN","TIAO","TIE","TING","TONG","TOU","TU","TUAN","TUI","TUN","TUO","WA","WAI","WAN","WANG","WEI","WEN","WENG","WO","WU","XI","XIA","XIAN","XIANG","XIAO","XIE","XIN","XING","XIONG","XIU","XU","XUAN","XUE","XUN","YA","YAN","YANG","YAO","YE","YI","YIN","YING","YO","YONG","YOU","YU","YUAN","YUE","YUN","ZA","ZAI","ZAN","ZANG","ZAO","ZE","ZEI","ZEN","ZENG","ZHA","ZHAI","ZHAN","ZHANG","ZHAO","ZHE","ZHEN","ZHENG","ZHI","ZHONG","ZHOU","ZHU","ZHUA","ZHUAI","ZHUAN","ZHUANG","ZHUI","ZHUN","ZHUO","ZI","ZONG","ZOU","ZU","ZUAN","ZUI","ZUN","ZUO",""],eu={曾:"ZENG",沈:"SHEN",嗲:"DIA",碡:"ZHOU",聒:"GUO",炔:"QUE",蚵:"KE",砉:"HUA",嬤:"MO",嬷:"MO",蹒:"PAN",蹊:"XI",丬:"PAN",霰:"XIAN",莘:"XIN",豉:"CHI",饧:"XING",筠:"JUN",长:"CHANG",帧:"ZHEN",峙:"SHI",郍:"NA",芎:"XIONG",谁:"SHUI"},uu={PINYINS:_e,UNIHANS:Ve,EXCEPTIONS:eu},au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},M=uu,tu="阿",lu="鿿",nu=1,T=2,Y=3,F=null,j=void 0;function ru(a){a&&(typeof a=="function"&&(a=[a]),a.forEach&&a.forEach(function(s){typeof s=="function"&&s(M)}))}function he(a){return!a&&F!==null||((typeof Intl>"u"?"undefined":au(Intl))==="object"&&Intl.Collator?(j=new Intl.Collator(["zh-Hans-CN","zh-CN"]),F=Intl.Collator.supportedLocalesOf(["zh-CN"]).length===1):F=!1),F}function ve(a){var s=M.UNIHANS,d=M.PINYINS,n=M.EXCEPTIONS,r={source:a};if(a in n)return r.type=T,r.target=n[a],r;var E=-1,i=void 0;if(a.charCodeAt(0)<256)return r.type=nu,r.target=a,r;if(i=j.compare(a,tu),i<0)return r.type=Y,r.target=a,r;if(i===0)r.type=T,E=0;else{if(i=j.compare(a,lu),i>0)return r.type=Y,r.target=a,r;i===0&&(r.type=T,E=s.length-1)}if(r.type=T,E<0)for(var C=0,e=s.length-1;C<=e;){E=~~((C+e)/2);var U=s[E];if(i=j.compare(a,U),i===0)break;i>0?C=E+1:e=E-1}return i<0&&E--,r.target=d[E],r.target||(r.type=Y,r.target=r.source),r}function Ie(a){if(typeof a!="string")throw new Error("argument should be string.");if(!he())throw new Error("not support Intl or zh-CN language.");return a.split("").map(function(s){return ve(s)})}var su={isSupported:he,parse:Ie,patchDict:ru,genToken:ve,convertToPinyin:function(s,d,n){return Ie(s).map(function(r){return n&&r.type===T?r.target.toLowerCase():r.target}).join(d||"")}},Q={exports:{}};(function(a,s){s=a.exports=function(n){n.EXCEPTIONS={嗲:"DIA",碡:"ZHOU",聒:"GUO",炔:"QUE",蚵:"KE",砉:"HUA",嬷:"MO",蹊:"XI",丬:"PAN",霰:"XIAN",豉:"CHI",饧:"XING",帧:"ZHEN",芎:"XIONG",谁:"SHUI",钶:"KE"},n.UNIHANS[91]="伕",n.UNIHANS[347]="仚",n.UNIHANS[393]="诌",n.UNIHANS[39]="婤",n.UNIHANS[50]="腠",n.UNIHANS[369]="攸",n.UNIHANS[123]="乯",n.UNIHANS[171]="刕",n.UNIHANS[102]="佝",n.UNIHANS[126]="犿",n.UNIHANS[176]="列",n.UNIHANS[178]="刢",n.UNIHANS[252]="娝",n.UNIHANS[330]="偸"},s.shouldPatch=function(n){return typeof n!="function"?!1:n("伕").target==="FOU"&&n("仚").target==="XIA"&&n("诌").target==="ZHONG"&&n("婤").target==="CHONG"&&n("腠").target==="CONG"&&n("攸").target==="YONG"&&n("乯").target==="HOU"&&n("刕").target==="LENG"&&n("佝").target==="GONG"&&n("犿").target==="HUAI"&&n("列").target==="LIAO"&&n("刢").target==="LIN"&&n("钶").target==="E"}})(Q,Q.exports);var iu=Q.exports,X=su,Ue=iu;X.isSupported()&&Ue.shouldPatch(X.genToken)&&X.patchDict(Ue);var Nu=X;const cu=He(Nu),K=[{label:"字符串",value:"java.lang.String",length:[{label:"32",value:32},{label:"50",value:50},{label:"64",value:64},{label:"255",value:255},{label:"500",value:500}]},{label:"整型",value:"java.lang.Integer"},{label:"长整型",value:"java.lang.Long"},{label:"小数",value:"java.lang.Double"},{label:"Text文本",value:"text"},{label:"布尔",value:"java.lang.Boolean"},{label:"日期",value:"java.util.Date"}],ye=["id","status","createId","modifyId","createDeptcode","createDate","modifyDate"],gu=()=>{var g,w;const[a,s]=I.useState([]),[d,n]=I.useState([]),r=Ge(),[E]=Ye(),{model:i,getModel:C}=Fe({id:E.modelId}),[e,U]=I.useState();I.useEffect(()=>{console.log("entity")},[]),I.useEffect(()=>{i&&U(JSON.parse(JSON.stringify(i)))},[i]);const v=I.useMemo(()=>{var u,l;return JSON.stringify((u=i==null?void 0:i.fields)==null?void 0:u.sort((N,A)=>N.sort-A.sort))!==JSON.stringify((l=e==null?void 0:e.fields)==null?void 0:l.sort((N,A)=>N.sort-A.sort))},[i,e]),b=I.useCallback(()=>{U(u=>{const l=(u==null?void 0:u.fields)??[],N=l.filter(f=>f.sort!==void 0&&f.sort!==null).reduce((f,p)=>p.sort>f.sort?p:f,l[0]),A={javaType:"java.lang.String",dbLength:32,sort:N&&N.sort?N.sort+1:1};return{...u,fields:[...l,A]}})},[U]);I.useEffect(()=>{xe({}).then(u=>{s(u.data||[])}),Te().then(u=>{n(u.data||[])})},[]),qe(["alt.n"],()=>{b()}),I.useEffect(()=>{e&&(!e.fields||e.fields.length===0)&&b()},[e]);const D=I.useMemo(()=>{var u;return(u=a.filter(l=>l.appKey==="sys"||(d==null?void 0:d.filter(N=>N.sysApp.id===l.id&&N.id!==(e==null?void 0:e.id)&&N.state!=="creating").length)>0))==null?void 0:u.map(l=>({label:`${l.name}`,value:l.id,children:d==null?void 0:d.filter(N=>N.sysApp.id===l.id&&N.id!==(e==null?void 0:e.id)&&N.state!=="creating").filter(N=>l.appKey==="sys"&&(N.type==="sysUser"||N.type==="sysDept")||l.appKey!=="sys").map(N=>({label:N.title,value:N.type}))}))},[d,e,a]),S=I.useCallback(()=>{const u=`/modelDesign/detail?appId=${E.appId}&modelId=${E.modelId}`;v===!0?we.confirm({title:"存在未提交的改动",content:"切换模型后将丢失当前改动，是否继续？",onOk:()=>{r(u)}}):r(u)},[v]),y=I.useCallback((u,l,N)=>{U(A=>{var f;return{...A,fields:(f=A==null?void 0:A.fields)==null?void 0:f.map((p,O)=>(O===u&&(p[l]=N),p))}})},[]),H=I.useCallback(()=>{U(u=>{var A,f;const l=(A=u==null?void 0:u.fields)==null?void 0:A.map(p=>p.fieldName),N=(f=u==null?void 0:u.orders)==null?void 0:f.split(",").filter(p=>l==null?void 0:l.includes(p.split("_")[0])).join(",");return{...u,orders:N===""?void 0:N}})},[e]);return h("div",{className:" w-full h-full flex relative flex-col px-4 py-2",children:[h("div",{className:" flex h-10 p-2  justify-between items-center  ",children:[c(Ke,{btns:[{title:"加字段",actionType:"create",icon:c("i",{className:"icon-task_add-02"}),disabledHide:!0,onClick:()=>{b()}},{title:"提交发布",multiple:!1,theme:"light",btnColor:"danger",actionType:"edit",disabledTooltip:"当前没有内容改动",disabled:!v,usableMatch:u=>{var N,A;const l=((N=u==null?void 0:u.fields)==null?void 0:N.filter(f=>!!f.javaType&&!!f.fieldName&&!!f.title&&de(f.fieldName)).length)===((A=u==null?void 0:u.fields)==null?void 0:A.length)?!0:"类型标识名称不为空且需规范";return l===!0&&u.fields?Ae(u.fields,"fieldName")&&Ae(u.fields,"title")?!0:"字段标识/标题存在重复情况":l},datas:e,icon:c("i",{className:"  icon-save"}),onSaveBefore:u=>({...(e==null?void 0:e.state)==="creating"?{...e,...u}:e,unpublishForm:JSON.stringify(u)}),submitConfirm:(e==null?void 0:e.state)==="creating"?"您确定模型设计完成了？":"提交后之前生成的实体类会被覆盖，其他代码无影响，请知悉",saveApi:Ze,onSubmitFinish:u=>{C({id:i==null?void 0:i.id,dbQuery:!0})}},{title:"返回",actionType:"create",icon:c("i",{className:"  icon-backspace"}),disabledHide:!0,onClick:S}]}),c(Be,{className:"!cursor-pointer absolute right-4 hover:text-blue-500 mx-2",onClick:S})]}),c(Pe,{text:`${i==null?void 0:i.title} (${i==null?void 0:i.type}) `,className:" my-2"}),h("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-300",children:[c("thead",{className:"",children:h("tr",{className:" text-center text-sm",children:[c("th",{className:"px-2 py-2 w-16 font-mediu border  bg-blue-50 border-blue-300",children:"序号"}),c("th",{className:" py-2 w-48 border bg-blue-50 border-blue-300 ",children:"是否外键"}),c("th",{className:" py-2 w-48  font-bold   border bg-blue-50 border-blue-300 ",children:"字段标识"}),c("th",{className:" py-2 w-48    border bg-blue-50 border-blue-300 ",children:"中文名称"}),c("th",{className:" py-2 w-48   font-bold  border bg-blue-50 border-blue-300 ",children:"字段类型"}),c("th",{className:"py-2 w-48  font-bold  border bg-blue-50 border-blue-300 ",children:"字段精度"}),!1,!1,c("th",{className:"px-6 py-2   font-bold border bg-blue-50 border-blue-300 ",children:"操作"})]})}),c("tbody",{className:"bg-white divide-y divide-gray-200",children:(w=(g=e==null?void 0:e.fields)==null?void 0:g.sort((u,l)=>u.sort-l.sort))==null?void 0:w.map((u,l)=>{var N,A,f,p,O,G,Z,m,W,z,P,$,q,x,V,_,ee,ue,ae,te,le,ne,re,se,ie;return h("tr",{className:Se({" hidden":ye.includes(u.fieldName)}),children:[c("td",{className:"px-6 py-1 whitespace-nowrap border text-center border-gray-300",children:e.fields&&((N=e.fields)==null?void 0:N.filter(t=>!t.fieldName||!ye.includes(t.fieldName)).indexOf(u))+1}),c("td",{className:"px-6  whitespace-nowrap border border-gray-300",children:u.id||u.sysField||u.javaType!==void 0&&u.javaType!=="java.lang.String"?u.entityType&&u.entityType!==e.type?c("span",{className:" font-bold text-blue-500",children:((A=d.find(t=>t.type===u.entityType))==null?void 0:A.title)||u.entityType}):"-":c(Le,{size:"small",className:" w-full",treeData:D,showClear:!0,leafOnly:!0,displayRender:t=>typeof t=="string"?t:t==null?void 0:t[t.length-1],onChange:t=>{var o;y(l,"entityType",t.length!==0?t==null?void 0:t[1]:void 0),y(l,"fieldName",t.length!==0?(t==null?void 0:t[1])+"Id":void 0),y(l,"title",t.length!==0?(o=d==null?void 0:d.find(L=>L.type===(t==null?void 0:t[1])))==null?void 0:o.title:void 0),y(l,"dbLength",t.length!==0?32:void 0),y(l,"javaType",t.length!==0?"java.lang.String":void 0),H()},value:u.entityType&&u.entityType!==e.type&&e.sysAppId?[((f=d==null?void 0:d.find(t=>t.type===u.entityType))==null?void 0:f.sysApp.id)||"",u.entityType]:[],placeholder:"外键表关联"})}),c("td",{className:"px-6  whitespace-nowrap border border-gray-300",children:(p=e==null?void 0:e.fields)!=null&&p[l].entityType&&((O=e==null?void 0:e.fields)==null?void 0:O[l].entityType)!==e.type||u.id||u.sysField?`${(Z=(G=e==null?void 0:e.fields)==null?void 0:G[l])==null?void 0:Z.fieldName}`:h("div",{className:" flex items-center justify-center space-x-1 text-red-500",children:[c(Ee,{size:"small",placeholder:"英文字段标识",onChange:t=>{y(l,"fieldName",t),H()},value:u.fieldName}),h("span",{className:"text-xs ",children:["*",e&&(e!=null&&e.fields)&&((z=(W=(m=e==null?void 0:e.fields)==null?void 0:m.filter)==null?void 0:W.call(m,t=>t.fieldName===u.fieldName&&u.fieldName!==void 0))==null?void 0:z.length)>1?"重复":u.fieldName&&!de(u.fieldName)?"禁用":""]})]})}),c("td",{className:"px-6  whitespace-nowrap border border-gray-300",children:h("div",{className:" flex items-center justify-center space-x-1  ",children:[c(Ee,{size:"small",placeholder:"填写中文名",className:" w-full",validateStatus:e&&(e!=null&&e.fields)&&((q=($=(P=e==null?void 0:e.fields)==null?void 0:P.filter)==null?void 0:$.call(P,t=>t.title===u.title))==null?void 0:q.length)>1?"error":"default",value:u.title,onBlur:t=>{var L;const o=t.target.value;if(o){const B=(L=e==null?void 0:e.fields)==null?void 0:L.find((ce,R)=>R===l),Ne=B==null?void 0:B.fieldName,be=B==null?void 0:B.id;if((Ne==null||Ne==="")&&be===void 0){const ce=cu.convertToPinyin(me(o),"-",!0).split("-").map(R=>R[0]).join("");y(l,"fieldName",ce)}}},onChange:t=>{y(l,"title",t),H()}}),h("span",{className:" text-xs  text-red-500",children:["*",e&&(e!=null&&e.fields)&&((_=(V=(x=e==null?void 0:e.fields)==null?void 0:x.filter)==null?void 0:V.call(x,t=>t.title===u.title&&u.title!==void 0))==null?void 0:_.length)>1?"重复":""]})]})}),c("td",{className:"px-6  whitespace-nowrap border border-gray-300",children:(ee=e==null?void 0:e.fields)!=null&&ee[l].entityType&&((ue=e==null?void 0:e.fields)==null?void 0:ue[l].entityType)!==e.type||u.id||u.sysField?`${(ae=K.find(t=>{var o;return t.value===((o=e==null?void 0:e.fields)==null?void 0:o[l].javaType)}))==null?void 0:ae.label}`:h("div",{className:" flex items-center justify-center space-x-1 font-bold text-red-500",children:[c(fe,{size:"small",placeholder:"字段类型",className:" w-full",value:u.javaType,optionList:K,onChange:t=>{y(l,"javaType",t),t!=="java.lang.String"&&y(l,"dictCode",void 0)}}),c("span",{children:"*"})]})}),c("td",{className:"px-6  whitespace-nowrap border border-gray-300",children:(te=e==null?void 0:e.fields)!=null&&te[l].entityType&&((le=e==null?void 0:e.fields)==null?void 0:le[l].entityType)!==e.type?u.dbLength:((ne=K.find(t=>{var o;return t.value===((o=e==null?void 0:e.fields)==null?void 0:o[l].javaType)}))==null?void 0:ne.length)&&c(fe,{size:"small",value:u.dbLength,optionList:(se=(re=K.find(t=>{var o;return t.value===((o=e==null?void 0:e.fields)==null?void 0:o[l].javaType)}))==null?void 0:re.length)==null?void 0:se.filter(t=>!u.id||!u.dbLength||t.value>=u.dbLength),placeholder:"字段长度",className:" w-full",onChange:t=>{y(l,"dbLength",t==null?void 0:t.toString())}})}),c("td",{className:"px-6  whitespace-nowrap border border-gray-300 text-center",children:!u.sysField&&(((ie=e==null?void 0:e.fields)==null?void 0:ie.length)||0)>1&&c(De,{onClick:()=>{U(t=>{var o;return{...t,fields:(o=t==null?void 0:t.fields)==null?void 0:o.filter((L,B)=>l!==B)}}),H()},size:"small",children:u.id?"删除":"取消"})})]},u.id||`temp_${l}`)})})]}),h("div",{className:" text-sm mt-2 flex justify-start",children:["使用 ",c("span",{className:"font-bold text-blue-500  ",children:"[alt+n]"}),"快速添加一个字段。"]}),h("div",{className:" text-center pt-4",children:[c("span",{className:" text-red-500 ",children:"*"}),c("span",{className:" text-sm",children:"仅需设计业务字段,系统会自动创建id(主键),createId,modifyId,createDate,modifyDate,status(数据状态)"})]})]})};export{gu as default,ye as sysFields};
