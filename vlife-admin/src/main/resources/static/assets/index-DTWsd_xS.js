import{r as c,d as e,j as t,aC as v,F as f}from"./index-SxAtwMns.js";import{l as m,b as g,c as b,a as x,C as y,T as w,e as N}from"./ChartPageDesign-Dj-mWXhg.js";import{B as p}from"./index-BLqHf6AC.js";import{V as s}from"./formPage-DEYoTnuZ.js";import"./index-DA4qStJP.js";import"./index-Kh_0iifu.js";import"./toInteger-uMFPjwcp.js";import"./index-DtzUPu3w.js";import"./SysApp-BMXU6j0c.js";import"./index-ubKoO-iZ.js";import"./index-CzLQ-uc5.js";import"./BasicTable-IJCc6PY7.js";import"./Tabs-BmUND6bg.js";import"./GroupButton-C-osmH_b.js";import"./static-wPmgQVRS.js";import"./TableHeader-OVk3QsYD.js";import"./vlifeModal-Qh_zqYFu.js";import"./index-OY_QAQ2f.js";const T="",P=({onSelect:r,page_type:l})=>{const[d,n]=c.useState(),[i,h]=c.useState(l);return c.useEffect(()=>{m({}).then(a=>{n(a.data)})},[]),e("div",{className:"flex-1 flex items-stretch overflow-hidden bg-white rounded-md ",children:e("main",{className:"flex-1 overflow-y-auto",children:t("div",{className:"pt-2  mx-auto px-2 ",children:[e("div",{className:"flex",children:t("h1",{className:"flex-1 text-base font-bold m-3 text-gray-900",children:[i==="templatePage"?"模版页面":"图表看板","设计"]})}),e("div",{className:"mt-3 sm:mt-2",children:e("div",{className:"hidden sm:block",children:t("div",{className:"flex items-center border-b border-gray-200",children:[t("nav",{className:"flex-1 -mb-px flex space-x-6 xl:space-x-8","aria-label":"Tabs",children:[e("a",{href:"#","aria-current":"page",className:`${i==="templatePage"?"border-indigo-500 text-indigo-600":"text-gray-500  hover:text-gray-700 hover:border-gray-300"}  whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,onClick:()=>h("templatePage"),children:"模版页面"}),e("a",{href:"#",onClick:()=>h("chartPage"),className:`border-transparent ${i==="chartPage"?"border-indigo-500 text-indigo-600":"text-gray-500  hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"图表看板"})]}),t("div",{className:"hidden ml-6 bg-gray-100 p-0.5 rounded-lg items-center sm:flex",children:[t("button",{type:"button",className:"p-1.5 rounded-md text-gray-400 hover:bg-white hover:shadow-sm focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",children:[e("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),e("span",{className:"sr-only",children:"Use list view"})]}),t("button",{type:"button",className:"ml-0.5 bg-white p-1.5 rounded-md shadow-sm text-gray-400 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",children:[e("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),e("span",{className:"sr-only",children:"Use grid view"})]})]})]})})}),e("section",{className:"mt-4 pb-8","aria-labelledby":"gallery-heading",children:t("ul",{role:"list",className:"grid grid-cols-2 gap-x-4 gap-y-8 sm:grid-cols-3 sm:gap-x-6 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-8 xl:gap-x-8",children:[e("li",{className:"relative ",children:e(p,{actionType:"create",model:"pageLayout",formTitle:`创建${i==="chartPage"?"图表看板":"模版页面"}`,reaction:[s.then("pageType").hide().value(i),s.field("pageType").eq("templatePage").then("name").title("模版页面名称"),s.field("pageType").eq("chartPage").then("name").title("图表看板名称"),s.then("url").title("访问地址"),s.then("pageType").hide().value(i)],saveApi:g,onSubmitFinish:()=>{m({}).then(a=>{n(a.data)})},children:t("div",{className:"relative block w-full  h-48 border-2 border-gray-300 border-dashed rounded-lg p-12 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e("svg",{className:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})}),t("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:["创建一个新",i==="chartPage"?"图表看板":"模版页面"]})]})})}),d==null?void 0:d.filter(a=>a.pageType===i).map(a=>t("div",{children:[e("div",{onClick:()=>{r(a)},style:{backgroundImage:`url(${T}/sysFile/image/${a.img})`},className:"group cursor-pointer relative  object-cover bg-center bg-no-repeat z-0  block w-full h-48 border-2 border-gray-300  border-dashed rounded-lg  text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t("div",{className:" absolute w-full text-sm   h-12 bottom-0 items-center justify-center",children:[e("div",{className:"  text-blue-500  font-bold ",children:a.name}),e("div",{className:"w-full text-gray-500 font-thin hidden group-hover:block h-10",children:"点击进入页面设计"})]})}),e("span",{className:"mt-2 block text-sm text-center font-medium text-gray-900",children:t("div",{className:"flex justify-center",children:[e(p,{position:"page",datas:[a],btnType:"link",title:"[编辑]",model:"pageLayout",actionType:"edit",reaction:[s.then("pageType").readPretty(),s.field("pageType").eq("chartPage").then("border").value(!0)],saveApi:g,onSubmitFinish:()=>{m({}).then(o=>{n(o.data)})}}),a.url&&e(v,{className:" cursor-pointer ",target:"_blank",to:`/page/${a.url}`,children:"[预览]"}),e(p,{position:"page",datas:[a],btnType:"link",title:"[删除]",actionType:"api",submitConfirm:!0,onSaveBefore:o=>[o.id],saveApi:b,onSubmitFinish:()=>{n(o=>o==null?void 0:o.filter(u=>u.id!==a.id))}})]})})]},a.id))]})})]})})})},I=()=>{const[r,l]=c.useState(),[d,n]=c.useState("templatePage");return t(f,{children:[r===void 0&&e(P,{page_type:d,onSelect:l}),(r==null?void 0:r.pageType)==="chartPage"&&e(x,{dto:r,chartComponents:y,onClose:()=>{l(void 0)}}),(r==null?void 0:r.pageType)==="templatePage"&&e(w,{allComponents:N,dto:r,onClose:i=>{l(void 0),n(i.pageType)}})]})};export{I as default};
