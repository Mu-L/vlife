import{ap as a,i as p,a0 as i}from"./index-SxAtwMns.js";const d=(e,t,...s)=>{for(const r of s)if(!m(e,r,t))return!1;return!0},m=(e,t,s)=>{if(e.length===0)return!0;for(const r of e)if(y(r,t,s))return!0;return!1},y=(e,t,s)=>{const r=e.where;for(const n of r)if(Array.isArray(t)){if(!t.every(u=>c(n,u,s)))return!1}else if(!c(n,t,s))return!1;return!0},c=(e,t,s)=>{var r,n,o;return e.fieldName&&e.opt===a.eq?((r=e.value)==null?void 0:r[0])==="${currUser}"&&t[e.fieldName]===(s==null?void 0:s.id)?!0:t[e.fieldName]===((n=e.value)==null?void 0:n[0]):e.fieldName&&e.opt===a.ne&&t[e.fieldName]!==((o=e.value)==null?void 0:o[0])||e.fieldName&&e.opt===a.isNotNull&&t[e.fieldName]!==null?!0:!!(e.fieldName&&e.opt===a.isNull&&t[e.fieldName]===null)},R=(e,t,s)=>{var u,f;const r=((u=e.sysResources)==null?void 0:u.paramGeneric)||((f=e.sysResources)==null?void 0:f.paramWrapper),n=e.sysResources.paramWrapper.indexOf("[]")!==-1||e.sysResources.paramWrapper==="List";return{...e,buttonVo:e,multiple:n,usableMatch:l=>e.conditionJson?d(JSON.parse(e.conditionJson),t,l):!0,sysResources:e.sysResources,model:(e.actionType==="create"||e.actionType==="edit")&&r?p(r):void 0,saveApi:l=>{if(e.sysResources.methedType.indexOf("PostMapping")!==-1)return i.post(e.sysResources.url,l,{headers:{"Content-Type":"application/json",buttonId:e.id}});if(e.sysResources.methedType.indexOf("DeleteMapping")!==-1)return i.delete(e.sysResources.url,{data:l,headers:{"Content-Type":"application/json",buttonId:e.id}})},loadApi:e.actionType==="edit"&&e.model&&e.model!==s?({id:l})=>i.get(`/${p(e.model)}/detail/${l}`):void 0}};export{R as d};
