import{l as z,g as a,c as f,aK as R,o as G,a2 as X,p as o,A as h,q as U,aL as Z,x as q,aM as J,C as A,aN as Q,aO as Y,H as ee}from"./index-BNDtW2eT.js";const T={PREFIX:`${z}-sidesheet`,DIALOG:`${z}-modal`},v={PLACEMENT:["top","right","bottom","left"],SIZE:["small","medium","large"],WIDTH:{small:448,medium:684,large:920},HEIGHT:448};var H=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t};let te=0;const l=T.PREFIX;class k extends a.PureComponent{constructor(){super(...arguments),this.onMaskClick=e=>{e.target===e.currentTarget&&this.close(e)},this.close=e=>{const{onClose:t}=this.props;t&&t(e)}}componentDidMount(){this.sideSheetId=`sidesheet-${te++}`}componentWillUnmount(){clearTimeout(this.timeoutId)}getMaskElement(){var e;const{mask:t,maskStyle:s,maskClosable:i}=this.props;return t?a.createElement("div",Object.assign({"aria-hidden":!0,key:"mask",className:f(`${l}-mask`,(e=this.props.maskClassName)!==null&&e!==void 0?e:""),style:s,onClick:i?this.onMaskClick:null},this.props.maskExtraProps)):null}renderHeader(){const{title:e,closable:t,headerStyle:s,closeIcon:i}=this.props;let d,p;if(e&&(d=a.createElement("div",{className:`${l}-title`,"x-semi-prop":"title"},this.props.title)),t){const u=i||a.createElement(X,null);p=a.createElement(R,{className:`${l}-close`,key:"close-btn",onClick:this.close,type:"tertiary",icon:u,theme:"borderless",size:"small"})}return a.createElement("div",{className:`${l}-header`,role:"heading","aria-level":1,style:Object.assign({},s)},d,p)}getDialogElement(){var e;const t=H(this.props,[]),s={};t.width&&(s.width=t.width,t.mask||(s.width="100%")),t.height&&(s.height=t.height);const i=this.renderHeader();return a.createElement("div",Object.assign({key:"dialog-element",role:"dialog",tabIndex:-1,className:f(`${l}-inner`,`${l}-inner-wrap`,(e=this.props.dialogClassName)!==null&&e!==void 0?e:"",`${l}-size-${t.size}`),style:Object.assign(Object.assign({},t.style),s)},this.props.wrapperExtraProps),a.createElement("div",{className:`${l}-content`},i,a.createElement("div",{className:`${l}-body`,style:t.bodyStyle,"x-semi-prop":"children"},t.children),t.footer?a.createElement("div",{className:`${l}-footer`,"x-semi-prop":"footer"},t.footer):null))}render(){const e=this.props,{mask:t,className:s,width:i,onClose:d,maskStyle:p,maskClosable:u,maskClassName:c,title:P,closable:_,headerStyle:$,height:g,style:y,size:x,bodyStyle:D,dialogClassName:C,children:j,footer:I,maskExtraProps:w,wrapperExtraProps:B}=e,S=H(e,["mask","className","width","onClose","maskStyle","maskClosable","maskClassName","title","closable","headerStyle","height","style","size","bodyStyle","dialogClassName","children","footer","maskExtraProps","wrapperExtraProps"]),O=f(s,{[`${l}-fixed`]:!t,[`${l}-size-${this.props.size}`]:!t}),b={};!t&&i&&(b.width=i);const E=G(S);return a.createElement("div",Object.assign({className:O,style:b},E),this.getMaskElement(),this.getDialogElement())}}k.propTypes={onClose:o.func,closeIcon:o.node};k.defaultProps={onClose:h};class N extends U{constructor(e){super(Object.assign(Object.assign({},N.defaultAdapter),e)),this.toggleDisplayNone=t=>{this._adapter.toggleDisplayNone(t)}}get defaultAdapter(){return{handleCancel:h,beforeShow:h,afterHide:h}}destroy(){this.afterHide()}handleCancel(e){this._adapter.notifyCancel(e)}beforeShow(){this.getProp("disableScroll")&&this._adapter.disabledBodyScroll(),this._adapter.setOnKeyDownListener()}afterHide(){this.getProp("disableScroll")&&this._adapter.enabledBodyScroll(),this._adapter.removeKeyDownListener()}handleKeyDown(e){const{closeOnEsc:t}=this.getProps();if(t&&e.keyCode===Z.ESC){e.stopPropagation(),this.handleCancel(e);return}}onVisibleChange(e){this._adapter.notifyVisibleChange(e)}}var se=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t};const r=T.PREFIX,oe=v.HEIGHT;class m extends q{constructor(e){super(e),this.handleCancel=t=>{this.foundation.handleCancel(t)},this.handleKeyDown=t=>{this.foundation.handleKeyDown(t)},this.updateState=()=>{this.foundation.toggleDisplayNone(!this.props.visible)},this.state={displayNone:!this.props.visible},this.foundation=new N(this.adapter),this.bodyOverflow="",this.scrollBarWidth=0,this.originBodyWidth="100%"}get adapter(){return Object.assign(Object.assign({},super.adapter),{disabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;this.bodyOverflow=document.body.style.overflow||"",!e&&this.bodyOverflow!=="hidden"&&(document.body.style.overflow="hidden",document.body.style.width=`calc(${this.originBodyWidth||"100%"} - ${this.scrollBarWidth}px)`)},enabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;!e&&this.bodyOverflow!=="hidden"&&(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyCancel:e=>{this.props.onCancel&&this.props.onCancel(e)},notifyVisibleChange:e=>{this.props.afterVisibleChange(e)},setOnKeyDownListener:()=>{window&&window.addEventListener("keydown",this.handleKeyDown)},removeKeyDownListener:()=>{window&&window.removeEventListener("keydown",this.handleKeyDown)},toggleDisplayNone:e=>{e!==this.state.displayNone&&this.setState({displayNone:e})}})}static getDerivedStateFromProps(e,t){const s={};return e.visible&&t.displayNone&&(s.displayNone=!1),!e.visible&&!e.motion&&!t.displayNone&&(s.displayNone=!0),s}componentDidMount(){this.scrollBarWidth=J(),this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,t,s){!e.visible&&this.props.visible&&this.foundation.beforeShow(),e.visible&&!this.props.visible&&this.foundation.afterHide(),t.displayNone!==this.state.displayNone&&this.foundation.onVisibleChange(!this.state.displayNone)}componentWillUnmount(){this.props.visible&&this.foundation.destroy()}renderContent(){const e=this.props,{placement:t,className:s,children:i,width:d,height:p,motion:u,visible:c,style:P,maskStyle:_,size:$,zIndex:g,getPopupContainer:y,keepDOM:x}=e,D=se(e,["placement","className","children","width","height","motion","visible","style","maskStyle","size","zIndex","getPopupContainer","keepDOM"]);let C={zIndex:g};y&&(C={zIndex:g,position:"static"});const{direction:j}=this.context,I=t==="left"||t==="right",w=t==="top"||t==="bottom",B=w?p||oe:"100%",S=f(r,s,{[`${r}-${t}`]:t,[`${r}-popup`]:y,[`${r}-horizontal`]:w,[`${r}-rtl`]:j==="rtl",[`${r}-hidden`]:x&&this.state.displayNone}),O=Object.assign(Object.assign(Object.assign({},I?d?{width:d}:{}:{width:"100%"}),D),{visible:c,motion:!1,size:$,className:S,height:B,onClose:this.handleCancel}),b=this.props.visible||this.props.keepDOM||this.props.motion&&!this.state.displayNone;return a.createElement(A,{motion:this.props.motion,animationState:c?"enter":"leave",startClassName:c?`${r}-animation-mask_show`:`${r}-animation-mask_hide`,onAnimationEnd:this.updateState},E=>{let{animationClassName:M,animationEventsNeedBind:L}=E;return a.createElement(A,{motion:this.props.motion,animationState:c?"enter":"leave",startClassName:c?`${r}-animation-content_show_${this.props.placement}`:`${r}-animation-content_hide_${this.props.placement}`,onAnimationEnd:this.updateState},W=>{let{animationClassName:K,animationStyle:F,animationEventsNeedBind:V}=W;return b?a.createElement(Q,{getPopupContainer:y,style:C},a.createElement(k,Object.assign({},O,{maskExtraProps:L,wrapperExtraProps:V,dialogClassName:K,maskClassName:M,maskStyle:Object.assign({},_),style:Object.assign(Object.assign({},F),P)}),i)):a.createElement(a.Fragment,null)})})}render(){return this.props,this.renderContent()}}m.contextType=Y;m.propTypes={bodyStyle:o.object,headerStyle:o.object,children:o.node,className:o.string,closable:o.bool,disableScroll:o.bool,getPopupContainer:o.func,height:o.oneOfType([o.number,o.string]),mask:o.bool,maskClosable:o.bool,maskStyle:o.object,motion:o.oneOfType([o.bool,o.object,o.func]),onCancel:o.func,placement:o.oneOf(v.PLACEMENT),size:o.oneOf(v.SIZE),style:o.object,title:o.node,visible:o.bool,width:o.oneOfType([o.number,o.string]),zIndex:o.number,afterVisibleChange:o.func,closeOnEsc:o.bool,footer:o.node,keepDOM:o.bool,"aria-label":o.string};m.__SemiComponentName__="SideSheet";m.defaultProps=ee(m.__SemiComponentName__,{visible:!1,motion:!0,mask:!0,placement:"right",closable:!0,footer:null,zIndex:1e3,maskClosable:!0,size:"small",disableScroll:!0,closeOnEsc:!1,afterVisibleChange:h,keepDOM:!1});export{m as S};
