import{r as o,j as T,d as i,c as se,T as he,B as Ie,ag as C,P as Se,u as ce,a2 as me,F as $e,aD as _e,av as re,aE as Ce,aF as Te,aG as Pe,a0 as je,aH as Ee,aI as Oe,aJ as We}from"./index-BNDtW2eT.js";import{N as xe,D as ke,O as Re,P as Ve,T as Fe,o as ae,J as Ae,V as Be,U as ze,u as He}from"./formPage-BHPYqPSB.js";import{d as Ke,c as Ge,u as Ue,g as ge}from"./useEffectWithTarget-aARMLXxS.js";import{t as ye,D as ve,R as Je,o as oe,h as Le,S as de,v as Qe,w as Ye,l as Xe,T as Ne}from"./index-C6DPW6pI.js";import{G as be}from"./GroupButton-D5eFJVxs.js";import{F as Ze}from"./index-DQz7rEVH.js";function De(r){var e=o.useRef(0),p=xe(o.useState(r),2),c=p[0],l=p[1],d=o.useCallback(function(v){cancelAnimationFrame(e.current),e.current=requestAnimationFrame(function(){l(v)})},[]);return ke(function(){cancelAnimationFrame(e.current)}),[c,d]}var qe=Ke(o.useLayoutEffect),Me=Ge?qe:Ue;function we(r){var e=xe(De(function(){var l=ge(r);return l?{width:l.clientWidth,height:l.clientHeight}:void 0}),2),p=e[0],c=e[1];return Me(function(){var l=ge(r);if(l){var d=new Re(function(v){v.forEach(function(s){var g=s.target,h=g.clientWidth,u=g.clientHeight;c({width:h,height:u})})});return d.observe(l),function(){d.disconnect()}}},[],r),p}const et=({className:r,pageSize:e,currentPage:p,total:c,max:l,onPageSizeChange:d,onPageChange:v})=>{const s=[15,30,50],g=o.useMemo(()=>l===void 0||l===-1||l>(c||0)?c||0:l,[c,l]);return T("div",{className:`${r} flex  items-center`,children:[T("div",{className:" text-gray-500 pl-4 ",children:["共",c||0,"条"]}),i(Ve,{pageSize:e,total:g,currentPage:p,onPageChange:v,onPageSizeChange:v}),i("div",{className:"flex-1 text-red-500 !text-sm font-light text-center ",children:!!l&&l!==-1&&l<c&&`数据量达到显示上限(${l}条)，升级版本后无限制`}),T("div",{className:"text-gray-500 space-x-2 items-center pr-4 flex ",children:[s.map(h=>i("span",{onClick:()=>{d(h)},className:` ml-1 border  rounded hover:bg-slate-200 hover:cursor-pointer p-1 ${se({" bg-slate-100 text-blue-500 font-bold":h===e," font-normal":h!==e})}`,children:h},h)),"条记录"]})]})},le=({onDataChange:r,className:e,tooltip:p,value:c,onChange:l,fieldType:d="string",hideBtn:v=!1,placeholder:s="按Enter键搜索"})=>{const[g,h]=o.useState(!1),[u,n]=o.useState(c),m=o.useRef(null),x=o.useCallback(()=>{h(!0),setTimeout(()=>{m.current&&m.current.focus()},0)},[m]),y=()=>{u===""&&h(!1)},b=B=>{B.key==="Enter"&&r(u)},A=o.useCallback(B=>{n(B),l&&l(B)},[l]),F=o.useMemo(()=>i(d==="string"?Ze:Fe,{className:se({hidden:!g}),ref:m,prefix:d==="string"?i(ye,{}):void 0,value:u,onChange:A,onBlur:y,onKeyPress:b,placeholder:s}),[m,u,A,y,l,b]);return i("div",{className:`${e} cursor-pointer`,id:"tooltip-container",children:g||v?p?i(he,{content:p,visible:g,children:F}):F:i(Ie,{theme:"borderless",className:se({hidden:!g}),onClick:x,icon:i(ye,{}),block:!0,children:"搜索"})})},tt=({field:r,where:e=[],className:p,entityName:c,onChange:l,option:d})=>{var m,x,y,b,A,F,B,E,w,U,Z,ee,G,Q,J,$,D;const[v,s]=o.useState(),[g,h]=o.useState(),u=(f,P,k)=>{var q,Y;return[...(k==null?void 0:k.filter(X=>X.opt!==P))||[],{fieldId:r.id,fieldName:r.x_component==="RelationInput"||r.x_component==="TreeSelect"?(Y=(q=r.pageComponentPropDtos)==null?void 0:q.find(X=>X.propName==="labelField"))==null?void 0:Y.propVal:r.x_component==="UserSelect"?"name":r.fieldName,entityName:r.entityType!==c?r.entityType:void 0,opt:P,fieldType:r.fieldType,value:f instanceof Array?f:[f]}]},n=o.useCallback((f,P)=>{if(f){let k=u(f,P,e);P===C.goe&&g&&(k=u(g,C.loe,k)),P===C.loe&&v&&(k=u(v,C.goe,k)),l(k)}else l([...(e==null?void 0:e.filter(k=>k.opt!==P))||[]])},[r,e,c,g,v]);return T("div",{className:`${p} flex-grow px-4 pt-6`,children:[r.fieldType==="string"&&r.x_component!=="DictSelect"&&r.x_component!=="DictRadio"&&r.x_component!=="DictCheckbox"&&r.x_component!=="VfImage"&&i(le,{className:"border-b pb-2 border-dashed border-gray-300 mb-2",hideBtn:!0,value:(y=(x=(m=e==null?void 0:e.filter(f=>f.opt==="like"))==null?void 0:m[0])==null?void 0:x.value)==null?void 0:y[0],onDataChange:f=>{n(f,C.like)}}),r.fieldType==="number"&&T("div",{className:"flex items-center space-x-1 justify-center border-b pb-2 border-dashed border-gray-300 mb-2",children:[i(le,{fieldType:r.fieldType,placeholder:"最小值",value:(F=(A=(b=e==null?void 0:e.filter(f=>f.opt==="goe"))==null?void 0:b[0])==null?void 0:A.value)==null?void 0:F[0],hideBtn:!0,onChange:s,onDataChange:f=>{n(f,C.goe)}}),i("span",{children:"~"}),i(le,{fieldType:r.fieldType,placeholder:"最大值",onChange:h,value:(w=(E=(B=e==null?void 0:e.filter(f=>f.opt==="loe"))==null?void 0:B[1])==null?void 0:E.value)==null?void 0:w[0],hideBtn:!0,onDataChange:f=>{n(f,C.loe)}})]}),r.fieldType==="date"&&T("div",{className:"flex items-center space-x-1 justify-center border-b pb-2 border-dashed border-gray-300 mb-2",children:[i(ve,{format:"yyyy/MM/dd",placeholder:"最小日期",value:(Z=(U=e==null?void 0:e.filter(f=>f.opt==="goe"))==null?void 0:U[0])==null?void 0:Z.value,onChange:(f,P)=>{n(P,C.goe)}}),i("span",{children:"~"}),i(ve,{format:"yyyy/MM/dd",value:(G=(ee=e==null?void 0:e.filter(f=>f.opt==="loe"))==null?void 0:ee[0])==null?void 0:G.value,placeholder:"最大日期",onChange:(f,P)=>{n(P,C.loe)}})]}),T(Je,{className:" border-b pb-2 border-dashed border-gray-300 mb-2",direction:"vertical",value:(J=(Q=e==null?void 0:e.filter(f=>f.opt==="isNull"||f.opt==="isNotNull"))==null?void 0:Q[0])==null?void 0:J.opt,onChange:f=>{f.target.value&&f.target.value.length>0?l([...(e==null?void 0:e.filter(P=>P.opt!=="isNull"&&P.opt!=="isNotNull"))||[],{fieldId:r.id,fieldName:r.fieldName,fieldType:r.fieldType,opt:f.target.value}]):l([...(e==null?void 0:e.filter(P=>P.opt!=="isNull"&&P.opt!=="isNotNull"))||[]])},children:[i(oe,{children:"全部"}),i(oe,{value:"isNotNull",children:"已填写"}),i(oe,{value:"isNull",children:"未填写"})]}),d&&i(Le,{options:d,value:(D=($=e==null?void 0:e.filter(f=>f.opt==="in"))==null?void 0:$[0])==null?void 0:D.value,onChange:f=>{n(f,C.in)}})]})},nt=({field:r,onSort:e,where:p,onFilter:c,option:l,entityName:d})=>{var u,n,m;const[v,s]=o.useState(!1),[g,h]=o.useState("desc");return T("div",{className:"flex w-full  items-center  ",children:[T("div",{onMouseOver:()=>{s(!0)},onMouseOut:()=>{s(!1)},onClick:()=>{e&&(e({fieldName:r.fieldName,sort:g}),h(g==="desc"?"asc":"desc"))},className:"flex justify-center items-center w-full hover:bg-gray-200 hover:cursor-pointer p-1  rounded-sm ",children:[v===!1&&((u=ae[r.x_component])==null?void 0:u.icon)&&i(de,{size:"small",readPretty:!0,value:(n=ae[r.x_component])==null?void 0:n.icon}),v===!0&&((m=ae[r.x_component])==null?void 0:m.icon)&&i(Qe,{}),i("div",{className:" pl-1 text-black font-bold rounded",children:r.title})]}),i("div",{className:"w-4",children:i(Se,{position:"bottom",spacing:20,trigger:"click",content:i(tt,{entityName:d,option:l,className:" p-2 w-72 rounded-md shadow-md bg-white",field:r,where:p,onChange:x=>{c&&c(x)}}),children:i(Ye,{className:"hover:cursor-pointer",size:"small"})})})]})},rt=({where:r,order:e,formVo:p,onOrderRemove:c,onConditionRemove:l,...d})=>{var h;const{dicts:v}=ce(),s=o.useCallback(u=>p.fields.filter(n=>n.fieldName===u.fieldName)[0].title+"："+(u.sort==="asc"?"升序":"降序"),[p]),g=o.useCallback(u=>u.title+"："+r.filter(n=>n.fieldId===u.id).filter(n=>n.opt===C.isNull||n.opt===C.isNotNull||(n==null?void 0:n.value)&&(n==null?void 0:n.value.length)>0).map(n=>{var m,x,y;return n.opt===C.isNull?"未填写":n.opt===C.isNotNull?"已填写":u.dictCode?v[u.dictCode].data.filter(b=>{var A;return n.value===b.value||((A=n==null?void 0:n.value)==null?void 0:A.includes(b.value))}).map(b=>b.label).toString():n.opt===C.loe&&r.map(b=>b.opt).includes(C.goe)||n.opt===C.goe&&r.map(b=>b.opt).includes(C.loe)?n.opt===C.loe?void 0:`${r.filter(b=>b.opt===C.goe)[0].value}~${r.filter(b=>b.opt===C.loe)[0].value}`:u.fieldType==="boolean"?((m=n==null?void 0:n.value)==null?void 0:m.length)===1?n.value[0]===!0?"是":"否":((x=n==null?void 0:n.value)==null?void 0:x.length)===2?"是,否":"":(y=n==null?void 0:n.value)==null?void 0:y[0]}).filter(n=>n!=null).join(","),[p,r]);return e.length>0||r.length>0?T(Xe,{className:`${d.className} whitespace-nowrap`,style:d.style,children:[e==null?void 0:e.map((u,n)=>T("div",{className:" bg-gray-100 hover:bg-gray-200 p-1 rounded h-full items-center flex text-xs  text-gray-500\r hover:text-gray-600\r ",children:[i("div",{className:"",children:`${s(u)}`}),i(me,{size:"small",className:"ml-2 cursor-pointer",onClick:()=>{c(e.filter((m,x)=>x!==n))}})]},`order${u.fieldName}`)),(h=p.fields)==null?void 0:h.filter(u=>r.map(n=>n.fieldId).includes(u.id)).filter(u=>g(u)!==u.title+"：").map((u,n)=>T("div",{className:" bg-gray-100 hover:bg-gray-200 p-1 rounded h-full items-center flex text-xs  text-gray-500\r hover:text-gray-600\r ",children:[i("div",{children:`${g(u)}`}),i(me,{size:"small",className:"ml-2 hover:cursor-pointer",onClick:()=>{l(u.id)}})]},`condition${u.id}`))]}):i($e,{})},it=new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}),at=({onLineClick:r,className:e,width:p,model:c,dataSource:l,fkMap:d,parentMap:v,orders:s,select_more:g,read:h=!1,ignores:u=[],onSelected:n,dicts:m,onColumnFilter:x,selected:y,checkedBottomShow:b,onColumnSort:A,onFieldClick:F,outSelectedColumn:B,btns:E,maxHeight:w,activeKey:U,pagination:Z,flowFormType:ee,queryFunc:G,columnSortFieldNames:Q,mainFormDto:J,wheres:$=[],...D})=>{const[f,P]=o.useState();o.useEffect(()=>{P(l)},[l]);const k=o.useMemo(()=>180,[E]),q=o.useCallback(N=>{var W,M;if(J&&J[N])return(M=(W=J[N].fields.filter(te=>te.fieldName==="name"||te.fieldName==="title"))==null?void 0:W[0])==null?void 0:M.fieldName},[J]),[Y,X]=o.useState();o.useEffect(()=>{B&&X(B)},[B]);const z=o.useMemo(()=>{const N=[];if(c&&c.fields){let W=[];!Q||Q.length===0?W=c.fields.filter(t=>!u.includes(t.fieldName)&&t.fieldName!=="id"&&t.x_component!=="VfEditor"&&t.dataType!=="array").sort((t,H)=>t.sort-H.sort):W=Q.map(t=>c.fields.find(H=>H.fieldName===t));const M=k,te={string:150,boolean:150,number:150,date:150},ue=p-M-100,fe=W.filter(t=>t&&t.fieldName).map(t=>te[t.fieldType]).reduce((t,H)=>t+H,0);let pe=0;return fe<ue&&(pe=(ue-fe)/W.length),W.filter(t=>!!t).forEach(t=>{var H;N.push({...t,title:i(nt,{entityName:c.entityType,option:t.x_component==="DictSelect"||t.x_component==="DictRadio"||t.x_component==="DictCheckbox"?(H=m[`${t.entityType}_${t.fieldName}`])==null?void 0:H.data:t.fieldType==="boolean"?[{label:"是",value:!0},{label:"否",value:!1}]:[],field:t,where:$==null?void 0:$.filter(R=>R.fieldId===t.id),onFilter:R=>{x&&x(R?[...$==null?void 0:$.filter(a=>a.fieldId!==t.id),...R]:$==null?void 0:$.filter(a=>a.fieldId!==t.id))},onSort:R=>{A(_e(s||[],R))}}),width:te[t.fieldType]+pe,dataIndex:t.fieldName,align:t.listAlign?t.listAlign:"center",className:`${Y===t.fieldName?"bg-blue-200":""} `})}),N==null||N.forEach((t,H)=>{var R;if(t.ellipsis=!0,t.x_component==="DictSelect"||t.x_component==="DictRadio"||t.x_component==="DictCheckbox")t.render=(a,_,V)=>a?a.split(",").map((O,S)=>{var L,K;const I=(K=(L=m[`${t.dictCode||t.entityType+"_"+t.fieldName}`])==null?void 0:L.data)==null?void 0:K.find(ne=>ne.value===O);return I&&I.color?i(Ne,{className:`${I.color} !text-white mr-2`,children:I==null?void 0:I.label},`${V}_${S}_${I.value}`):I?i(Ne,{className:" mr-2",children:I==null?void 0:I.label},`${V}_${S}_${I.value}`):"-"}):"-";else if(t.x_component==="RelationInput"||t.x_component==="UserInput"||t.x_component==="VfTreeInput"&&((R=t.fieldName)!=null&&R.endsWith("Id")))t.render=(a,_,V)=>(d==null?void 0:d[a])||a;else if(t.x_component==="M2MSelectInput")t.render=(a,_,V)=>((a==null?void 0:a.map(O=>d==null?void 0:d[O]))||[]).join(",");else if(t.x_component==="InputMoney")t.render=(a,_,V)=>{var O,S,I;return a?(I=(S=(O=ae.InputMoney)==null?void 0:O.props)==null?void 0:S.formatter)==null?void 0:I.call(S,a):""};else if(t.x_component==="DatePicker")t.render=(a,_,V)=>{var S,I;const O=(I=(S=t.pageComponentPropDtos)==null?void 0:S.find(L=>L.propName==="type"))==null?void 0:I.propVal;return a?O==="month"?re(a,"yyyy/MM"):O==="dateTime"?re(a,"yyyy/MM/dd HH:mm:ss"):re(a,"yyyy/MM/dd"):""};else if(t.dictCode){const a=t.dictCode;t.render=(_,V,O)=>{var S,I,L;if(_===""||_===null||_===void 0)return"-";{const K=(L=(I=(S=m[a||"vlife"])==null?void 0:S.data)==null?void 0:I.filter(ne=>ne.value+""==_+""))==null?void 0:L[0];return K&&K.color?i("span",{className:`text-white  text-xs ${se({[`bg-${K.color}-500`]:K.color!==void 0})} px-3 py-1 font-bold  rounded-lg`,children:K.label}):K?K.label:_}}}else t.fieldType==="boolean"?t.render=(a,_,V)=>a===null?"-":a?"是":"否":t.entityFieldName==="id"&&d?t.render=(a,_,V)=>{if(a){const O=S=>{var L,K;const I=q((L=c.fields.find(ne=>ne.fieldName===t.dataIndex))==null?void 0:L.entityType);return I?(K=d==null?void 0:d[S])==null?void 0:K[I]:T("div",{className:" flex items-center space-x-2",children:[i(he,{content:"需配置外外键字段所在表的标签字段",children:i(Pe,{className:" text-red-500"})}),i("div",{children:"配置"})]})};return a.indexOf(",")===-1?F&&t.dataIndex&&F[t==null?void 0:t.dataIndex]?i("div",{className:"hover:underline text-blue-600 cursor-pointer",onClick:S=>{S.stopPropagation(),t.entityFieldName==="id"&&d?F[t.dataIndex||""](d[a]):F[t.dataIndex||""](_)},children:O(a)}):O(a):a.split(",").map(S=>i("span",{className:"text-blue-600 cursor-pointer mr-1",children:O(S)},S))}}:t.fieldName==="pcode"&&v?t.render=(a,_,V)=>v[a]:t.fieldType==="date"?t.render=(a,_,V)=>{if(typeof a=="number")return re(a,"yyyy/MM/dd");if(a){var O=new Date(a);return re(O,"yyyy/MM/dd")}}:Ce.includes(t.fieldType)?t.render=(a,_,V)=>t.money?it.format(a):a:t.safeStr&&(t.render=(a,_,V)=>Te(a))}),N==null||N.forEach((t,H)=>{t.x_component==="VfImage"?t.render=(R,a,_)=>i(Ae,{size:"small",value:R,readPretty:!0,onChange:()=>{}},`index${_}`):t.x_component==="SelectIcon"&&(t.render=(R,a,_)=>i(de,{value:R,readPretty:!0},`index${_}`))}),h!==!0&&E.length!==0&&(N==null||N.push({title:"操作",align:"center",fixed:"right",fieldName:"operate",width:k,render:(t,H,R)=>i(be,{more:!0,className:" flex items-center justify-center",entity:c.entityType,dataType:c.type,position:"tableLine",line:R,btnType:"link",activeKey:U,btns:[...E.map(a=>({...a,model:a.model||c.type,reaction:[...a.reaction||[],Be.result((_,V)=>{var O;return((O=V==null?void 0:V.fields)==null?void 0:O.find(S=>S.fieldName===`${c.entityType}Id`))!==void 0}).then(`${c.entityType}Id`).value(H.id).readPretty()]}))],datas:[{...H,tableSort:R}],...D,onDataChange:a=>{a!==void 0&&typeof a=="object"?G==null||G():G&&G()}},`lineBtn_${R}`)})),N}return[]},[c,p,d,v,E,f,h,s,Q,$,Y,k,J]),j=o.useMemo(()=>(N,W)=>({style:W%2===1?{background:"#f9fafc"}:{},onClick:M=>{r==null||r(N)}}),[c,r]),ie=o.useMemo(()=>({disabled:!g,fixed:!0,width:50,selectedRowKeys:y==null?void 0:y.map((N,W)=>N.id),onSelect:(N,W)=>{g==!1&&W==!0&&n&&n([N])},onChange:(N,W)=>{g&&W&&(n==null||n([...W.map(M=>M)]))}}),[y]);return T("div",{className:`${e} flex flex-col `,children:[i(rt,{className:" h-7 items-center flex ml-2 my-1",formVo:c,onOrderRemove:N=>{A(N)},order:s||[],where:$||[],onConditionRemove:N=>{x($.filter(W=>W.fieldId!==N))}}),i(ze,{className:" w-full flex-1  ",scroll:{y:w},resizable:!0,size:"middle",style:{display:"block",overflow:"auto"},bordered:!0,rowKey:"id",dataSource:f,columns:z,onRow:j,rowSelection:h===!0||g===void 0?void 0:ie,pagination:Z||!1,...D})]})},lt="15",mt=({className:r,tableModel:e,req:p,ignores:c,onLineClick:l,onFieldClick:d,btns:v,sysTabDto:s})=>{var X;const{dicts:g,menu:h,setTableData:u,tableData:n}=ce(),{getModel:m}=He(),x=o.useRef(null),y=we(x),[b,A]=o.useState(1),[F,B]=o.useState(Number(lt)),[E,w]=o.useState(),[U,Z]=o.useState([]),[ee,G]=o.useState(),[Q,J]=o.useState(),[$,D]=o.useState([]),[f,P]=o.useState(),k=o.useMemo(()=>y!=null&&y.height?(y==null?void 0:y.height)-100:400,[y]),q=o.useMemo(()=>$&&$.length>0?{...p,conditions:p!=null&&p.conditions?{...p.conditions,where:[...p.conditions.where||[],...$]}:{orAnd:"and",where:$}}:p,[$,p]),Y=o.useMemo(()=>{if(e!=null&&e.type&&e.state&&(e.state==="published"||e.state==="restart")){const{type:z}=e;return j=>je.post(`/${z}/page`,j)}},[e==null?void 0:e.type,e==null?void 0:e.state]);return o.useEffect(()=>{const z={order:{orders:U&&U.length>0?Ee(U):s!=null&&s.orderFieldName?`${s==null?void 0:s.orderFieldName}_${(s==null?void 0:s.orderDirection)||"desc"}`:""},pager:{size:F,page:b},...q,tabId:s==null?void 0:s.id};Y&&Y(z).then(j=>{j.data&&(j.data.totalPage!==0&&j.data.totalPage<b&&A(j.data.totalPage),w(j.data))})},[e==null?void 0:e.type,U,F,b,n.loadDataFlag,JSON.stringify(q),s==null?void 0:s.id,Y]),o.useEffect(()=>{if(e&&E){f||e.fields.filter(j=>j.entityType!==e.entityType&&j.entityFieldName==="id").forEach(j=>{m({type:j.entityType}).then(ie=>{ie&&P(N=>({...N,[j.entityType]:ie}))})});const z=async j=>{G(await Oe(j,e,m)),J(await We(j,e))};E.result&&E.result.length>0&&z(E.result)}else G({})},[E,e]),T("div",{ref:x,className:`${r} relative h-full flex flex-col text-sm    `,children:[e&&!!ee&&(y==null?void 0:y.width)&&i(at,{className:"flex-1 flex ",queryFunc:()=>{u(z=>({...z,loadDataFlag:z.loadDataFlag+1}))},model:e,dataSource:(E==null?void 0:E.result)||[],fkMap:ee,parentMap:Q,maxHeight:k,width:y.width,ignores:c,onFieldClick:d,dicts:g,onColumnSort:Z,orders:U,wheres:$,onColumnFilter:D,selected:n.selected,onSelected:z=>{u(j=>({...j,selected:z}))},columnSortFieldNames:((X=s==null?void 0:s.fieldNames)==null?void 0:X.split(","))||[],btns:l?[]:v||[],select_more:!0,onLineClick:l,mainFormDto:f},e.type+F+b+(h==null?void 0:h.id)),(e==null?void 0:e.state)!=="published"&&i("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-red-300 font-medium",children:"当前可预览，数据接口需要重启服务后则能正常使用"}),i(et,{className:"z-30 bottom-0 absolute w-full font-bold h-12 bg-white border-t border-gray-100",total:E==null?void 0:E.total,pageSize:F,currentPage:b,max:1e4,onPageChange:A,onPageSizeChange:B})]})},gt=({className:r,leftBtns:e,rightBtns:p,tableModel:c,onSearchChange:l,searchFields:d,children:v})=>{const{tableData:s,setTableData:g}=ce(),[h,u]=o.useState([]);o.useState(!1),o.useEffect(()=>{u(c.fields||[])},[c]);const n=o.useMemo(()=>{var m;return(m=c.fields)==null?void 0:m.filter(x=>x.fieldType==="string"&&(d==null?void 0:d.includes(x.fieldName)))},[c,d]);return T("div",{className:`${r}  flex`,children:[i("div",{className:"flex items-center justify-between px-2 bg-white rounded-t-xl w-full",children:T("div",{className:"flex  h-full items-center",children:[v,e,n&&n.length>0&&i(le,{className:" flex ml-2  ",tooltip:`根据进行${n.map(m=>m.title).join(",")}查询`,onDataChange:m=>{if(m&&m!==""){const x=n.map(y=>({fieldName:y.fieldName,opt:C.like,value:[m]}));l==null||l({orAnd:"or",where:x,conditions:[]})}else l==null||l(void 0)}})]})}),i("div",{className:"flex  h-full items-center mr-2",children:i(be,{position:"tableToolbar",activeKey:s.tabActiveKey,btns:(p||[]).map(m=>({...m,onSubmitFinish:m.onSubmitFinish||(x=>{g(y=>({...y,selected:[],loadDataFlag:y.loadDataFlag+1}))})})),datas:s==null?void 0:s.selected})})]})};function st(r){return r?typeof r=="string"?i(de,{readPretty:!0,value:r}):r.render():null}const yt=r=>{const{tabs:e,className:p,activeKey:c,onTabChange:l,children:d,tabBtn:v}=r;return T("div",{className:`${p} flex h-10 bg-white`,children:[i("div",{className:" w-4 border-b border-gray-300"}),e==null?void 0:e.map((s,g)=>g===0&&!c||c===s.key?T("div",{className:" px-2 flex cursor-pointer justify-center items-center  border-gray-300 rounded-t-md border-l border-r border-t bg-slate-50",children:[s.icon?st(s.icon):i("i",{className:"  icon-subtable text-green-500  icon-table font-thin"}),T("span",{className:"font-bold text-sm px-1",children:[" ",s.name]}),v]},s.key):T("div",{onClick:()=>l==null?void 0:l(s.key),className:" text-gray-500 hover:bg-slate-100 cursor-pointer px-2 flex justify-center items-center text-sm  rounded-t-md border-b order-gray-300",children:[i("i",{className:"  icon-subtable  icon-table font-thin "}),T("span",{className:"font-thin",children:[" ",s.name]})]},s.key)),d&&i("div",{className:" flex border-b border-gray-300 flex-1 items-center justify-start pl-1",children:d})]})};export{yt as T,mt as a,gt as b,we as u};
