import{r as p,l as w,f as E,k as f,j as O}from"./index-zu87m18r.js";import{D as k}from"./index-D_2oZ5Sg.js";import{u as F,V as g}from"./index-D84rZFL3.js";var v=function(t,e){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},v(t,e)};function A(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");v(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var S=function(){return S=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},S.apply(this,arguments)};function H(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function M(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,a=[],c;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(d){c={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return a}function P(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function b(t){var e=p.useRef(t);return e.current=t,e}var D=function(t){var e=b(t);p.useEffect(function(){return function(){e.current()}},[])};const L=({datas:t,btns:e,btnType:n="button",className:r,dataType:s,entity:a,line:c,dropdown:d=!1,activeKey:m,onDataChange:_,position:l="page"})=>{const[T,x]=p.useState(!1),[C,j]=p.useState(0),B=F("formModal"),h=p.useMemo(()=>{let o=e.filter(i=>i.activeTabKey===void 0||m&&i.activeTabKey.includes(m));const y=o.filter(i=>!i.sysResources).filter(i=>i.position&&i.position===l),u=o.filter(i=>!i.sysResources).filter(i=>i.position===void 0).filter(i=>l==="tableLine"?i.multiple!==!0&&i.actionType!=="create":l==="tableToolbar"?i.multiple===!0:l==="formFooter"?i.model!==void 0:!0);return[...o.filter(i=>i.sysResources),...y,...u]},[l,e,m,s]);return d===!1?w("div",{className:`flex ${r} !items-center ${E({"justify-start":l!=="formFooter","justify-end":l==="formFooter"})} space-x-1`,children:[h.map((o,y)=>f(g,{...o,activeKey:m,btnType:n!==void 0&&(o.btnType===void 0||o.btnType===null)?n:o.btnType,position:l!==void 0&&o.position===void 0?l:o.position,datas:o.datas||t,entity:o.entity||a,onSubmitFinish:o.onSubmitFinish||_,otherBtns:e.filter(u=>!(u.title===o.title&&u.actionType===o.actionType&&u.btnType===o.btnType)),onCheck:u=>{e.length===1&&u===!1&&x(!0)}},`btn_${c}_${y}`)),T&&l==="formFooter"&&f(O,{icon:f("i",{className:" icon-close"}),onClick:()=>{B.hide()},children:"关闭"})]}):f(k,{position:"bottomRight",clickToHide:!0,render:f("div",{className:"flex flex-col p-2 space-y-1  ",children:h.map((o,y)=>p.createElement(g,{...o,position:"dropdown",disabledHide:o.disabledHide!=null?o.disabledHide:!1,onCheck:()=>{j(u=>u+1)},datas:o.datas||t,onSubmitFinish:o.onSubmitFinish||_,otherBtns:o.model?h:[],key:`btn_${c}_${y}`}))}),children:d===!0?f("i",{className:`${r} icon-more_vert hover:bg-gray-200 p-1 rounded-md cursor-pointer  text-gray-400 hover:text-black`,onClick:o=>{o.cancelable=!0,o.stopPropagation()}}):d})};export{L as B,S as _,P as a,M as b,H as c,D as d,A as e,b as u};
