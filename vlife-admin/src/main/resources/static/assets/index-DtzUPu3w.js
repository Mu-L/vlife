import{c3 as R,r as m,l as Q,be as g,q as ee,A as h,b1 as B,b2 as C,bp as te,dg as ne,p as s,g as u,x as se,c as f,z as y,bk as ae,cH as oe}from"./index-SxAtwMns.js";function re(d){return m.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},d),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.0352 16.8626C16.4597 17.4585 15.5101 17.4751 14.9142 16.8996L12.0368 14.121L9.25822 16.9984C8.68274 17.5943 7.73314 17.6109 7.13722 17.0354C6.5413 16.4599 6.52472 15.5103 7.1002 14.9144L9.87883 12.037L7.00147 9.2584C6.40555 8.68293 6.38897 7.73332 6.96445 7.1374C7.53992 6.54148 8.48953 6.52491 9.08545 7.10038L11.9628 9.87901L14.7414 7.00165C15.3169 6.40573 16.2665 6.38916 16.8624 6.96463C17.4584 7.54011 17.4749 8.48971 16.8995 9.08563L14.1208 11.963L16.9982 14.7416C17.5941 15.3171 17.6107 16.2667 17.0352 16.8626Z",fill:"currentColor"}))}const ie=R(re,"clear");function le(d){return m.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},d),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7071 3.70711C22.0976 3.31658 22.0976 2.68342 21.7071 2.29289C21.3166 1.90237 20.6834 1.90237 20.2929 2.29289L17.3135 5.27233C15.8114 4.50566 14.0321 4 12 4C5 4 1 10 1 12C1 13.1757 2.38219 15.7335 4.94345 17.6423L2.29289 20.2929C1.90237 20.6834 1.90237 21.3166 2.29289 21.7071C2.68342 22.0976 3.31658 22.0976 3.70711 21.7071L21.7071 3.70711ZM7.8284 14.7574L9.29237 13.2934C9.10495 12.9018 9 12.4631 9 12C9 10.3431 10.3431 9 12 9C12.4631 9 12.9018 9.10495 13.2934 9.29237L14.7574 7.8284C13.967 7.30488 13.0191 7 12 7C9.23858 7 7 9.23858 7 12C7 13.0191 7.30488 13.967 7.8284 14.7574Z",fill:"currentColor"}),m.createElement("path",{d:"M12 20C10.7789 20 9.64914 19.8174 8.61594 19.5054L11.1871 16.9342C11.4516 16.9775 11.7232 17 12 17C14.7614 17 17 14.7614 17 12C17 11.7232 16.9775 11.4516 16.9342 11.1871L20.5032 7.61808C22.1342 9.27317 23 11.0695 23 12C23 14 19 20 12 20Z",fill:"currentColor"}))}const de=R(le,"eye_closed_solid"),ue={PREFIX:`${Q}-input`},x={SIZE:["small","large","default"],DEFAULT_SIZE:"default",STATUS:["default","error","warning","success"],CLEARBTN_CLICKED_EVENT_FLAG:"__fromClearBtn",MODE:["password"]},Le={};function he(d){const{value:e,maxLength:t,getValueLength:n}=d;if(g(n)){let o=0,l=e.length;for(;o<l;){const i=o+Math.floor((l-o)/2),c=e.slice(0,i+1);n(c)>t?l=i:o=i+1}return e.slice(0,o)}else return e.slice(0,t)}class S extends ee{static get inputDefaultAdapter(){return{notifyChange:h,setValue:h}}constructor(e){super(Object.assign(Object.assign({},S.inputDefaultAdapter),e))}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}setDisable(){}setValue(e){this._adapter.setValue(e)}handleChange(e,t){const{maxLength:n,minLength:o,getValueLength:l}=this._adapter.getProps();let i=e;n&&g(l)&&(i=this.handleVisibleMaxLength(e)),o&&g(l)&&this.handleVisibleMinLength(i),this._isControlledComponent()?this._adapter.notifyChange(i,t):(this._adapter.setValue(i),this._adapter.notifyChange(i,t))}handleVisibleMinLength(e){const{minLength:t,getValueLength:n}=this._adapter.getProps(),{minLength:o}=this._adapter.getStates();if(B(t)&&t>=0&&g(n)&&C(e)){const l=n(e);if(l<t){const i=e.length+(t-l);i!==o&&this._adapter.setMinLength(i)}else o!==t&&this._adapter.setMinLength(t)}}handleVisibleMaxLength(e){const{maxLength:t,getValueLength:n}=this._adapter.getProps();return B(t)&&t>=0&&g(n)&&C(e)&&n(e)>t?(console.warn("[Semi Input] The input character is truncated because the input length exceeds the maximum length limit"),this.handleTruncateValue(e,t)):e}handleTruncateValue(e,t){const{getValueLength:n}=this._adapter.getProps();return he({value:e,maxLength:t,getValueLength:n})}handleClear(e){let t=e;const n="";this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),(!t||typeof t!="object")&&(t={}),te(t,x.CLEARBTN_CLICKED_EVENT_FLAG,!0),this._adapter.notifyChange(n,t),this._adapter.notifyClear(t),t&&this.stopPropagation(t)}handleClick(e){const{disabled:t}=this._adapter.getProps(),{isFocus:n}=this._adapter.getStates();t||n||this._adapter.isEventTarget(e)&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handleModeChange(e){e==="password"?this._adapter.setEyeClosed(!0):this._adapter.setEyeClosed(!1)}handleClickEye(e){const t=this._adapter.getState("eyeClosed");this._adapter.focusInput(),this._adapter.toggleFocusing(!0),this._adapter.setEyeClosed(!t)}handleInputType(e){const t=this._adapter.getProp("mode"),n=this._adapter.getState("eyeClosed");return t==="password"?n?"password":"text":e}handleMouseDown(e){e.preventDefault()}handleMouseUp(e){e.preventDefault()}handleBlur(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(t,e)}handleFocus(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(t,e)}handleInput(e){this._adapter.notifyInput(e)}handleKeyDown(e){this._adapter.notifyKeyDown(e)}handleKeyUp(e){this._adapter.notifyKeyUp(e)}handleKeyPress(e){this._adapter.notifyKeyPress(e),e.key===ne&&this._adapter.notifyEnterPress(e)}isAllowClear(){const{value:e,isFocus:t,isHovering:n}=this._adapter.getStates(),{showClear:o,disabled:l,showClearIgnoreDisabled:i}=this._adapter.getProps();return e&&o&&(!l||i)&&(t||n)}handleClickPrefixOrSuffix(e){const{disabled:t}=this._adapter.getProps(),{isFocus:n}=this._adapter.getStates();!t&&!n&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handlePreventMouseDown(e){e&&g(e.preventDefault)&&e.preventDefault()}handleModeEnterPress(e){["Enter"," "].includes(e==null?void 0:e.key)&&(this.handlePreventMouseDown(e),this.handleClickEye(e))}}var pe=function(d,e){var t={};for(var n in d)Object.prototype.hasOwnProperty.call(d,n)&&e.indexOf(n)<0&&(t[n]=d[n]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(d);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(d,n[o])&&(t[n[o]]=d[n[o]]);return t};const a=ue.PREFIX,ce=x.SIZE,fe=x.STATUS,ge=x.MODE;class E extends se{constructor(e){super(e),this.handleClear=n=>{this.foundation.handleClear(n)},this.handleClick=n=>{this.foundation.handleClick(n)},this.handleMouseOver=n=>{this.setState({isHovering:!0})},this.handleMouseLeave=n=>{this.setState({isHovering:!1})},this.handleModeChange=n=>{this.foundation.handleModeChange(n)},this.handleClickEye=n=>{this.foundation.handleClickEye(n)},this.handleMouseDown=n=>{this.foundation.handleMouseDown(n)},this.handleMouseUp=n=>{this.foundation.handleMouseUp(n)},this.handleModeEnterPress=n=>{this.foundation.handleModeEnterPress(n)},this.handleClickPrefixOrSuffix=n=>{this.foundation.handleClickPrefixOrSuffix(n)},this.handlePreventMouseDown=n=>{this.foundation.handlePreventMouseDown(n)};const t="value"in e?e.value:e.defaultValue;this.state={value:t,cachedValue:e.value,disabled:!1,props:{},isFocus:!1,isHovering:!1,eyeClosed:e.mode==="password",minLength:e.minLength},this.inputRef=u.createRef(),this.prefixRef=u.createRef(),this.suffixRef=u.createRef(),this.foundation=new S(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e}),setEyeClosed:e=>this.setState({eyeClosed:e}),toggleFocusing:e=>{this.setState({isFocus:e})},focusInput:()=>{const{preventScroll:e}=this.props,t=this.inputRef&&this.inputRef.current;t&&t.focus({preventScroll:e})},toggleHovering:e=>this.setState({isHovering:e}),getIfFocusing:()=>this.state.isFocus,notifyChange:(e,t)=>this.props.onChange(e,t),notifyBlur:(e,t)=>this.props.onBlur(t),notifyFocus:(e,t)=>this.props.onFocus(t),notifyInput:e=>this.props.onInput(e),notifyKeyPress:e=>this.props.onKeyPress(e),notifyKeyDown:e=>this.props.onKeyDown(e),notifyKeyUp:e=>this.props.onKeyUp(e),notifyEnterPress:e=>this.props.onEnterPress(e),notifyClear:e=>this.props.onClear(e),setMinLength:e=>this.setState({minLength:e}),isEventTarget:e=>e&&e.target===e.currentTarget})}static getDerivedStateFromProps(e,t){const n={};return e.value!==t.cachedValue&&(n.value=e.value,n.cachedValue=e.value),n}componentDidUpdate(e){const{mode:t}=this.props;e.mode!==t&&this.handleModeChange(t)}componentDidMount(){const{disabled:e,autoFocus:t,preventScroll:n}=this.props;!e&&(t||this.props.autofocus)&&this.inputRef.current.focus({preventScroll:n})}renderPrepend(){const{addonBefore:e}=this.props;if(e){const t=f({[`${a}-prepend`]:!0,[`${a}-prepend-text`]:e&&C(e),[`${a}-prepend-icon`]:y(e)});return u.createElement("div",{className:t,"x-semi-prop":"addonBefore"},e)}return null}renderAppend(){const{addonAfter:e}=this.props;if(e){const t=f({[`${a}-append`]:!0,[`${a}-append-text`]:e&&C(e),[`${a}-append-icon`]:y(e)});return u.createElement("div",{className:t,"x-semi-prop":"addonAfter"},e)}return null}renderClearBtn(){const e=f(`${a}-clearbtn`),{clearIcon:t}=this.props;return this.foundation.isAllowClear()?u.createElement("div",{className:e,onMouseDown:this.handleClear},t||u.createElement(ie,null)):null}renderModeBtn(){const{eyeClosed:e}=this.state,{mode:t,disabled:n}=this.props,o=f(`${a}-modebtn`),l=e?u.createElement(de,null):u.createElement(oe,null),i=t==="password"&&!n,c=e?"Show password":"Hidden password";return i?u.createElement("div",{role:"button",tabIndex:0,"aria-label":c,className:o,onClick:this.handleClickEye,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyPress:this.handleModeEnterPress},l):null}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:n}=this.props,o=e||t;if(!o)return null;const l=f({[`${a}-prefix`]:!0,[`${a}-inset-label`]:t,[`${a}-prefix-text`]:o&&C(o),[`${a}-prefix-icon`]:y(o)});return u.createElement("div",{className:l,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:n,"x-semi-prop":"prefix,insetLabel"},o)}renderSuffix(e){const{suffix:t,hideSuffix:n}=this.props;if(!t)return null;const o=f({[`${a}-suffix`]:!0,[`${a}-suffix-text`]:t&&C(t),[`${a}-suffix-icon`]:y(t),[`${a}-suffix-hidden`]:e&&!!n});return u.createElement("div",{className:o,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},t)}getInputRef(){const{forwardRef:e}=this.props;if(!ae(e)){if(typeof e=="function")return t=>{e(t),this.inputRef={current:t}};if(Object.prototype.toString.call(e)==="[object Object]")return this.inputRef=e,e}return this.inputRef}render(){const e=this.props,{addonAfter:t,addonBefore:n,autoFocus:o,clearIcon:l,className:i,disabled:c,defaultValue:Ce,placeholder:K,prefix:A,mode:M,insetLabel:j,insetLabelId:ye,validateStatus:v,type:P,readonly:I,size:w,suffix:$,style:D,showClear:k,onEnterPress:me,onClear:we,hideSuffix:T,inputStyle:N,forwardRef:be,maxLength:U,getValueLength:Z,preventScroll:_e,borderless:H,showClearIgnoreDisabled:xe,onlyBorder:b}=e,z=pe(e,["addonAfter","addonBefore","autoFocus","clearIcon","className","disabled","defaultValue","placeholder","prefix","mode","insetLabel","insetLabelId","validateStatus","type","readonly","size","suffix","style","showClear","onEnterPress","onClear","hideSuffix","inputStyle","forwardRef","maxLength","getValueLength","preventScroll","borderless","showClearIgnoreDisabled","onlyBorder"]),{value:L,isFocus:W,minLength:F}=this.state,O=this.foundation.isAllowClear(),X=y($),q=this.getInputRef(),p=`${a}-wrapper`,G=f(p,i,{[`${a}-wrapper__with-prefix`]:A||j,[`${a}-wrapper__with-suffix`]:$,[`${a}-wrapper__with-suffix-hidden`]:O&&!!T,[`${a}-wrapper__with-suffix-icon`]:X,[`${a}-wrapper__with-append`]:n,[`${a}-wrapper__with-prepend`]:t,[`${a}-wrapper__with-append-only`]:n&&!t,[`${a}-wrapper__with-prepend-only`]:!n&&t,[`${p}-readonly`]:I,[`${p}-disabled`]:c,[`${p}-warning`]:v==="warning",[`${p}-error`]:v==="error",[`${p}-focus`]:W,[`${p}-clearable`]:k,[`${p}-modebtn`]:M==="password",[`${p}-hidden`]:P==="hidden",[`${p}-${w}`]:w,[`${a}-borderless`]:H,[`${a}-only_border`]:b!=null}),Y=f(a,{[`${a}-${w}`]:w,[`${a}-disabled`]:c,[`${a}-sibling-clearbtn`]:this.foundation.isAllowClear(),[`${a}-sibling-modebtn`]:M==="password"}),J=L??"",_=Object.assign(Object.assign({},z),{style:N,className:Y,disabled:c,readOnly:I,type:this.foundation.handleInputType(P),placeholder:K,onInput:r=>this.foundation.handleInput(r),onChange:r=>this.foundation.handleChange(r.target.value,r),onFocus:r=>this.foundation.handleFocus(r),onBlur:r=>this.foundation.handleBlur(r),onKeyUp:r=>this.foundation.handleKeyUp(r),onKeyDown:r=>this.foundation.handleKeyDown(r),onKeyPress:r=>this.foundation.handleKeyPress(r),value:J});g(Z)||(_.maxLength=U),F&&(_.minLength=F),v==="error"&&(_["aria-invalid"]="true");let V=Object.assign({},D);return b!==void 0&&(V=Object.assign({borderWidth:b},D)),u.createElement("div",{className:G,style:V,onMouseEnter:r=>this.handleMouseOver(r),onMouseLeave:r=>this.handleMouseLeave(r),onClick:r=>this.handleClick(r)},this.renderPrepend(),this.renderPrefix(),u.createElement("input",Object.assign({},_,{ref:q})),this.renderClearBtn(),this.renderSuffix(O),this.renderModeBtn(),this.renderAppend())}}E.propTypes={"aria-label":s.string,"aria-labelledby":s.string,"aria-invalid":s.bool,"aria-errormessage":s.string,"aria-describedby":s.string,"aria-required":s.bool,addonBefore:s.node,addonAfter:s.node,clearIcon:s.node,prefix:s.node,suffix:s.node,mode:s.oneOf(ge),value:s.any,defaultValue:s.any,disabled:s.bool,readonly:s.bool,autoFocus:s.bool,type:s.string,showClear:s.bool,hideSuffix:s.bool,placeholder:s.any,size:s.oneOf(ce),className:s.string,style:s.object,validateStatus:s.oneOf(fe),onClear:s.func,onChange:s.func,onBlur:s.func,onFocus:s.func,onInput:s.func,onKeyDown:s.func,onKeyUp:s.func,onKeyPress:s.func,onEnterPress:s.func,insetLabel:s.node,insetLabelId:s.string,inputStyle:s.object,getValueLength:s.func,preventScroll:s.bool,borderless:s.bool};E.defaultProps={addonBefore:"",addonAfter:"",prefix:"",suffix:"",readonly:!1,type:"text",showClear:!1,hideSuffix:!1,placeholder:"",size:"default",className:"",onClear:h,onChange:h,onBlur:h,onFocus:h,onInput:h,onKeyDown:h,onKeyUp:h,onKeyPress:h,onEnterPress:h,validateStatus:"default",borderless:!1};const Se=u.forwardRef((d,e)=>u.createElement(E,Object.assign({},d,{forwardRef:e})));export{Se as F,ie as I,de as a,ue as c,Le as n,x as s,he as t};
