import{r as O,aA as $}from"./index-zu87m18r.js";function M(n,s){var f=typeof Symbol=="function"&&n[Symbol.iterator];if(!f)return n;var d=f.call(n),l,m=[],g;try{for(;(s===void 0||s-- >0)&&!(l=d.next()).done;)m.push(l.value)}catch(F){g={error:F}}finally{try{l&&!l.done&&(f=d.return)&&f.call(d)}finally{if(g)throw g.error}}return m}function q(n){var s=O.useRef(n);s.current=O.useMemo(function(){return n},[n]);var f=O.useRef(void 0);return f.current||(f.current=function(){for(var d=[],l=0;l<arguments.length;l++)d[l]=arguments[l];return s.current.apply(this,d)}),f.current}var D=function(){var n=M(O.useState({}),2),s=n[1];return O.useCallback(function(){return s({})},[])},C={},B=n=>encodeURIComponent(n).replace(/[!'()*]/g,s=>`%${s.charCodeAt(0).toString(16).toUpperCase()}`),R="%[a-f0-9]{2}",N=new RegExp("("+R+")|([^%]+?)","gi"),x=new RegExp("("+R+")+","gi");function U(n,s){try{return[decodeURIComponent(n.join(""))]}catch{}if(n.length===1)return n;s=s||1;var f=n.slice(0,s),d=n.slice(s);return Array.prototype.concat.call([],U(f),U(d))}function L(n){try{return decodeURIComponent(n)}catch{for(var s=n.match(N)||[],f=1;f<s.length;f++)n=U(s,f).join(""),s=n.match(N)||[];return n}}function v(n){for(var s={"%FE%FF":"��","%FF%FE":"��"},f=x.exec(n);f;){try{s[f[0]]=decodeURIComponent(f[0])}catch{var d=L(f[0]);d!==f[0]&&(s[f[0]]=d)}f=x.exec(n)}s["%C2"]="�";for(var l=Object.keys(s),m=0;m<l.length;m++){var g=l[m];n=n.replace(new RegExp(g,"g"),s[g])}return n}var H=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return v(n)}},Q=(n,s)=>{if(!(typeof n=="string"&&typeof s=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(s==="")return[n];const f=n.indexOf(s);return f===-1?[n]:[n.slice(0,f),n.slice(f+s.length)]},T=function(n,s){for(var f={},d=Object.keys(n),l=Array.isArray(s),m=0;m<d.length;m++){var g=d[m],F=n[g];(l?s.indexOf(g)!==-1:s(g,F,n))&&(f[g]=F)}return f};(function(n){const s=B,f=H,d=Q,l=T,m=r=>r==null;function g(r){switch(r.arrayFormat){case"index":return e=>(a,t)=>{const c=a.length;return t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?a:t===null?[...a,[u(e,r),"[",c,"]"].join("")]:[...a,[u(e,r),"[",u(c,r),"]=",u(t,r)].join("")]};case"bracket":return e=>(a,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?a:t===null?[...a,[u(e,r),"[]"].join("")]:[...a,[u(e,r),"[]=",u(t,r)].join("")];case"comma":case"separator":return e=>(a,t)=>t==null||t.length===0?a:a.length===0?[[u(e,r),"=",u(t,r)].join("")]:[[a,u(t,r)].join(r.arrayFormatSeparator)];default:return e=>(a,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?a:t===null?[...a,u(e,r)]:[...a,[u(e,r),"=",u(t,r)].join("")]}}function F(r){let e;switch(r.arrayFormat){case"index":return(a,t,c)=>{if(e=/\[(\d*)\]$/.exec(a),a=a.replace(/\[\d*\]$/,""),!e){c[a]=t;return}c[a]===void 0&&(c[a]={}),c[a][e[1]]=t};case"bracket":return(a,t,c)=>{if(e=/(\[\])$/.exec(a),a=a.replace(/\[\]$/,""),!e){c[a]=t;return}if(c[a]===void 0){c[a]=[t];return}c[a]=[].concat(c[a],t)};case"comma":case"separator":return(a,t,c)=>{const o=typeof t=="string"&&t.includes(r.arrayFormatSeparator),i=typeof t=="string"&&!o&&y(t,r).includes(r.arrayFormatSeparator);t=i?y(t,r):t;const h=o||i?t.split(r.arrayFormatSeparator).map(I=>y(I,r)):t===null?t:y(t,r);c[a]=h};default:return(a,t,c)=>{if(c[a]===void 0){c[a]=t;return}c[a]=[].concat(c[a],t)}}}function S(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function u(r,e){return e.encode?e.strict?s(r):encodeURIComponent(r):r}function y(r,e){return e.decode?f(r):r}function j(r){return Array.isArray(r)?r.sort():typeof r=="object"?j(Object.keys(r)).sort((e,a)=>Number(e)-Number(a)).map(e=>r[e]):r}function E(r){const e=r.indexOf("#");return e!==-1&&(r=r.slice(0,e)),r}function w(r){let e="";const a=r.indexOf("#");return a!==-1&&(e=r.slice(a)),e}function b(r){r=E(r);const e=r.indexOf("?");return e===-1?"":r.slice(e+1)}function p(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):e.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function A(r,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),S(e.arrayFormatSeparator);const a=F(e),t=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return t;for(const c of r.split("&")){if(c==="")continue;let[o,i]=d(e.decode?c.replace(/\+/g," "):c,"=");i=i===void 0?null:["comma","separator"].includes(e.arrayFormat)?i:y(i,e),a(y(o,e),i,t)}for(const c of Object.keys(t)){const o=t[c];if(typeof o=="object"&&o!==null)for(const i of Object.keys(o))o[i]=p(o[i],e);else t[c]=p(o,e)}return e.sort===!1?t:(e.sort===!0?Object.keys(t).sort():Object.keys(t).sort(e.sort)).reduce((c,o)=>{const i=t[o];return i&&typeof i=="object"&&!Array.isArray(i)?c[o]=j(i):c[o]=i,c},Object.create(null))}n.extract=b,n.parse=A,n.stringify=(r,e)=>{if(!r)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),S(e.arrayFormatSeparator);const a=i=>e.skipNull&&m(r[i])||e.skipEmptyString&&r[i]==="",t=g(e),c={};for(const i of Object.keys(r))a(i)||(c[i]=r[i]);const o=Object.keys(c);return e.sort!==!1&&o.sort(e.sort),o.map(i=>{const h=r[i];return h===void 0?"":h===null?u(i,e):Array.isArray(h)?h.reduce(t(i),[]).join("&"):u(i,e)+"="+u(h,e)}).filter(i=>i.length>0).join("&")},n.parseUrl=(r,e)=>{e=Object.assign({decode:!0},e);const[a,t]=d(r,"#");return Object.assign({url:a.split("?")[0]||"",query:A(b(r),e)},e&&e.parseFragmentIdentifier&&t?{fragmentIdentifier:y(t,e)}:{})},n.stringifyUrl=(r,e)=>{e=Object.assign({encode:!0,strict:!0},e);const a=E(r.url).split("?")[0]||"",t=n.extract(r.url),c=n.parse(t,{sort:!1}),o=Object.assign(c,r.query);let i=n.stringify(o,e);i&&(i=`?${i}`);let h=w(r.url);return r.fragmentIdentifier&&(h=`#${u(r.fragmentIdentifier,e)}`),`${a}${i}${h}`},n.pick=(r,e,a)=>{a=Object.assign({parseFragmentIdentifier:!0},a);const{url:t,query:c,fragmentIdentifier:o}=n.parseUrl(r,a);return n.stringifyUrl({url:t,query:l(c,e),fragmentIdentifier:o},a)},n.exclude=(r,e,a)=>{const t=Array.isArray(e)?c=>!e.includes(c):(c,o)=>!e(c,o);return n.pick(r,t,a)}})(C);const _=$,z={parseNumbers:!1,parseBooleans:!1},P={skipNull:!1,skipEmptyString:!1},k=(n,s)=>{var f,d;const{navigateMode:l="push",parseOptions:m,stringifyOptions:g}={},F=Object.assign(Object.assign({},z),m),S=Object.assign(Object.assign({},P),g),u=_.useLocation(),y=(f=_.useHistory)===null||f===void 0?void 0:f.call(_),j=(d=_.useNavigate)===null||d===void 0?void 0:d.call(_),E=D(),w=O.useRef({}),b=O.useMemo(()=>C.parse(u.search,F),[u.search]),p=O.useMemo(()=>Object.assign(Object.assign({},w.current),b),[b]);return[p,q(r=>{const e=typeof r=="function"?r(p):r;E(),y&&y[l]({hash:u.hash,search:C.stringify(Object.assign(Object.assign({},b),e),S)||"?"},u.state),j&&j({hash:u.hash,search:C.stringify(Object.assign(Object.assign({},b),e),S)||"?"},{replace:l==="replace",state:u.state})})]};export{k as u};
